function _rhc_check_visibility(){jQuery(document).ready(function(a){var b=!1;a(".fullCalendar").each(function(c,d){a(d).is(":visible")&&a(d).find(".fc-content").height()<10?a(d).fullCalendar("render"):a(d).find(".fc-content").height()<10&&(b=!0)}),b&&setTimeout("_rhc_check_visibility()",300)})}function _rhc_check_init_rhc(){jQuery(".rhc_holder").each(function(a,b){return!!jQuery(this).data("Calendarize")||(init_rhc(),!1)}),setTimeout("_rhc_check_init_rhc()",1e3)}function rhc_in_array(a,b){var c=jQuery.inArray(a,b);return void 0!=c&&c!=-1}function _rhc_widget_link_click(a,b){var c=jQuery(b).data("rhc_event")||!1;if(c&&c.fc_click_target)var d=c.fc_click_target;else var d="_self";if(a.event_rdate||a.gotodate){jQuery("form#calendarizeit_repeat_instance").remove();var e='<form id="calendarizeit_repeat_instance" method="post"></form>';jQuery(e).attr("action",a.url).attr("target",d).appendTo("BODY"),a.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+a.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),a.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+a.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(b){b.stopPropagation();var c=a.url;return!(null==c||c.indexOf("javascript:void(0);")>0)}).submit()}else{var f=a.url;if(null!=f&&0==f.indexOf("javascript:void(0);"))return!1;"_blank"==d?window.open(f):location.href=f}return!1}function _rhc_sort_events(a,b){return a.start>b.start?1:a.start<b.start?-1:0}function fc_mouseover(a,b,c){}function fc_event_details(a,b,c){a.id=a.id.replace("@","_"),a.id=a.id.replace(".","_"),a.gcal&&a.description&&(a.description=a.description.replace(/\n/g,"<br />")),jQuery(document).ready(function(d){var e=c.calendar.options.tooltip.target||"_self";a.fc_click_target&&(e=a.fc_click_target),c.calendar.rhc_search(c.calendar,b,!0);var f="fct-"+a.id;if(d("BODY").find("#"+f).length>0&&d("BODY").find("#"+f).remove(),0==d("BODY").find("#"+f).length&&d("BODY").find("#fct-item-template").clone().attr("id",f).addClass("fct-tooltip").bind("close-tooltip",function(a){d(this).animate({opacity:0},"fast","swing",function(a){d(this).remove()})}).find(".fc-close-tooltip a").on("click",function(a){d(".fct-tooltip").trigger("close-tooltip")}).end().appendTo("BODY"),d("BODY").find("#"+f).length>0){var g=d(b.target).offset(),h=c.element.offset(),i=g.left<h.left+c.element.width()/2,j=i?"fc-tip-left":"fc-tip-right";d(".fct-tooltip:not(#"+f+")").trigger("close-tooltip");var k=d("BODY").find("#"+f);if(d("BODY").trigger("rhc_tooltip_before_show",[a,k,c]),k.stop().addClass(j).find(".fc-description").html(a.description).end().css("opacity",0).show(),a.color&&k.css("border-left-color",a.color),a.source&&a.source.fc_click_target&&"_nolink"==a.source.fc_click_target&&(a.url=!1),parseInt(c.calendar.options.tooltip.image)||(a.image=!1),a.url){var l=a.url;a.fc_rrule&&""!=a.fc_rrule,tooltip_click=function(b){jQuery("form#calendarizeit_repeat_instance").remove();var c='<form id="calendarizeit_repeat_instance" method="post"></form>';return jQuery(c).attr("target",e).attr("action",a.url).appendTo("BODY"),a.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+a.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),a.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+a.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(a){return a.stopPropagation(),!0}).submit(),!1};var m=!(c.calendar.options.tooltip&&c.calendar.options.tooltip.disableTitleLink&&"1"==c.calendar.options.tooltip.disableTitleLink);if(!m||a.gcal||"javascript:void(0);"==a.url)k.find(".fc-title").html(a.title);else if(a.direct_link)d("<a></a>").attr("href",l).html(a.title).attr("target",e).appendTo(k.find(".fc-title"));else{var n=d("<a></a>");-1!==l.indexOf(window.location.hostname)&&n.bind("click",tooltip_click),n.attr("href",l).html(a.title).html(a.title).attr("target",e).appendTo(k.find(".fc-title"))}a.image&&a.image[0]&&(a.direct_link?d("<a></a>").attr("href",l).attr("target",e).append(d("<img />").attr("src",a.image[0])).appendTo(k.find(".fc-image")):d("<a></a>").attr("href",l).bind("click",tooltip_click).attr("target",e).append(d("<img />").attr("src",a.image[0])).appendTo(k.find(".fc-image")))}else k.find(".fc-title").html(a.title),a.image&&a.image[0]&&d("<img />").attr("src",a.image[0]).appendTo(k.find(".fc-image"));k.find(".fc-start,.fc-end,.fc-hide").hide(),a.allDay?(a.start&&k.find(".fc-start").append(d("<span></span>").html(d.fullCalendar.formatDate(a.start,c.calendar.options.tooltip.startDateAllDay,c.calendar.options))).show(),a.end&&k.find(".fc-end").append(d("<span></span>").html(d.fullCalendar.formatDate(a.end,c.calendar.options.tooltip.endDateAllDay||c.calendar.options.tooltip.startDateAllDay,c.calendar.options))).show()):(a.start&&k.find(".fc-start").append(d("<span></span>").html(d.fullCalendar.formatDate(a.start,c.calendar.options.tooltip.startDate,c.calendar.options))).show(),a.end&&k.find(".fc-end").append(d("<span></span>").html(d.fullCalendar.formatDate(a.end,c.calendar.options.tooltip.endDate||c.calendar.options.tooltip.startDate,c.calendar.options))).show()),a.terms&&a.terms.length>0&&d.each(a.terms,function(b,f){if(f.gaddress&&a.local_feed){var g=".fc-term-"+f.taxonomy+"-gaddress";k.find(g).find("a").length>0&&k.find(g).append('<span class="rhc-tooltip tax-term-divider"></span>'),d("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(f.gaddress)).html(f.gaddress).attr("target","_blank").appendTo(k.find(g).show())}k.find(".fc-tax-"+f.taxonomy).length>0&&(""==f.name?k.find(".fc-tax-"+f.taxonomy).hide():(k.find(".fc-tax-"+f.taxonomy).find("a").length>0&&k.find(".fc-tax-"+f.taxonomy).append('<span class="rhc-tooltip tax-term-divider"></span>'),f.gaddress&&0==a.local_feed?d("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(f.gaddress)).html(f.name).attr("target",e).appendTo(k.find(".fc-tax-"+f.taxonomy)):f.url&&""!=f.url&&c.calendar.options.tooltip.taxonomy_links?d("<a></a>").attr("href",f.url).html(f.name).attr("target",e).appendTo(k.find(".fc-tax-"+f.taxonomy)):d("<span></span>").html(f.name).appendTo(k.find(".fc-tax-"+f.taxonomy)),k.find(".fc-tax-"+f.taxonomy).find(".tax-label").html(f.taxonomy_label).end().show()))}),g.top=g.top-k.height()/2+d(b.srcElement).height()/2;var o=c.element.offset(),p=o.top-g.top-5;p>0&&(g.top=g.top+p,k.find(".fct-arrow-holder").css("margin-top",p*-1)),i?g.left=g.left+d(b.target).width():g.left=g.left+k.width()*-1,"agendaDay"==c.name&&(g.left=g.left-k.width()+50),k.css("min-height","").css("height","auto").offset(g);var q=document.documentElement.clientWidth||window.innerWidth;client_right=d(document).scrollLeft()+q;var r=g.left+k.width();r>client_right&&(g.left=g.left-(r-client_right)-12,k.offset(g)),k.animate({opacity:1},"fast","swing"),k.unbind("mouseleave").bind("mouseleave",function(a){var b=this;return setTimeout(function(){return!d(b).is(":hover")&&void(c.calendar.options.tooltip_on_hover&&"1"==c.calendar.options.tooltip_on_hover&&d(b).trigger("close-tooltip"))},200),!0}),d("BODY").trigger("rhc_tooltip_after_show",[a,k,c])}})}function no_link(a,b,c){return b.stopPropagation(),!1}function fc_click_no_action(a,b,c){return b.stopPropagation(),!1}function fc_click(a,b,c){var d=a.fc_click_link?a.fc_click_link:"view";if(c&&"rhc_event"==c.name&&"view"==d&&(d="page"),"none"==d)return!1;if("undefined"==typeof a.fc_click_target&&(a.fc_click_target="_self"),a.url&&"page"==d){if("undefined"==typeof url)var e=!1;else var e=-1==a.url.indexOf(window.location.hostname);return a.fc_click_target&&""!=a.fc_click_target&&!e?(fc_event_links_to_page(a,b,c),!1):(jQuery(this).prop("target",a.fc_click_target),!0)}return fc_event_details(a,b,c),!1}function fc_event_links_to_page(a,b,c){jQuery("form#calendarizeit_repeat_instance").remove();var d='<form id="calendarizeit_repeat_instance" method="post" target="'+a.fc_click_target+'"></form>';jQuery(d).attr("action",a.url).appendTo("BODY"),a.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+a.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),a.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+a.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(a){return a.stopPropagation(),!0}).submit()}function fc_select(a,b,c,d,e){jQuery(document).ready(function(a){var b=a(d.target).offset(),c=a(d.target).width();a(".fc-dialog").CalendarizeDialog("open",{offset:b,margin_left:c})})}function _add_param_to_url(a,b,c){if("javascript:void(0);"==a)return a;var d="",e=a.split("?"),f=e[0],g=e[1],h="";if(g){var e=g.split("&");for(i=0;i<e.length;i++)e[i].split("=")[0]!=b&&(d+=h+e[i],h="&")}var j=h+""+b+"="+c;return f+"?"+d+j}function _add_repeat_instance_data_to_url(a){if(a.repeat_instance&&(a.fc_rrule&&""!=a.fc_rrule||a.fc_rdate&&""!=a.fc_rdate))if(a.using_calendar_url){var b=jQuery.fullCalendar.formatDate(a.start,"yyyy-MM-dd");b&&""!=b&&(a.url=_add_param_to_url(a.url,"gotodate",b))}else if(a.src_start&&a.fc_date_time&&a.src_start==a.fc_date_time);else{var b=jQuery.fullCalendar.formatDate(a.start,"yyyyMMddHHmmss"),c=jQuery.fullCalendar.formatDate(a.end,"yyyyMMddHHmmss");b&&""!=b&&(c&&""!=c&&(b=b+","+c),a.url=""==a.url?"":_add_param_to_url(a.url,"event_rdate",b))}return a}function _add_repeat_instance_data_to_event(a){if(a.repeat_instance&&(a.fc_rrule&&""!=a.fc_rrule||a.fc_rdate&&""!=a.fc_rdate))if(a.using_calendar_url){var b=jQuery.fullCalendar.formatDate(a.start,"yyyy-MM-dd");b&&""!=b&&(a.gotodate=b)}else if(a.src_start&&a.fc_date_time&&a.src_start==a.fc_date_time);else{var b=jQuery.fullCalendar.formatDate(a.start,"yyyyMMddHHmmss"),c=jQuery.fullCalendar.formatDate(a.end,"yyyyMMddHHmmss");b&&""!=b&&(c&&""!=c&&(b=b+","+c),a.event_rdate=b,a.url=""==a.url?"":_add_param_to_url(a.url,"event_rdate",a.event_rdate))}return a}function exdate_to_array_of_dates(b){if("undefined"==typeof b)return[];var c=""==b?[]:b.split(",");if(c.length>0){var d=[];for(a=0;a<c.length;a++){var e=c[a];d[d.length]=new Date(e.substring(0,4),e.substring(4,6)-1,e.substring(6,8),e.substring(9,11),e.substring(11,13),e.substring(13,15))}return d}return[]}function init_rhc(){jQuery(document).ready(function($){init_sc_ical_feed(),$("BODY").bind("dbox.loaded",function(){init_sc_ical_feed()}),$(".rhc_holder").each(function(i,el){var ui_theme=$(el).data("rhc_ui_theme");""!=ui_theme&&$("#fullcalendar-theme-css").attr("href",ui_theme);var rhc_options=$(el).data("rhc_options");eval("$(el).Calendarize("+rhc_options+")")}),$(".fc-button-custom").hover(function(){$(this).addClass("fc-state-hover")},function(){$(this).removeClass("fc-state-hover")}),$(window).resize(function(){$(".rhcalendar.not-widget .fullCalendar ").each(function(a,b){set_fc_small(b)})}),$("BODY").data("rhc_tooltip_before_show")||$("BODY").data("rhc_tooltip_before_show",!0).bind("rhc_tooltip_before_show",rhc_tooltip_before_show),$("BODY").data("rhc_tooltip_contend_loaded")||$("BODY").data("rhc_tooltip_contend_loaded",!0).bind("rhc_tooltip_contend_loaded",rhc_tooltip_contend_loaded),$(".rhc-next").on("click",function(a){})})}function init_sc_ical_feed(){jQuery(document).ready(function(a){a(".rhc-ical-feed-cont").length>0&&a(".rhc-ical-feed-cont").each(function(b,c){if("1"!=a(c).data("sc_ical_feed_init")){a(c).data("sc_ical_feed_init","1");var d=this,e=a(this).parent(),f=a(this).data("icalendar_button"),g=a(this).attr("data-theme"),h="icalendar",j=(a(this).attr("data-title"),function(b,c){a(b).width(a(b).data("width"));var f=a(c.target).offset(),g=a(c.target).width();a(b).removeClass("ical-tooltip-holder").addClass("ical-tooltip").CalendarizeDialog("open",{offset:f,margin_left:g})});if(a(d).find(".ical-close").unbind("click").click(function(b){a(d).CalendarizeDialog("close")}),j){var k=a("<span class='fc-button fc-button-"+h+" "+g+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+f+"</span><span class='fc-button-effect'><span></span></span></span></span>");k&&(k.click(function(a){k.hasClass(g+"-state-disabled")||j(d,a)}).mousedown(function(){k.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){k.removeClass(g+"-state-down")}).hover(function(){k.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){k.removeClass(g+"-state-hover").removeClass(g+"-state-down")}).appendTo(e),k.addClass(g+"-corner-left"),k.addClass(g+"-corner-right"))}}})})}function get_event_ocurrences(a){var b=jQuery.fullCalendar.parseDate(a.start);if(a.fc_rrule=""==a.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":a.fc_rrule,scheduler=new Scheduler(b,a.fc_rrule,!0),""!=a.fc_interval&&a.fc_exdate){var c=exdate_to_array_of_dates(a.fc_exdate);c.length>0&&scheduler.add_exception_dates(c)}if(a.fc_rdate&&""!=a.fc_rdate){var d=exdate_to_array_of_dates(a.fc_rdate);d.length>0&&scheduler.add_rdates(d)}occurrences=scheduler.occurrences_between(start,end)}function set_fc_small(a){if(jQuery(a).parent().hasClass("not-widget")){var b=parseInt(jQuery(a).width());if(mobile_width=RHC.mobile_width||480,b>0&&b<=mobile_width){var c=jQuery(a).fullCalendar("getView");"agendaWeek"==c.name&&(jQuery(a).data("restore_agenda_week",!0),jQuery(a).fullCalendar("changeView","basicWeek")),"agendaDay"==c.name&&(jQuery(a).data("restore_agenda_day",!0),jQuery(a).fullCalendar("changeView","basicDay")),jQuery(a).parent().addClass("fc-small"),jQuery(a).find("td:first-child").each(function(a,b){jQuery(b).find("> div").css("min-height","")})}else{jQuery(a).parent().removeClass("fc-small");var c=jQuery(a).fullCalendar("getView");"basicWeek"==c.name&&jQuery(a).data("restore_agenda_week")&&(jQuery(a).data("restore_agenda_week",!1),jQuery(a).fullCalendar("changeView","agendaWeek")),"basicDay"==c.name&&jQuery(a).data("restore_agenda_day")&&(jQuery(a).data("restore_agenda_day",!1),jQuery(a).fullCalendar("changeView","agendaDay"))}}}function rhc_tooltip_before_show(a,b,c,d){return jQuery(document).ready(function(e){if(d.calendar.options.tooltip.enableCustom&&b.local_feed)if(c.find(".fct-dbox").hide(),RHC.tooltip_details[b.id]&&"loading"==RHC.tooltip_details[b.id])setTimeout(function(){rhc_tooltip_before_show(a,b,c,d)},200);else if(RHC.tooltip_details[b.id]){if(!0===RHC.tooltip_details[b.id])return c.find(".fct-dbox").show(),!0;c.find(".fct-dbox").empty().show().append(RHC.tooltip_details[b.id].clone()),b.allDay?(b.start&&c.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(b.start,d.calendar.options.tooltip.startDateAllDay,d.calendar.options)),b.end&&c.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(b.end,d.calendar.options.tooltip.endDateAllDay||d.calendar.options.tooltip.startDateAllDay,d.calendar.options))):(b.start&&c.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(b.start,d.calendar.options.tooltip.startDate,d.calendar.options)),b.end&&c.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(b.end,d.calendar.options.tooltip.endDate||d.calendar.options.tooltip.startDate,d.calendar.options))),c.find(".rhc_date").each(function(a,c){field=jQuery(c).data("fc_field"),date_format=jQuery(c).data("fc_date_format"),(value=b[field])&&jQuery(c).html(jQuery.fullCalendar.formatDate(value,date_format,d.calendar.options))}),e("BODY").trigger("rhc_tooltip_contend_loaded",[a,b,c,d])}else e.post(RHC.ajaxurl,{rhc_action:"rhc_tooltip_detail",id:b.id,event_rdate:b.event_rdate},function(f){e(f).find(".fe-extrainfo-holder").length>0?(RHC.tooltip_details[b.id]=e(f).clone(),rhc_tooltip_before_show(a,b,c,d)):RHC.tooltip_details[b.id]=!0},"html")}),!0}function cb_event_mouseover(a,b,c){return jQuery(document).ready(function(b){if(c.calendar.options.tooltip.enableCustom&&a.local_feed)if(RHC.tooltip_details[a.id]);else{RHC.tooltip_details[a.id]="loading",url=RHC.ajaxurl,url=url+"?rhc_action=rhc_tooltip_detail&id="+a.id+"&event_rdate="+a.event_rdate;var d=new Date;ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:d.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u,b.get(url,{},function(c){b(c).find(".fe-extrainfo-holder").length>0?RHC.tooltip_details[a.id]=b(c).clone():RHC.tooltip_details[a.id]=!0},"html")}}),!0}function rhc_tooltip_contend_loaded(a){init_sc_ical_feed()}function calendar_widget_day_click(a,b,c,d,e,f,g){var h=jQuery(g).find(".rhc_calendar_widget_day_click_holder");return h.children().length>0?h.children().fadeOut("fast",function(){_calendar_widget_day_click(a,b,c,d,e,f,g)}):_calendar_widget_day_click(a,b,c,d,e,f,g),!0}function _calendar_widget_day_click(a,b,c,d,e,f,g){if(client_events=jQuery("#"+f.calendar_id).find(".fullCalendar").fullCalendar("clientEvents"),client_events.length>0){var i=[],j=[],k=jQuery.fullCalendar.cloneDate(a);k.setHours(0,0,0),jQuery.each(client_events,function(a,b){if(ev_uid=b.id+"-"+b._start.getTime(),-1==jQuery.inArray(ev_uid,i)){var c=jQuery.fullCalendar.cloneDate(b._start);c.setHours(0,0,0),c.getTime()==k.getTime()&&(i.push(ev_uid),j.push(b))}}),j.sort(_rhc_sort_events);var l=jQuery(g).find(".rhc_calendar_widget_day_click_holder"),m=jQuery(g).find(".rhc_calendar_widget_day_click_template").children();l.empty(),jQuery.each(j,function(a,b){b.fc_click_link="page";var c=m.clone();c.find(".rhc_title").append(jQuery(jQuery("<span></span>").html(b.title)).RHCLink(b,d)),b.image&&b.image[0]&&c.find(".rhc_featured_image").append(jQuery(jQuery("<img />").attr("src",b.image[0])).RHCLink(b,d)),c.find(".rhc_date").each(function(a,c){field=jQuery(c).data("fc_field"),date_format=jQuery(c).data("fc_date_format"),(value=b[field])&&jQuery(c).html(jQuery.fullCalendar.formatDate(value,date_format,f))}),b.allDay&&c.find(".rhc-event-time").hide(),c.find(".rhc_description").html(b.description),b.terms&&b.terms.length>0&&jQuery.each(b.terms,function(a,b){if(c.find(".taxonomy-"+b.taxonomy).parent().find("a").length>0&&c.find(".taxonomy-"+b.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),b.name&&""!=b.name&&c.find(".taxonomy-"+b.taxonomy).length>0&&(""==b.url?jQuery("<span>"+b.name+"</span>").appendTo(c.find(".taxonomy-"+b.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):jQuery("<a>"+b.name+"</a>").attr("href",b.url).appendTo(c.find(".taxonomy-"+b.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),c.find(".taxonomy-"+b.taxonomy+"-gaddress").length>0&&b.gaddress&&""!=b.gaddress){c.find(".taxonomy-"+b.taxonomy+"-gaddress").parent().find("a").length>0&&c.find(".taxonomy-"+b.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var d="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(b.gaddress);jQuery("<a>"+b.gaddress+"</a>").attr("href",d).attr("target","_blank").appendTo(c.find(".taxonomy-"+b.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}});var e=b.color||b.source.color||"",g=b.textColor||b.source.textColor||"";g=g.length<=1?"#ffffff":g,e.length>1&&g.length>1&&c.find(".rhc-widget-event-list-date").css("background-color",e).css("color",g),f.widget_autoclick&&1==parseInt(f.widget_autoclick)?c.find(".rhc-widget-event-list-head").parents(".rhc-widget-event-list").addClass("open").find(".rhc-widget-event-list-body").show():c.find(".rhc-widget-event-list-head").unbind("click").bind("click",function(a){var b=jQuery(this).parents(".rhc-widget-event-list");b.toggleClass("open"),b.is(".open")?b.find(".rhc-widget-event-list-body").slideDown("fast"):b.find(".rhc-widget-event-list-body").slideUp("fast")}),f.widget_autohover&&1==parseInt(f.widget_autohover)?c.find(".rhc-widget-event-list-head").addClass("hover"):c.find(".rhc-widget-event-list-head").mouseenter(function(){jQuery(this).addClass("hover")}).mouseleave(function(){jQuery(this).removeClass("hover")});var i=b.local_id||0;if(i>0){var j=f.events_source+f.events_source_query;j=j.replace("get_calendar_events","get_icalendar_events");var k=j+"&ics=1";k=k+"&ID="+i,c.find(".rhc-icon-ical").click(function(a){window.open(k,"_self")})}b.terms&&b.terms.length>0&&jQuery.each(b.terms,function(a,d){var e=d.glon||!1,g=d.glat||!1,i=d.gaddress||!1,j="",k=c.find(".rhc-map-view"),l=k.data("size"),m=k.data("zoom"),n=k.data("maptype"),o=b.color||b.source.color||"";if(o=o.length>1?o.toUpperCase(o).replace("#","0x"):"blue",!1!==e&&!1!==g?j="http://maps.googleapis.com/maps/api/staticmap?center="+g+","+e+"&zoom="+m+"&size="+l+"&maptype="+n+"&markers=color:"+o+"%7C"+g+","+e:!1!==i&&""!=i&&(j="http://maps.googleapis.com/maps/api/staticmap?center="+escape(i)+"&zoom="+m+"&size="+l+"&maptype="+n+"&markers=color:"+o+"%7C"+escape(i)),""!=j&&"none"!=f.widget_google_map)if(c.find(".rhc-icon-map").unbind("click").bind("click",function(a){var b=c.find(".rhc-map-view .sws-gmap3-cont");if(b.data("gmap_inited"));else if(c.find(".rhc-map-view .sws-gmap3-cont").length>0){b.data("gmap_inited",!0),ratio=c.find(".rhc-map-view").data("ratio"),arr=ratio.split(":"),ratio=arr[1]/arr[0],w=c.find(".rhc-map-view").width(),h=w*ratio,b.height(h);var d=b.data("maptype"),e=b.data("uid"),f=b.data("address");return void rhc_gmap3_init({glat:b.data("glat"),glon:b.data("glon"),zoom:b.data("zoom"),disableDefaultUI:!1,map_type:google.maps.MapTypeId[d],uid:e,name:"",info_windows:"sws-gmap3-info-"+e,markers:"#sws-gmap3-marker-"+e,address:f,scrollwheel:1,traffic:!1})}jQuery(this).parents(".rhc-widget-event-list").find(".rhc-map-view").slideToggle("fast")}).show(),"static"==f.widget_google_map)""!=j&&c.find(".rhc-map-view").empty().hide().append(jQuery("<img />").attr("src",j));else if("interactive"==f.widget_google_map){var p='<div class="sws-gmap3-frame"><div id="map_canvas{uid}" class="sws-gmap3-cont"></div></div><div id="sws-gmap3-marker-{uid}" class="sws-gmap3-marker">|||::</div><div class="sws-gmap3-marker"><div id="sws-gmap3-info-{uid}" >{info_windows}</div></div>',q=b.id+"-"+b.start.getTime();p=p.replace(/\{uid\}/g,q),p=p.replace(/\{info_windows\}/g,d.name),c.find(".rhc-map-view").empty().append(p),c.find(".rhc-map-view .sws-gmap3-cont").data("glat",g).data("glon",e).data("zoom",m).data("maptype",n).data("uid",q).data("address",i)}}),"undefined"!=typeof rhp_vars&&(c.find(".rhc-icon-facebook").length>0&&c.find(".rhc-icon-facebook").show().unbind("click").bind("click",function(a){function d(a){}a.preventDefault(),FB.init({appId:rhp_vars.fb_appID,status:!0,cookie:!0});var c={method:"share",href:b.url,link:b.url,name:b.title,caption:b.title,description:b.description};FB.ui(c,d)}),c.find(".rhc-icon-twitter").length>0&&c.find(".rhc-icon-twitter").show().unbind("click").bind("click",function(a){var e=(encodeURIComponent(b.url),encodeURIComponent(b.description),"https://twitter.com/share?&url="+b.url+"&text="+b.title+"&counturl="+b.url);window.open(e,"Twitter","width=660,height=400,scrollbars=no;resizable=no")}),c.find(".rhc-icon-linkedin").length>0&&c.find(".rhc-icon-linkedin").show().unbind("click").bind("click",function(a){var c=encodeURIComponent(b.url),d=encodeURIComponent(b.title),e=encodeURIComponent(b.description),f=encodeURIComponent(b.url),g="http://www.linkedin.com/shareArticle?mini=true&url="+c+"&title="+d+"&summary="+e+c+"&source="+f;window.open(g,"LinkedIn","width=660,height=400,scrollbars=no;resizable=no")}),c.find(".rhc-icon-googleplus").length>0&&c.find(".rhc-icon-googleplus").show().unbind("click").bind("click",function(a){var c=encodeURIComponent(b.url),d="https://plus.google.com/share?url="+c;window.open(d,"Google+","width=660,height=400,scrollbars=no;resizable=no")})),c.hide(),l.append(c.fadeIn("fast"))}),jQuery("BODY").trigger("dbox.loaded")}}function _rhc_sort_events(a,b){return a.start>b.start?1:a.start<b.start?-1:0}function btn_tax_dropdown(a,b){}function dayclick_tooltip_evenlits(a,b,c,d,e,f){console.log("day click",a,f)}function rhc_console(){console&&console.log.apply(console,arguments)}jQuery(document).ready(function(a){RHC.visibility_check&&(jQuery(".fullCalendar").length>0&&setTimeout("_rhc_check_visibility()",200),setTimeout("_rhc_check_init_rhc()",500))}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(a){var b="undefined"!=typeof module&&module.exports,c=function(){if(!c._nlp)if(b)c._nlp=require("./nlp");else if(!(c._nlp=a._RRuleNLP))throw new Error("You need to include rrule/nlp.js for fromText/toText to work.");return c._nlp},d={MONTH_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31],ONE_DAY:864e5,MAXYEAR:9999,ORDINAL_BASE:new Date(1970,0,1),PY_WEEKDAYS:[6,0,1,2,3,4,5],getYearDay:function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate());return Math.ceil((b-new Date(a.getFullYear(),0,1))/d.ONE_DAY)+1},isLeapYear:function(a){return a instanceof Date&&(a=a.getFullYear()),a%4===0&&a%100!==0||a%400===0},tzOffset:function(a){return 60*a.getTimezoneOffset()*1e3},daysBetween:function(a,b){var c=a.getTime()-d.tzOffset(a),e=b.getTime()-d.tzOffset(b),f=Math.abs(c-e);return Math.round(f/d.ONE_DAY)},toOrdinal:function(a){return d.daysBetween(a,d.ORDINAL_BASE)},fromOrdinal:function(a){var b=a*d.ONE_DAY;return new Date(d.ORDINAL_BASE.getTime()-d.tzOffset(d.ORDINAL_BASE)+b+d.tzOffset(new Date(b)))},monthRange:function(a,b){var c=new Date(a,b,1);return[d.getWeekday(c),d.getMonthDays(c)]},getMonthDays:function(a){var b=a.getMonth();return 1==b&&d.isLeapYear(a)?29:d.MONTH_DAYS[b]},getWeekday:function(a){return d.PY_WEEKDAYS[a.getDay()]},combine:function(a,b){return b=b||a,new Date(a.getFullYear(),a.getMonth(),a.getDate(),b.getHours(),b.getMinutes(),b.getSeconds())},clone:function(a){var b=new Date(a.getTime());return b.setMilliseconds(0),b},cloneDates:function(a){for(var b=[],c=0;c<a.length;c++)b.push(d.clone(a[c]));return b},sort:function(a){a.sort(function(a,b){return a.getTime()-b.getTime()})},timeToUntilString:function(a){for(var c,b=new Date(a),d=[b.getUTCFullYear(),b.getUTCMonth()+1,b.getUTCDate(),"T",b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),"Z"],e=0;e<d.length;e++)c=d[e],!/[TZ]/.test(c)&&c<10&&(d[e]="0"+String(c));return d.join("")},untilStringToDate:function(a){var b=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/,c=b.exec(a);if(!c)throw new Error("Invalid UNTIL value: "+a);return new Date(Date.UTC(c[1],c[2]-1,c[3],c[5]||0,c[6]||0,c[7]||0))}};d.Time=function(a,b,c){this.hour=a,this.minute=b,this.second=c},d.Time.prototype={getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getTime:function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)}};var e=function(a,b){1===arguments.length&&(b=a,a=0);for(var c=[],d=a;d<b;d++)c.push(d);return c},f=function(a,b){var c=0,d=[];if(a instanceof Array)for(;c<b;c++)d[c]=[].concat(a);else for(;c<b;c++)d[c]=a;return d},g=function(a,b){var c=a%b;return c*b<0?c+b:c},h=function(a,b){return{div:Math.floor(a/b),mod:g(a,b)}},i=function(a){return!(a instanceof Array&&0==a.length)&&Boolean(a)},j=function(a,b){return a.indexOf(b)!=-1},k=[].concat(f(1,31),f(2,28),f(3,31),f(4,30),f(5,31),f(6,30),f(7,31),f(8,31),f(9,30),f(10,31),f(11,30),f(12,31),f(1,7)),l=[].concat(f(1,31),f(2,29),f(3,31),f(4,30),f(5,31),f(6,30),f(7,31),f(8,31),f(9,30),f(10,31),f(11,30),f(12,31),f(1,7)),m=e(1,29),n=e(1,30),o=e(1,31),p=e(1,32),q=[].concat(p,n,p,o,p,o,p,p,o,p,o,p,p.slice(0,7)),r=[].concat(p,m,p,o,p,o,p,p,o,p,o,p,p.slice(0,7));m=e(-28,0),n=e(-29,0),o=e(-30,0),p=e(-31,0);var s=[].concat(p,n,p,o,p,o,p,p,o,p,o,p,p.slice(0,7)),t=[].concat(p,m,p,o,p,o,p,p,o,p,o,p,p.slice(0,7)),u=[0,31,60,91,121,152,182,213,244,274,305,335,366],v=[0,31,59,90,120,151,181,212,243,273,304,334,365],w=function(){for(var a=[],b=0;b<55;b++)a=a.concat(e(7));return a}(),x=function(a,b){if(0===b)throw new Error("Can't create weekday with n == 0");this.weekday=a,this.n=b};x.prototype={nth:function(a){return this.n==a?this:new x(this.weekday,a)},equals:function(a){return this.weekday==a.weekday&&this.n==a.n},toString:function(){var a=["MO","TU","WE","TH","FR","SA","SU"][this.weekday];return this.n&&(a=(this.n>0?"+":"")+String(this.n)+a),a},getJsWeekday:function(){return 6==this.weekday?0:this.weekday+1}};var y=function(a,b){this._string=null,a=a||{},this._cache=b?null:{all:!1,before:[],after:[],between:[]},this.origOptions={};var c=[],e=Object.keys(a),f=Object.keys(y.DEFAULT_OPTIONS);if(e.forEach(function(b){this.origOptions[b]=a[b],j(f,b)||c.push(b)},this),
c.length)throw new Error("Invalid options: "+c.join(", "));if(!y.FREQUENCIES[a.freq]&&null===a.byeaster)throw new Error("Invalid frequency: "+String(a.freq));f.forEach(function(b){j(e,b)||(a[b]=y.DEFAULT_OPTIONS[b])});var g=this.options=a;if(null!==g.byeaster&&(g.freq=y.YEARLY),g.dtstart||(g.dtstart=new Date,g.dtstart.setMilliseconds(0)),null===g.wkst?g.wkst=y.MO.weekday:"number"==typeof g.wkst||(g.wkst=g.wkst.weekday),null!==g.bysetpos){"number"==typeof g.bysetpos&&(g.bysetpos=[g.bysetpos]);for(var h=0;h<g.bysetpos.length;h++){var k=g.bysetpos[h];if(0==k||!(-366<=k&&k<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(i(g.byweekno)||i(g.byyearday)||i(g.bymonthday)||null!==g.byweekday||null!==g.byeaster))switch(g.freq){case y.YEARLY:g.bymonth||(g.bymonth=g.dtstart.getMonth()+1),g.bymonthday=g.dtstart.getDate();break;case y.MONTHLY:g.bymonthday=g.dtstart.getDate();break;case y.WEEKLY:g.byweekday=d.getWeekday(g.dtstart)}if(null===g.bymonth||g.bymonth instanceof Array||(g.bymonth=[g.bymonth]),null===g.byyearday||g.byyearday instanceof Array||(g.byyearday=[g.byyearday]),null===g.bymonthday)g.bymonthday=[],g.bynmonthday=[];else if(g.bymonthday instanceof Array){var l=[],m=[];for(h=0;h<g.bymonthday.length;h++){var k=g.bymonthday[h];k>0?l.push(k):k<0&&m.push(k)}g.bymonthday=l,g.bynmonthday=m}else g.bymonthday<0?(g.bynmonthday=[g.bymonthday],g.bymonthday=[]):(g.bynmonthday=[],g.bymonthday=[g.bymonthday]);if(null===g.byweekno||g.byweekno instanceof Array||(g.byweekno=[g.byweekno]),null===g.byweekday)g.bynweekday=null;else if("number"==typeof g.byweekday)g.byweekday=[g.byweekday],g.bynweekday=null;else if(g.byweekday instanceof x)!g.byweekday.n||g.freq>y.MONTHLY?(g.byweekday=[g.byweekday.weekday],g.bynweekday=null):(g.bynweekday=[[g.byweekday.weekday,g.byweekday.n]],g.byweekday=null);else{var n=[],o=[];for(h=0;h<g.byweekday.length;h++){var p=g.byweekday[h];"number"==typeof p?n.push(p):!p.n||g.freq>y.MONTHLY?n.push(p.weekday):o.push([p.weekday,p.n])}g.byweekday=i(n)?n:null,g.bynweekday=i(o)?o:null}if(null===g.byhour?g.byhour=g.freq<y.HOURLY?[g.dtstart.getHours()]:null:"number"==typeof g.byhour&&(g.byhour=[g.byhour]),null===g.byminute?g.byminute=g.freq<y.MINUTELY?[g.dtstart.getMinutes()]:null:"number"==typeof g.byminute&&(g.byminute=[g.byminute]),null===g.bysecond?g.bysecond=g.freq<y.SECONDLY?[g.dtstart.getSeconds()]:null:"number"==typeof g.bysecond&&(g.bysecond=[g.bysecond]),g.freq>=y.HOURLY)this.timeset=null;else{for(this.timeset=[],h=0;h<g.byhour.length;h++)for(var q=g.byhour[h],r=0;r<g.byminute.length;r++)for(var s=g.byminute[r],t=0;t<g.bysecond.length;t++){var u=g.bysecond[t];this.timeset.push(new d.Time(q,s,u))}d.sort(this.timeset)}};y.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],y.YEARLY=0,y.MONTHLY=1,y.WEEKLY=2,y.DAILY=3,y.HOURLY=4,y.MINUTELY=5,y.SECONDLY=6,y.MO=new x(0),y.TU=new x(1),y.WE=new x(2),y.TH=new x(3),y.FR=new x(4),y.SA=new x(5),y.SU=new x(6),y.DEFAULT_OPTIONS={freq:null,dtstart:null,interval:1,wkst:y.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},y.parseText=function(a,b){return c().parseText(a,b)},y.fromText=function(a,b){return c().fromText(a,b)},y.optionsToString=function(a){var b,c,e,f,g,h=[];c=Object.keys(a),e=Object.keys(y.DEFAULT_OPTIONS);for(var i=0;i<c.length;i++)if(j(e,c[i])&&(b=c[i].toUpperCase(),f=a[c[i]],g=[],!(null===f||f instanceof Array&&!f.length))){switch(b){case"FREQ":f=y.FREQUENCIES[a.freq];break;case"WKST":f=f.toString();break;case"BYWEEKDAY":b="BYDAY",f instanceof Array||(f=[f]);for(var k,l=0;l<f.length;l++)k=f[l],k instanceof x||(k=k instanceof Array?new x(k[0],k[1]):new x(k)),g[l]=k.toString();f=g;break;case"DTSTART":case"UNTIL":f=d.timeToUntilString(f);break;default:if(f instanceof Array){for(var l=0;l<f.length;l++)g[l]=String(f[l]);f=g}else f=String(f)}h.push([b,f])}for(var m=[],i=0;i<h.length;i++){var n=h[i];m.push(n[0]+"="+n[1].toString())}return m.join(";")},y.prototype={all:function(a){if(a)return this._iter(new B("all",{},a));var b=this._cacheGet("all");return b===!1&&(b=this._iter(new A("all",{})),this._cacheAdd("all",b)),b},between:function(a,b,c,d){var e={before:b,after:a,inc:c};if(d)return this._iter(new B("between",e,d));var f=this._cacheGet("between",e);return f===!1&&(f=this._iter(new A("between",e)),this._cacheAdd("between",f,e)),f},before:function(a,b){var c={dt:a,inc:b},d=this._cacheGet("before",c);return d===!1&&(d=this._iter(new A("before",c)),this._cacheAdd("before",d,c)),d},after:function(a,b){var c={dt:a,inc:b},d=this._cacheGet("after",c);return d===!1&&(d=this._iter(new A("after",c)),this._cacheAdd("after",d,c)),d},count:function(){return this.all().length},toString:function(){return y.optionsToString(this.origOptions)},toText:function(a,b){return c().toText(this,a,b)},isFullyConvertibleToText:function(){return c().isFullyConvertible(this)},_cacheAdd:function(a,b,c){this._cache&&(b&&(b=b instanceof Date?d.clone(b):d.cloneDates(b)),"all"==a?this._cache.all=b:(c._value=b,this._cache[a].push(c)))},_cacheGet:function(a,b){if(!this._cache)return!1;var c=!1;if("all"==a)c=this._cache.all;else a:for(var e,f=0;f<this._cache[a].length;f++){e=this._cache[a][f];for(var g in b)if(b.hasOwnProperty(g)&&String(b[g])!=String(e[g]))continue a;c=e._value;break}if(!c&&this._cache.all){for(var h=new A(a,b),f=0;f<this._cache.all.length&&h.accept(this._cache.all[f]);f++);c=h.getValue(),this._cacheAdd(a,c,b)}return c instanceof Array?d.cloneDates(c):c instanceof Date?d.clone(c):c},clone:function(){return new y(this.origOptions)},_iter:function(a){var b=this.options.dtstart,c=b.getFullYear(),e=b.getMonth()+1,f=b.getDate(),k=b.getHours(),l=b.getMinutes(),m=b.getSeconds(),n=d.getWeekday(b),p=(d.getYearDay(b),this.options.freq),q=this.options.interval,r=this.options.wkst,s=this.options.until,t=this.options.bymonth,u=this.options.byweekno,v=this.options.byyearday,w=this.options.byweekday,x=this.options.byeaster,A=this.options.bymonthday,B=this.options.bynmonthday,C=this.options.bysetpos,D=this.options.byhour,E=this.options.byminute,F=this.options.bysecond,G=new z(this);G.rebuild(c,e);var H={};H[y.YEARLY]=G.ydayset,H[y.MONTHLY]=G.mdayset,H[y.WEEKLY]=G.wdayset,H[y.DAILY]=G.ddayset,H[y.HOURLY]=G.ddayset,H[y.MINUTELY]=G.ddayset,H[y.SECONDLY]=G.ddayset,H=H[p];var I;if(p<y.HOURLY)I=this.timeset;else{var J={};J[y.HOURLY]=G.htimeset,J[y.MINUTELY]=G.mtimeset,J[y.SECONDLY]=G.stimeset,J=J[p],I=p>=y.HOURLY&&i(D)&&!j(D,k)||p>=y.MINUTELY&&i(E)&&!j(E,l)||p>=y.SECONDLY&&i(F)&&!j(F,l)?[]:J.call(G,k,l,m)}for(var K,O,P,Q,R,S,T,U,V,W,X,Y,Z,L=0,M=this.options.count;;){for(U=H.call(G,c,e,f),W=U[0],X=U[1],Y=U[2],K=!1,P=X;P<Y;P++)O=W[P],(i(t)&&!j(t,G.mmask[O])||i(u)&&!G.wnomask[O]||i(w)&&!j(w,G.wdaymask[O])||i(G.nwdaymask)&&!G.nwdaymask[O]||null!==x&&!j(G.eastermask,O)||(i(A)||i(B))&&!j(A,G.mdaymask[O])&&!j(B,G.nmdaymask[O])||i(v)&&(O<G.yearlen&&!j(v,O+1)&&!j(v,-G.yearlen+O)||O>=G.yearlen&&!j(v,O+1-G.yearlen)&&!j(v,-G.nextyearlen+O-G.yearlen)))&&(W[O]=null,K=!0);if(i(C)&&i(I)){var $,_,aa=[];for(P=0;P<C.length;P++){var V=C[P];V<0?($=Math.floor(V/I.length),_=g(V,I.length)):($=Math.floor((V-1)/I.length),_=g(V-1,I.length));try{for(U=[],Q=X;Q<Y;Q++){var ba=W[Q];null!==ba&&U.push(ba)}O=$<0?U.slice($)[0]:U[$];var ca=I[_],da=d.fromOrdinal(G.yearordinal+O),ea=d.combine(da,ca);j(aa,ea)||aa.push(ea)}catch(a){}}for(d.sort(aa),P=0;P<aa.length;P++){var ea=aa[P];if(s&&ea>s)return this._len=L,a.getValue();if(ea>=b){if(++L,!a.accept(ea))return a.getValue();if(M&&(--M,!M))return this._len=L,a.getValue()}}}else for(P=X;P<Y;P++)if(O=W[P],null!==O){var da=d.fromOrdinal(G.yearordinal+O);for(Q=0;Q<I.length;Q++){var ca=I[Q],ea=d.combine(da,ca);if(s&&ea>s)return this._len=L,a.getValue();if(ea>=b){if(++L,!a.accept(ea))return a.getValue();if(M&&(--M,!M))return this._len=L,a.getValue()}}}if(Z=!1,p==y.YEARLY){if(c+=q,c>d.MAXYEAR)return this._len=L,a.getValue();G.rebuild(c,e)}else if(p==y.MONTHLY){if(e+=q,e>12&&(S=Math.floor(e/12),T=g(e,12),e=T,c+=S,0==e&&(e=12,--c),c>d.MAXYEAR))return this._len=L,a.getValue();G.rebuild(c,e)}else if(p==y.WEEKLY)f+=r>n?-(n+1+(6-r))+7*q:-(n-r)+7*q,n=r,Z=!0;else if(p==y.DAILY)f+=q,Z=!0;else if(p==y.HOURLY){for(K&&(k+=Math.floor((23-k)/q)*q);;)if(k+=q,R=h(k,24),S=R.div,T=R.mod,S&&(k=T,f+=S,Z=!0),!i(D)||j(D,k))break;I=J.call(G,k,l,m)}else if(p==y.MINUTELY){for(K&&(l+=Math.floor((1439-(60*k+l))/q)*q);;)if(l+=q,R=h(l,60),S=R.div,T=R.mod,S&&(l=T,k+=S,R=h(k,24),S=R.div,T=R.mod,S&&(k=T,f+=S,Z=!0,K=!1)),(!i(D)||j(D,k))&&(!i(E)||j(E,l)))break;I=J.call(G,k,l,m)}else if(p==y.SECONDLY){for(K&&(m+=Math.floor((86399-(3600*k+60*l+m))/q)*q);;)if(m+=q,R=h(m,60),S=R.div,T=R.mod,S&&(m=T,l+=S,R=h(l,60),S=R.div,T=R.mod,S&&(l=T,k+=S,R=h(k,24),S=R.div,T=R.mod,S&&(k=T,f+=S,Z=!0))),(!i(D)||j(D,k))&&(!i(E)||j(E,l))&&(!i(F)||j(F,m)))break;I=J.call(G,k,l,m)}if(Z&&f>28){var fa=d.monthRange(c,e-1)[1];if(f>fa){for(;f>fa;){if(f-=fa,++e,13==e&&(e=1,++c,c>d.MAXYEAR))return this._len=L,a.getValue();fa=d.monthRange(c,e-1)[1]}G.rebuild(c,e)}}}}},y.parseString=function(a){if(a=a.replace(/^\s+|\s+$/,""),!a.length)return null;var b,c,e,f,g,h=a.split(";"),i={};for(b=0;b<h.length;b++)switch(g=h[b].split("="),e=g[0],f=g[1],e){case"FREQ":i.freq=y[f];break;case"WKST":i.wkst=y[f];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(f.indexOf(",")!=-1)for(f=f.split(","),c=0;c<f.length;c++)/^[+-]?\d+$/.test(f[c])&&(f[c]=Number(f[c]));else/^[+-]?\d+$/.test(f)&&(f=Number(f));e=e.toLowerCase(),i[e]=f;break;case"BYDAY":var j,k,l,m=f.split(",");for(i.byweekday=[],c=0;c<m.length;c++)l=m[c],2==l.length?(k=y[l],i.byweekday.push(k)):(l=l.match(/^([+-]?\d)([A-Z]{2})$/),j=Number(l[1]),k=l[2],k=y[k].weekday,i.byweekday.push(new x(k,j)));break;case"DTSTART":i.dtstart=d.untilStringToDate(f);break;case"UNTIL":i.until=d.untilStringToDate(f);break;case"BYEASTER":i.byeaster=Number(f);break;default:throw new Error("Unknown RRULE property '"+e+"'")}return i},y.fromString=function(a){return new y(y.parseString(a))};var z=function(a){this.rrule=a,this.lastyear=null,this.lastmonth=null,this.yearlen=null,this.nextyearlen=null,this.yearordinal=null,this.yearweekday=null,this.mmask=null,this.mrange=null,this.mdaymask=null,this.nmdaymask=null,this.wdaymask=null,this.wnomask=null,this.nwdaymask=null,this.eastermask=null};z.prototype.easter=function(a,b){b=b||0;var c=a%19,d=Math.floor(a/100),e=a%100,f=Math.floor(d/4),g=d%4,h=Math.floor((d+8)/25),i=Math.floor((d-h+1)/3),j=Math.floor(19*c+d-f-i+15)%30,k=Math.floor(e/4),l=e%4,m=Math.floor(32+2*g+2*k-j-l)%7,n=Math.floor((c+11*j+22*m)/451),o=Math.floor((j+m-7*n+114)/31),p=(j+m-7*n+114)%31+1,q=Date.UTC(a,o-1,p+b),r=Date.UTC(a,0,1);return[Math.ceil((q-r)/864e5)]},z.prototype.rebuild=function(a,b){var c=this.rrule;if(a!=this.lastyear){this.yearlen=d.isLeapYear(a)?366:365,this.nextyearlen=d.isLeapYear(a+1)?366:365;var e=new Date(a,0,1);this.yearordinal=d.toOrdinal(e),this.yearweekday=d.getWeekday(e);var h=d.getWeekday(new Date(a,0,1));if(365==this.yearlen?(this.mmask=[].concat(k),this.mdaymask=[].concat(r),this.nmdaymask=[].concat(t),this.wdaymask=w.slice(h),this.mrange=[].concat(v)):(this.mmask=[].concat(l),this.mdaymask=[].concat(q),this.nmdaymask=[].concat(s),this.wdaymask=w.slice(h),this.mrange=[].concat(u)),i(c.options.byweekno)){this.wnomask=f(0,this.yearlen+7);var m,n,o;m=n=g(7-this.yearweekday+c.options.wkst,7),m>=4?(m=0,o=this.yearlen+g(this.yearweekday-c.options.wkst,7)):o=this.yearlen-m;for(var A,B,p=Math.floor(o/7),x=g(o,7),z=Math.floor(p+x/4),C=0;C<c.options.byweekno.length;C++)if(A=c.options.byweekno[C],A<0&&(A+=z+1),0<A&&A<=z){A>1?(B=m+7*(A-1),m!=n&&(B-=7-n)):B=m;for(var D=0;D<7&&(this.wnomask[B]=1,B++,this.wdaymask[B]!=c.options.wkst);D++);}if(j(c.options.byweekno,1)){var B=m+7*z;if(m!=n&&(B-=7-n),B<this.yearlen)for(var C=0;C<7&&(this.wnomask[B]=1,B+=1,this.wdaymask[B]!=c.options.wkst);C++);}if(m){var E;if(j(c.options.byweekno,-1))E=-1;else{var F=d.getWeekday(new Date(a-1,0,1)),G=g(7-F+c.options.wkst,7),H=d.isLeapYear(a-1)?366:365;G>=4?(G=0,E=Math.floor(52+g(H+g(F-c.options.wkst,7),7)/4)):E=Math.floor(52+g(this.yearlen-m,7)/4)}if(j(c.options.byweekno,E))for(var B=0;B<m;B++)this.wnomask[B]=1}}else this.wnomask=null}if(i(c.options.bynweekday)&&(b!=this.lastmonth||a!=this.lastyear)){var I=[];if(c.options.freq==y.YEARLY)if(i(c.options.bymonth))for(C=0;C<c.options.bymonth.length;C++)b=c.options.bymonth[C],I.push(this.mrange.slice(b-1,b+1));else I=[[0,this.yearlen]];else c.options.freq==y.MONTHLY&&(I=[this.mrange.slice(b-1,b+1)]);if(i(I)){this.nwdaymask=f(0,this.yearlen);for(var C=0;C<I.length;C++){var J=I[C],K=J[0],L=J[1];L-=1;for(var D=0;D<c.options.bynweekday.length;D++){var h=c.options.bynweekday[D][0],A=c.options.bynweekday[D][1];A<0?(B=L+7*(A+1),B-=g(this.wdaymask[B]-h,7)):(B=K+7*(A-1),B+=g(7-this.wdaymask[B]+h,7)),K<=B&&B<=L&&(this.nwdaymask[B]=1)}}}this.lastyear=a,this.lastmonth=b}null!==c.options.byeaster&&(this.eastermask=this.easter(a,c.options.byeaster))},z.prototype.ydayset=function(a,b,c){return[e(this.yearlen),0,this.yearlen]},z.prototype.mdayset=function(a,b,c){for(var d=f(null,this.yearlen),e=this.mrange[b-1],g=this.mrange[b],h=e;h<g;h++)d[h]=h;return[d,e,g]},z.prototype.wdayset=function(a,b,c){for(var e=f(null,this.yearlen+7),g=d.toOrdinal(new Date(a,b-1,c))-this.yearordinal,h=g,i=0;i<7&&(e[g]=g,++g,this.wdaymask[g]!=this.rrule.options.wkst);i++);return[e,h,g]},z.prototype.ddayset=function(a,b,c){var e=f(null,this.yearlen),g=d.toOrdinal(new Date(a,b-1,c))-this.yearordinal;return e[g]=g,[e,g,g+1]},z.prototype.htimeset=function(a,b,c){for(var e=[],f=this.rrule,g=0;g<f.options.byminute.length;g++){b=f.options.byminute[g];for(var h=0;h<f.options.bysecond.length;h++)c=f.options.bysecond[h],e.push(new d.Time(a,b,c))}return d.sort(e),e},z.prototype.mtimeset=function(a,b,c){for(var e=[],f=this.rrule,g=0;g<f.options.bysecond.length;g++)c=f.options.bysecond[g],e.push(new d.Time(a,b,c));return d.sort(e),e},z.prototype.stimeset=function(a,b,c){return[new d.Time(a,b,c)]};var A=function(a,b){this.init(a,b)};A.prototype={init:function(a,b){this.method=a,this.args=b,this._result=[],this.minDate=null,this.maxDate=null,"between"==a?(this.maxDate=b.inc?b.before:new Date(b.before.getTime()-1),this.minDate=b.inc?b.after:new Date(b.after.getTime()+1)):"before"==a?this.maxDate=b.inc?b.dt:new Date(b.dt.getTime()-1):"after"==a&&(this.minDate=b.inc?b.dt:new Date(b.dt.getTime()+1))},accept:function(a){var b=this.minDate&&a<this.minDate,c=this.maxDate&&a>this.maxDate;if("between"==this.method){if(b)return!0;if(c)return!1}else if("before"==this.method){if(c)return!1}else if("after"==this.method)return!!b||(this.add(a),!1);return this.add(a)},add:function(a){return this._result.push(a),!0},getValue:function(){switch(this.method){case"all":case"between":return this._result;case"before":case"after":return this._result.length?this._result[this._result.length-1]:null}}};var B=function(a,b,c){var d=["all","between"];if(!j(d,a))throw new Error('Invalid method "'+a+'". Only all and between works with iterator.');this.add=function(a){return!!c(a,this._result.length)&&(this._result.push(a),!0)},this.init(a,b)};B.prototype=A.prototype,b&&(module.exports={RRule:y}),"undefined"==typeof ender&&(a.RRule=y),"function"==typeof define&&define.amd&&define("rrule",[],function(){return y})}(this),function(a){var c,b="undefined"!=typeof module&&module.exports;if(b)c=require("./rrule").RRule;else if(a.RRule)c=a.RRule;else{if("undefined"==typeof require)throw new Error("rrule.js is required for rrule/nlp.js to work");c||(c=require("rrule"))}var d=function(a,b){return a.indexOf(b)!=-1},e=function(a,b,c){if(this.gettext=b||function(a){return a},this.language=c||j,this.text="",this.rrule=a,this.freq=a.options.freq,this.options=a.options,this.origOptions=a.origOptions,this.origOptions.bymonthday){var d=[].concat(this.options.bymonthday),e=[].concat(this.options.bynmonthday);d.sort(),e.sort(),e.reverse(),this.bymonthday=d.concat(e),this.bymonthday.length||(this.bymonthday=null)}if(this.origOptions.byweekday){var f=this.origOptions.byweekday instanceof Array?this.origOptions.byweekday:[this.origOptions.byweekday],g=String(f);this.byweekday={allWeeks:f.filter(function(a){return!Boolean(a.n)}),someWeeks:f.filter(function(a){return Boolean(a.n)}),isWeekdays:g.indexOf("MO")!=-1&&g.indexOf("TU")!=-1&&g.indexOf("WE")!=-1&&g.indexOf("TH")!=-1&&g.indexOf("FR")!=-1&&g.indexOf("SA")==-1&&g.indexOf("SU")==-1};var h=function(a,b){return a.weekday-b.weekday};this.byweekday.allWeeks.sort(h),this.byweekday.someWeeks.sort(h),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null};e.IMPLEMENTED=[];var f=["count","until","interval","byweekday","bymonthday","bymonth"];e.IMPLEMENTED[c.DAILY]=f,e.IMPLEMENTED[c.WEEKLY]=f,e.IMPLEMENTED[c.MONTHLY]=f,e.IMPLEMENTED[c.YEARLY]=["byweekno","byyearday"].concat(f),e.isFullyConvertible=function(a){var b=!0;if(!(a.options.freq in e.IMPLEMENTED))return!1;if(a.origOptions.until&&a.origOptions.count)return!1;for(var c in a.origOptions){if(d(["dtstart","wkst","freq"],c))return!0;if(!d(e.IMPLEMENTED[a.options.freq],c))return b=!1,!1}return b},e.prototype={isFullyConvertible:function(){return e.isFullyConvertible(this.rrule)},toString:function(){var a=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return a("RRule error: Unable to fully convert this rrule to text");if(this.text=[a("every")],this[c.FREQUENCIES[this.options.freq]](),this.options.until){this.add(a("until"));var b=this.options.until;this.add(this.language.monthNames[b.getMonth()]).add(b.getDate()+",").add(b.getFullYear())}else this.options.count&&this.add(a("for")).add(this.options.count).add(a(this.plural(this.options.count)?"times":"time"));return this.isFullyConvertible()||this.add(a("(~ approximate)")),this.text.join("")},DAILY:function(){var a=this.gettext;1!=this.options.interval&&this.add(this.options.interval),this.byweekday&&this.byweekday.isWeekdays?this.add(a(this.plural(this.options.interval)?"weekdays":"weekday")):this.add(a(this.plural(this.options.interval)?"days":"day")),this.origOptions.bymonth&&(this.add(a("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday()},WEEKLY:function(){var a=this.gettext;1!=this.options.interval&&this.add(this.options.interval).add(a(this.plural(this.options.interval)?"weeks":"week")),this.byweekday&&this.byweekday.isWeekdays?1==this.options.interval?this.add(a(this.plural(this.options.interval)?"weekdays":"weekday")):this.add(a("on")).add(a("weekdays")):(1==this.options.interval&&this.add(a("week")),this.origOptions.bymonth&&(this.add(a("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},MONTHLY:function(){var a=this.gettext;this.origOptions.bymonth?(1!=this.options.interval&&(this.add(this.options.interval).add(a("months")),this.plural(this.options.interval)&&this.add(a("in"))),this._bymonth()):(1!=this.options.interval&&this.add(this.options.interval),this.add(a(this.plural(this.options.interval)?"months":"month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(a("on")).add(a("weekdays")):this.byweekday&&this._byweekday()},YEARLY:function(){var a=this.gettext;this.origOptions.bymonth?(1!=this.options.interval&&(this.add(this.options.interval),this.add(a("years"))),this._bymonth()):(1!=this.options.interval&&this.add(this.options.interval),this.add(a(this.plural(this.options.interval)?"years":"year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(a("on the")).add(this.list(this.options.byyearday,this.nth,a("and"))).add(a("day")),this.options.byweekno&&this.add(a("in")).add(a(this.plural(this.options.byweekno.length)?"weeks":"week")).add(this.list(this.options.byweekno,null,a("and")))},_bymonthday:function(){var a=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(a("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,a("or"))).add(a("the")).add(this.list(this.bymonthday,this.nth,a("or"))):this.add(a("on the")).add(this.list(this.bymonthday,this.nth,a("and")))},_byweekday:function(){var a=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(a("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(a("and")),this.add(a("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,a("and"))))},_bymonth:function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},nth:function(a){var b,c,d=this.gettext;if(a==-1)return d("last");switch(c=Math.abs(a)){case 1:case 21:case 31:b=c+d("st");break;case 2:case 22:b=c+d("nd");break;case 3:case 23:b=c+d("rd");break;default:b=c+d("th")}return a<0?b+" "+d("last"):b},monthtext:function(a){return this.language.monthNames[a-1]},weekdaytext:function(a){var b="number"==typeof a?a:a.getJsWeekday();return(a.n?this.nth(a.n)+" ":"")+this.language.dayNames[b]},plural:function(a){return a%100!=1},add:function(a){return this.text.push(" "),this.text.push(a),this},list:function(a,b,c,d){var e=function(a,b,c){for(var d="",e=0;e<a.length;e++)0!=e&&(d+=e==a.length-1?" "+c+" ":b+" "),d+=a[e];return d};d=d||",",b=b||function(a){return a};var f=this,g=function(a){return b.call(f,a)};return c?e(a.map(g),d,c):a.map(g).join(d+" ")}};var g=function(a,b){return new c(h(a,b))},h=function(a,b){function f(){d.expect("every");var a;if((a=d.accept("number"))&&(e.interval=parseInt(a[0])),d.isDone())throw new Error("Unexpected end");switch(d.symbol){case"day(s)":e.freq=c.DAILY,d.nextSymbol()&&(g(),n());break;case"weekday(s)":e.freq=c.WEEKLY,e.byweekday=[c.MO,c.TU,c.WE,c.TH,c.FR],d.nextSymbol(),n();break;case"week(s)":e.freq=c.WEEKLY,d.nextSymbol()&&(g(),n());break;case"month(s)":e.freq=c.MONTHLY,d.nextSymbol()&&(g(),n());break;case"year(s)":e.freq=c.YEARLY,d.nextSymbol()&&(g(),n());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":if(e.freq=c.WEEKLY,e.byweekday=[c[d.symbol.substr(0,2).toUpperCase()]],!d.nextSymbol())return;for(;d.accept("comma");){if(d.isDone())throw new Error("Unexpected end");var b;if(!(b=k()))throw new Error("Unexpected symbol "+d.symbol+", expected weekday");e.byweekday.push(c[b]),d.nextSymbol()}m(),n();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(e.freq=c.YEARLY,e.bymonth=[h()],!d.nextSymbol())return;for(;d.accept("comma");){if(d.isDone())throw new Error("Unexpected end");var f;if(!(f=h()))throw new Error("Unexpected symbol "+d.symbol+", expected month");e.bymonth.push(f),d.nextSymbol()}g(),n();break;default:throw new Error("Unknown symbol")}}function g(){var a=d.accept("on"),b=d.accept("the");if(a||b)do{var f,g,i;if(f=l())(g=k())?(d.nextSymbol(),e.byweekday||(e.byweekday=[]),e.byweekday.push(c[g].nth(f))):(e.bymonthday||(e.bymonthday=[]),e.bymonthday.push(f),d.accept("day(s)"));else if(g=k())d.nextSymbol(),e.byweekday||(e.byweekday=[]),e.byweekday.push(c[g]);else if("weekday(s)"==d.symbol)d.nextSymbol(),e.byweekday||(e.byweekday=[]),e.byweekday.push(c.MO),e.byweekday.push(c.TU),e.byweekday.push(c.WE),e.byweekday.push(c.TH),e.byweekday.push(c.FR);else if("week(s)"==d.symbol){d.nextSymbol();var j;if(!(j=d.accept("number")))throw new Error("Unexpected symbol "+d.symbol+", expected week number");for(e.byweekno=[j[0]];d.accept("comma");){if(!(j=d.accept("number")))throw new Error("Unexpected symbol "+d.symbol+"; expected monthday");e.byweekno.push(j[0])}}else{if(!(i=h()))return;d.nextSymbol(),e.bymonth||(e.bymonth=[]),e.bymonth.push(i)}}while(d.accept("comma")||d.accept("the")||d.accept("on"))}function h(){switch(d.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function k(){switch(d.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return d.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(d.symbol){case"last":return d.nextSymbol(),-1;case"first":return d.nextSymbol(),1;case"second":return d.nextSymbol(),d.accept("last")?-2:2;case"third":return d.nextSymbol(),d.accept("last")?-3:3;case"nth":var a=parseInt(d.value[1]);if(a<-366||a>366)throw new Error("Nth out of range: "+a);return d.nextSymbol(),d.accept("last")?-a:a;default:return!1}}function m(){d.accept("on"),d.accept("the");var a;if(a=l())for(e.bymonthday=[a],d.nextSymbol();d.accept("comma");){if(!(a=l()))throw new Error("Unexpected symbol "+d.symbol+"; expected monthday");e.bymonthday.push(a),d.nextSymbol()}}function n(){if("until"==d.symbol){var a=Date.parse(d.text);if(!a)throw new Error("Cannot parse until date:"+d.text);e.until=new Date(a)}else d.accept("for")&&(e.count=d.value[0],d.expect("number"))}var d=new i((b||j).tokens);if(!d.start(a))return null;var e={};return f(),e},i=function(a){this.rules=a};i.prototype.start=function(a){return this.text=a,this.done=!1,this.nextSymbol()},i.prototype.isDone=function(){return this.done&&null==this.symbol},i.prototype.nextSymbol=function(){var b,c,a=this;this.symbol=null,this.value=null;do{if(this.done)return!1;b=null;var d,e;for(var f in this.rules)e=this.rules[f],(d=e.exec(a.text))&&(null==b||d[0].length>b[0].length)&&(b=d,c=f);if(null!=b&&(this.text=this.text.substr(b[0].length),""==this.text&&(this.done=!0)),null==b)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"==c);return this.symbol=c,this.value=b,!0},i.prototype.accept=function(a){if(this.symbol==a){if(this.value){var b=this.value;return this.nextSymbol(),b}return this.nextSymbol(),!0}return!1},i.prototype.expect=function(a){if(this.accept(a))return!0;throw new Error("expected "+a+" but found "+this.symbol)};var j={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},k={fromText:g,parseText:h,isFullyConvertible:e.isFullyConvertible,toText:function(a,b,c){return new e(a,b,c).toString()}};b?module.exports=k:a._RRuleNLP=k,"function"==typeof define&&define.amd&&define("rrule",[],function(){return c})}(this),Scheduler=function(a,b,c){this.test_mode=c===!0,this.start_date=a;var e=this;b=b.replace(/(UNTIL=)([^\;]{8})/,function(a,b,c){return y=c.substring(0,4),m=c.substring(4,6),d=c.substring(6,8),until=new Date(y,parseInt(m)-1,d,23,59,59),v=e.timeToUntilString(until),b+v}),this.exception_dates=[],this.repeat_dates=[],this.rule=null,b&&(this.rule=RRule.fromString("DTSTART="+this.timeToUntilString(a)+";"+b),this.rule.dtstart=a)},Scheduler.prototype.timeToUntilString=function(a){for(var c,b=new Date(a),d=[b.getUTCFullYear(),b.getUTCMonth()+1,b.getUTCDate(),"T",b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),"Z"],e=0;e<d.length;e++)c=d[e],!/[TZ]/.test(c)&&c<10&&(d[e]="0"+String(c));return d.join("")},Scheduler.prototype.all_occurrences=function(a,b){if(null==this.rule)return[this.start_date];var c=[];if(c=this.rule.between(new Date(a),new Date(b)),this.repeat_dates.length>0){for(var d=0;d<this.repeat_dates.length;d++){var e=new Date(this.repeat_dates[d]);rhc_in_array(h,c)||c.push(e)}c.sort()}for(var f=c.length,g=[],d=0;d<f;d++){var e=c[d],h=e.getTime();rhc_in_array(h,this.exception_dates)||g.push(this.test_mode?h:e)}return g},Scheduler.prototype.occurrences_between=function(a,b){var c=a.getTime(),d=b.getTime();return this.all_occurrences(c,d)},Scheduler.prototype.limited_occurrences=function(a,b,c){var d=begin_date.getTime(),e=end_date.getTime();return this.all_occurrences(d,e).slice(0,c)},Scheduler.prototype.add_exception_dates=function(a){for(var b=a.length,c=0;c<b;c++)this.exception_dates.push(a[c].getTime());this.exception_dates.sort()},Scheduler.prototype.add_rdates=function(a){for(var b=a.length,c=0;c<b;c++)this.repeat_dates.push(a[c].getTime());this.repeat_dates.sort()},function(b,c){function i(a){b.extend(!0,d,a)}function j(a,d,e){function h(a,c,d){b(l).find(".fc-filters-dialog").length>0&&(d||b(l).find(".fc-filters-dialog").is(":visible")?b(l).find(".fc-filters-dialog").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){b(this).hide()}):(jQuery(".fct-tooltip").trigger("close-tooltip"),b(l).find(".fc-filters-dialog").stop().show().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:1,top:0},"fast","linear",function(){b(this).find(".fbd-unchecked").css("overflow-y","auto")})))}function E(a){p?K()&&(T(),Q(a)):H()}function H(){q=d.theme?"ui":"fc",a.addClass("fc"),d.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),d.theme&&a.addClass("ui-widget"),p=b("<div class='fc-content' style='position:relative'/>").prependTo(a),m=new k(f,d),o=m.render(),o&&a.prepend(o),M(d.defaultView),d.handleWindowResize&&b(window).resize(V),L()||I()}function I(){setTimeout(function(){!r.start&&L()&&P()},0)}function J(){r&&(ta("viewDestroy",r,r,r.element),r.triggerEventDestroy()),b(window).unbind("resize",V),m.destroy(),p.remove(),a.removeClass("fc fc-rtl ui-widget")}function K(){return a.is(":visible")}function L(){return b("body").is(":visible")}function M(a){r&&a==r.name||O(a)}function O(a){firstTime=0==p.find(".fc-view").length,noTransition=!!(firstTime||f.options.transition.notransition&&1==parseInt(f.options.transition.notransition));var c=r;if(jQuery(".fct-tooltip").trigger("close-tooltip"),z++,r&&(ta("viewDestroy",r,r,r.element),ga(),r.triggerEventDestroy(),pa(),noTransition&&r.element.remove(),m.deactivateButton(r.name)),m.activateButton(a),r=new g[a](b("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(p),f),c&&c.viewLeave&&c.viewLeave(c,r,f),r.transitionStarted&&r.transitionStarted(c),!noTransition){p.css("overflow","hidden");var e=p.width(),h=p.height(),i={rtl:{newView:{left:e,top:0},oldView:{left:e*-1,top:0}},ltr:{newView:{left:e*-1,top:0},oldView:{left:e,top:0}},ttb:{newView:{left:0,top:h*-1},oldView:{left:0,top:h}},btt:{newView:{left:0,top:h},oldView:{left:0,top:h*-1}}},j=f.options.transition.direction?f.options.transition.direction:"horizontal";if(c){if(0==b(".fc-button-"+a).length)var k="horizontal"==j?i.rtl:i.ttb;else if(b(".fc-button-"+c.name).length>0&&b(".fc-button-"+a).length>0&&b(".fc-button-"+c.name).position().left<b(".fc-button-"+a).position().left)var k="horizontal"==j?i.rtl:i.ttb;else var k="horizontal"==j?i.ltr:i.btt;r.lastView=c.name}else{var k="horizontal"==j?i.rtl:i.ttb;r.lastView=!1}return c&&c.element.css("z-index",0).css("position","absolute"),r.element.appendTo(p).css("left",k.newView.left).css("top",k.newView.top).css("opacity",0).css("z-index",1).show(),c.element.animate({
opacity:0,left:k.oldView.left,top:k.oldView.top},f.options.transition.duration||"slow",f.options.transition.easing||"linear",function(){c.element.hide().css("position","relative").css("opacity",1).css("left",0)}),P(),pa(),void r.element.animate({opacity:1,left:0,top:0},f.options.transition.duration||"slow",f.options.transition.easing||"linear",function(){c.element.hide().css("position","relative"),r.transitionEnded&&r.transitionEnded(c),qa(),z--,p.find(".fc-view:hidden").remove()})}r.transitionEnded&&r.transitionEnded(c),P(),qa(),z--}function P(a){(!r.start||a||A<r.start||A>=r.end)&&K()&&Q(a)}function Q(a){if(z++,r.start&&(ta("viewDestroy",r,r,r.element),ga(),$()),pa(),r.render(A,a||0),f.options.skipMonths&&-1!=b.inArray(A.getMonth(),f.options.skipMonths)){increase=a||1;for(var c=0;c++<366;){if(-1==b.inArray(A.getMonth(),f.options.skipMonths)){r.render(A,0);break}A.setDate(A.getDate()+increase)}}U(),qa(),(r.afterRender||W)(),da(),ea(),ta("viewRender",r,r,r.element),r.trigger("viewDisplay",l),z--,_()}function R(){if(K()){if(ga(),$(),T(),U(),"rhc_event"==r.name)return;Z()}}function T(){w=d.contentHeight?d.contentHeight:d.height?d.height-(o?o.height():0)-S(p):Math.round(p.width()/Math.max(d.aspectRatio,.5))}function U(){w===c&&T(),z++,r.setHeight(w),r.setWidth(p.width()),z--,v=a.outerWidth()}function V(){if(!z)if(r.start){var b=++x;setTimeout(function(){b==x&&!z&&K()&&v!=(v=a.outerWidth())&&(z++,R(),r.trigger("windowResize",l),z--)},200)}else I()}function X(){$(),aa()}function Y(a){$(),Z(a)}function Z(a){K()&&(r.setEventData(C),r.renderEvents(C,a),r.trigger("eventAfterAllRender"))}function $(){r.triggerEventDestroy(),r.clearEvents(),r.clearEventData()}function _(){!d.lazyFetching||i(r.visStart,r.visEnd)?aa():Z()}function aa(){j(r.visStart,r.visEnd)}function ba(a){C=a,Z()}function ca(a){Y(a)}function da(){m.updateTitle(r.title)}function ea(){var a=new Date;a>=r.start&&a<r.end?m.disableButton("today"):m.enableButton("today")}function fa(a,b,d){r.select(a,b,d===c||d)}function ga(){r&&r.unselect()}function ha(){P(-1)}function ia(){P(1)}function ja(){s(A,-1),P()}function ka(){s(A,1),P()}function la(){A=new Date,P()}function ma(a,b,c){a instanceof Date?A=y(a):B(A,a,b,c),P()}function na(a,b,d){a!==c&&s(A,a),b!==c&&t(A,b),d!==c&&u(A,d),P()}function oa(){return y(A)}function pa(){p.css({width:"100%",height:p.height(),overflow:"hidden"})}function qa(){p.css({width:"",height:"",overflow:""})}function ra(){return r}function sa(a,b){return b===c?d[a]:void("height"!=a&&"contentHeight"!=a&&"aspectRatio"!=a||(d[a]=b,R()))}function ta(a,b){if(d[a])return d[a].apply(b||l,Array.prototype.slice.call(arguments,2))}var f=this;f.options=d,f.render=E,f.destroy=J,f.refetchEvents=X,f.reportEvents=ba,f.reportEventChange=ca,f.rerenderEvents=Y,f.changeView=M,f.select=fa,f.unselect=ga,f.prev=ha,f.next=ia,f.prevYear=ja,f.nextYear=ka,f.today=la,f.gotoDate=ma,f.incrementDate=na,f.formatDate=function(a,b){return F(a,b,d)},f.formatDates=function(a,b,c){return G(a,b,c,d)},f.getDate=oa,f.getView=ra,f.option=sa,f.trigger=ta,f.rhc_search=h,n.call(f,d,e);var m,o,p,q,r,v,w,D,i=f.isFetchNeeded,j=f.fetchEvents,l=a[0],x=0,z=0,A=new Date,C=[];f.date=A,B(A,d.year,d.month,d.date),d.droppable&&b(document).bind("dragstart",function(a,c){var e=a.target,f=b(e);if(!f.parents(".fc").length){var g=d.dropAccept;(b.isFunction(g)?g.call(e,f):f.is(g))&&(D=e,r.dragStart(D,a,c))}}).bind("dragstop",function(a,b){D&&(r.dragStop(D,a,b),D=null)})}function k(a,c){function h(){f=c.theme?"ui":"fc";var a=c.header;if(a)return e=b("<div class='fc-header'/>").append(b("<div class='fc-header-row' />").append(j("center")).append(j("left")).append(j("right")))}function i(){e.remove()}function j(d){var e=b("<div class='fc-header-cell fc-header-"+d+"'/>"),h=c.header[d];return h&&b.each(h.split(" "),function(d){d>0&&e.append("<span class='fc-header-space'/>");var h;b.each(this.split(","),function(d,i){if("title"==i)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),h&&h.addClass(f+"-corner-right"),h=null;else{var j;if(a[i]?j=a[i]:g[i]?j=function(){m.removeClass(f+"-state-hover"),a.changeView(i)}:c[i]&&(j=function(){j=c[i]}),j){var k=c.theme?$(c.buttonIcons,i):null,l=$(c.buttonText,i),m=b("<span class='fc-button fc-button-"+i+" "+f+"-state-default'>"+(k?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+k+"'/></span>":l)+"</span>").click(function(){m.hasClass(f+"-state-disabled")||j(a,e)}).mousedown(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){m.removeClass(f+"-state-down")}).hover(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){m.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(e);aa(m),h||m.addClass(f+"-corner-left"),h=m}}}),h&&h.addClass(f+"-corner-right")}),e}function k(a){e.find("h2").html(a)}function l(a){e.find("span.fc-button-"+a).addClass(f+"-state-active")}function m(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")}function n(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")}function o(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")}var d=this;d.render=h,d.destroy=i,d.updateTitle=k,d.activateButton=l,d.deactivateButton=m,d.disableButton=n,d.enableButton=o;var f,e=b([])}function n(a,d){function u(a,b){return!n||a<n||b>o}function v(a,b){n=a,o=b,s=[];var c=++p,d=k.length;q=d;for(var e=0;e<d;e++)w(k[e],c)}function w(c,d){x(c,function(e){if(d==p){if(e){a.eventDataTransform&&(e=b.map(e,a.eventDataTransform)),c.eventDataTransform&&(e=b.map(e,c.eventDataTransform));for(var f=0;f<e.length;f++)e[f].source=c,K(e[f]);s=s.concat(e)}q--,q||i(s)}})}function x(c,d){var e,h,g=f.sourceFetchers;for(e=0;e<g.length;e++){if(h=g[e](c,n,o,d),h===!0)return;if("object"==typeof h)return void x(h,d)}var i=c.events;if(i)b.isFunction(i)?(I(),i(y(n),y(o),function(a){d(a),J()})):b.isArray(i)?d(i):d();else{var j=c.url;if(j){var q,k=c.success,m=c.error,p=c.complete;q=b.isFunction(c.data)?c.data():c.data;var r=b.extend({},q||{}),s=fa(c.startParam,a.startParam),t=fa(c.endParam,a.endParam);s&&(r[s]=Math.round(+n/1e3)),t&&(r[t]=Math.round(+o/1e3)),I(),b.ajax(b.extend({},l,c,{data:r,success:function(a){a=a||[];var c=ea(k,this,arguments);b.isArray(c)&&(a=c),d(a)},error:function(){ea(m,this,arguments),d()},complete:function(){ea(p,this,arguments),J()}}))}else d()}}function z(a){a=A(a),a&&(q++,w(a,p))}function A(a){if(b.isFunction(a)||b.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a}),"object"==typeof a)return L(a),k.push(a),a}function B(a){k=b.grep(k,function(b){return!M(b,a)}),s=b.grep(s,function(b){return!M(b.source,a)}),i(s)}function D(){k=[],s=[],i(s)}function E(a){var b,d,c=s.length,e=h().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=s[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),a.end?d.end?d.end=new Date(+d.end+g):d.end=new Date(+e(d)+g):d.end=null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroundColor=a.backgroundColor,d.borderColor=a.borderColor,d.textColor=a.textColor,K(d));K(a),i(s)}function F(a,b){K(a),a.source||(b&&(j.events.push(a),a.source=j),s.push(a)),i(s)}function G(a){if(a){if(!b.isFunction(a)){var d=a+"";a=function(a){return a._id==d}}s=b.grep(s,a,!0);for(var c=0;c<k.length;c++)b.isArray(k[c].events)&&(k[c].events=b.grep(k[c].events,a,!0))}else{s=[];for(var c=0;c<k.length;c++)b.isArray(k[c].events)&&(k[c].events=[])}i(s)}function H(a){return b.isFunction(a)?b.grep(s,a):a?(a+="",b.grep(s,function(b){return b._id==a})):s}function I(){r++||g("loading",null,!0,h())}function J(){--r||g("loading",null,!1,h())}function K(b){var d=b.source||{},e=fa(d.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===c?"_fc"+m++:b.id+""),b.date&&(b.start||(b.start=b.date),delete b.date),b._start=y(b.start=C(b.start,e)),b.end=C(b.end,e),b.end&&b.end<=b.start&&(b.end=null),b._end=b.end?y(b.end):null,b.allDay===c&&(b.allDay=fa(d.allDayDefault,a.allDayDefault)),b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function L(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=f.sourceNormalizers,c=0;c<b.length;c++)b[c](a)}function M(a,b){return a&&b&&N(a)==N(b)}function N(a){return("object"==typeof a?a.events||a.url:"")||a}var e=this;e.isFetchNeeded=u,e.fetchEvents=v,e.addEventSource=z,e.removeEventSource=B,e.updateEvent=E,e.renderEvent=F,e.removeEvents=G,e.clientEvents=H,e.normalizeEvent=K,e.removeEventSources=D;for(var n,o,g=e.trigger,h=e.getView,i=e.reportEvents,j={events:[]},k=[j],p=0,q=0,r=0,s=[],t=0;t<d.length;t++)A(d[t])}function s(a,b,c){return a.setFullYear(a.getFullYear()+b),c||x(a),a}function t(a,b,c){if(+a){var d=a.getMonth()+b,e=y(a);for(e.setDate(1),e.setMonth(d),a.setMonth(d),c||x(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function u(a,b,c){if(+a){var d=a.getDate()+b,e=y(a);e.setHours(9),e.setDate(d),a.setDate(d),c||x(a),v(a,e)}return a}function v(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*q)}function w(a,b){return a.setMinutes(a.getMinutes()+b),a}function x(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function y(a,b){return b?x(new Date(+a)):new Date(+a)}function z(){var b,a=0;do b=new Date(1970,a++,1);while(b.getHours());return b}function A(a,b){return Math.round((y(a,!0)-y(b,!0))/p)}function B(a,b,d,e){b!==c&&b!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(b)),d!==c&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d)),e!==c&&a.setDate(e)}function C(a,b){return"object"==typeof a?a:"number"==typeof a?new Date(1e3*a):"string"==typeof a?a.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(a)):(b===c&&(b=!0),D(a,b)||(a?new Date(a):null)):null}function D(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1)),c[5]&&(d.setDate(c[5]),e.setDate(c[5])),v(d,e),c[7]&&d.setHours(c[7]),c[8]&&d.setMinutes(c[8]),c[10]&&d.setSeconds(c[10]),c[12]&&d.setMilliseconds(1e3*Number("0."+c[12])),v(d,e)}else if(d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?1e3*Number("0."+c[12]):0),c[14]){var f=60*Number(c[16])+(c[18]?Number(c[18]):0);f*="-"==c[15]?1:-1,d=new Date(+d+60*f*1e3)}return d}function E(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();var b=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(b){var c=parseInt(b[1],10);return b[3]&&(c%=12,"p"==b[3].toLowerCase().charAt(0)&&(c+=12)),60*c+(b[2]?parseInt(b[2],10):0)}}function F(a,b,c){return G(a,null,b,c)}function G(a,b,c,e){e=e||d;var h,j,k,l,f=a,g=b,i=c.length,m="";for(h=0;h<i;h++)if(j=c.charAt(h),"'"==j){for(k=h+1;k<i;k++)if("'"==c.charAt(k)){f&&(m+=k==h+1?"'":c.substring(h+1,k),h=k);break}}else if("("==j){for(k=h+1;k<i;k++)if(")"==c.charAt(k)){var n=F(f,c.substring(h+1,k),e);parseInt(n.replace(/\D/,""),10)&&(m+=n),h=k;break}}else if("["==j){for(k=h+1;k<i;k++)if("]"==c.charAt(k)){var o=c.substring(h+1,k),n=F(f,o,e);n!=F(g,o,e)&&(m+=n),h=k;break}}else if("{"==j)f=b,g=a;else if("}"==j)f=a,g=b;else{for(k=i;k>h;k--)if(l=H[c.substring(h,k)]){f&&(m+=l(f,e)),h=k-1;break}k==h&&f&&(m+=j)}return m}function I(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1}function J(a){return a.end?K(a.end,a.allDay):u(y(a.start),1)}function K(a,b){return a=y(a),b||a.getHours()||a.getMinutes()?u(a,1):x(a)}function L(a,d,e){a.unbind("mouseover").mouseover(function(a){for(var g,h,i,f=a.target;f!=this;)g=f,f=f.parentNode;(h=g._fci)!==c&&(g._fci=c,i=d[h],e(i.event,i.element,i),b(a.target).trigger(a)),a.stopPropagation()})}function M(a,c,d){for(var f,e=0;e<a.length;e++)f=b(a[e]),f.width(Math.max(0,c-O(f,d)))}function N(a,c,d){for(var f,e=0;e<a.length;e++)f=b(a[e]),f.height(Math.max(0,c-S(f,d)))}function O(a,b){return P(a)+R(a)+(b?Q(a):0)}function P(a){return(parseFloat(b.css(a[0],"paddingLeft",!0))||0)+(parseFloat(b.css(a[0],"paddingRight",!0))||0)}function Q(a){return(parseFloat(b.css(a[0],"marginLeft",!0))||0)+(parseFloat(b.css(a[0],"marginRight",!0))||0)}function R(a){return(parseFloat(b.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(b.css(a[0],"borderRightWidth",!0))||0)}function S(a,b){return T(a)+V(a)+(b?U(a):0)}function T(a){return(parseFloat(b.css(a[0],"paddingTop",!0))||0)+(parseFloat(b.css(a[0],"paddingBottom",!0))||0)}function U(a){return(parseFloat(b.css(a[0],"marginTop",!0))||0)+(parseFloat(b.css(a[0],"marginBottom",!0))||0)}function V(a){return(parseFloat(b.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(b.css(a[0],"borderBottomWidth",!0))||0)}function W(){}function X(a,b){return a-b}function Y(a){return Math.max.apply(Math,a)}function Z(a){return(a<10?"0":"")+a}function $(a,b){if(a[b]!==c)return a[b];for(var f,d=b.split(/(?=[A-Z])/),e=d.length-1;e>=0;e--)if(f=a[d[e].toLowerCase()],f!==c)return f;return a[""]}function _(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aa(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function ba(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function da(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,i=a.textColor||c.textColor||b("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+h),i&&j.push("color:"+i),j.join(";")}function ea(a,c,d){if(b.isFunction(a)&&(a=[a]),a){var e,f;for(e=0;e<a.length;e++)f=a[e].apply(c,d)||f;return f}}function fa(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==c)return arguments[a]}function ga(a,b){function i(a,i){var j=d("left_trim_date")?Math.abs(parseInt(d("left_trim_date"))):0,k=d("right_trim_date")?Math.abs(parseInt(d("right_trim_date"))):0;j=j>28?28:j,k=k>28?28:k,j&&k&&j>k&&(_tmp=j,j=k,k=_tmp);var l=!1;d("upcoming")&&d("upcoming_trim_past")&&(l=parseInt(d("upcoming_trim_past")),l=0!=l);var m=new Date;i&&(t(a,i),a.setDate(1));var n=d("firstDay"),o=y(a,!0);if(o.setDate(1),end=t(y(o),1),l&&end.getTime()<m.getTime())return void b.next();l=l&&o.getTime()<m.getTime(),l&&(o=new Date,a=y(o,!0),end=t(y(o),1),end.setDate(0),end.setHours(23,59,59)),j&&o.setDate(j),k&&(end=y(o),end.setDate(k),end.setHours(23,59,59));var p=y(o);u(p,-((p.getDay()-n+7)%7)),f(p);var q=y(end);u(q,(7-q.getDay()+n)%7),f(q,-1,!0);var r=g(),s=Math.ceil(A(q,p)/7);if("fixed"==d("weekMode")&&(_weeks_to_add=6-s,_weeks_to_add>0&&u(q,7*_weeks_to_add),s=6,l))var s=Math.ceil(A(q,p)/7);c.title=h(o,d("titleFormat")),c.start=o,c.end=end,c.visStart=p,c.visEnd=q,e(s,r,!0)}var c=this;c.render=i,ja.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=c.skipHiddenDays,g=c.getCellsPerWeek,h=b.formatDate}function ha(a,b){function i(a,b){b&&u(a,7*b);var i=u(y(a),-((a.getDay()-d("firstDay")+7)%7)),j=u(y(i),7),k=y(i);f(k);var l=y(j);f(l,-1,!0);var m=g();c.start=i,c.end=j,c.visStart=k,c.visEnd=l,c.title=h(k,u(y(l),-1),d("titleFormat")),e(1,m,!0)}var c=this;c.render=i,ja.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=c.skipHiddenDays,g=c.getCellsPerWeek,h=b.formatDates}function ia(a,b){function h(a,b){b&&u(a,b),f(a,b<0?-1:1);var h=y(a,!0),i=u(y(h),1);c.title=g(a,d("titleFormat")),c.start=c.visStart=h,c.end=c.visEnd=i,e(1,1,!1)}var c=this;c.render=h,ja.call(c,a,b,"basicDay");var d=c.opt,e=c.renderBasic,f=c.skipHiddenDays,g=b.formatDate}function ja(a,c,d){function V(a,b,c){H=a,I=b,J=c,W(),s||X(),Y()}function W(){P=f("theme")?"ui":"fc",Q=f("columnFormat"),R=f("weekNumbers"),T=f("weekNumberTitle"),U="iso"!=f("weekNumberCalculation")?"w":"W"}function X(){B=b("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}function Y(){var c=Z();p&&p.remove(),p=b(c).appendTo(a),q=p.find("thead"),r=q.find(".fc-day-header"),s=p.find("tbody"),t=s.find("tr"),v=s.find(".fc-day"),w=t.find("td:first-child"),z=t.eq(0).find(".fc-day > div"),A=t.eq(0).find(".fc-day-content > div"),ba(q.add(q.find("tr"))),ba(t),t.eq(0).addClass("fc-first"),t.filter(":last").addClass("fc-last"),v.each(function(a,c){var d=k(Math.floor(a/I),a%I);g("dayRender",e,d,b(c))}),ga(v)}function Z(){var a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+$()+ca()+"</table>";return a}function $(){var c,d,a=P+"-widget-header",b="";for(b+="<thead><tr>",R&&(b+="<th class='fc-week-number "+a+"'>"+_(T)+"</th>"),c=0;c<I;c++)d=k(0,c),b+="<th class='fc-day-header fc-"+o[d.getDay()]+" "+a+"'>"+_(n(d,Q))+"</th>";return b+="</tr></thead>"}function ca(){var c,d,e,a=P+"-widget-content",b="";for(b+="<tbody>",c=0;c<H;c++){for(b+="<tr class='fc-week'>",R&&(e=k(c,0),b+="<td class='fc-week-number "+a+"'><div>"+_(n(e,U))+"</div></td>"),d=0;d<I;d++)e=k(c,d),b+=da(e);b+="</tr>"}return b+="</tbody>"}function da(a){var b=P+"-widget-content",c=e.start.getMonth(),f=x(new Date),g="",h=["fc-day","fc-"+o[a.getDay()],b];if(a.getMonth()!=c&&h.push("fc-other-month"),+a==+f?h.push("fc-today",P+"-state-highlight"):a<f?h.push("fc-past"):h.push("fc-future"),g+="<td class='"+h.join(" ")+"' data-date='"+n(a,"yyyy-MM-dd")+"'><div>",J){switch(d){case"basicWeek":value=_(n(a,Q));break;default:value=a.getDate()}g+="<div class='fc-day-number'>"+value+"</div>"}return g+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function ea(a){if(!b(e.element).closest(".rhc_holder").is(".fc-small")){E=a;var d,g,h,c=E-q.height();"variable"==f("weekMode")?d=g=Math.floor(c/(1==H?2:6)):(d=Math.floor(c/H),g=c-d*(H-1)),w.each(function(a,c){a<H&&(h=b(c),h.find("> div").css("min-height",(a==H-1?g:d)-S(h)))})}}function fa(a){C=a,N.clear(),O.clear(),G=0,R&&(G=q.find("th.fc-week-number").outerWidth()),F=Math.floor((C-G)/I),M(r.slice(0,-1),F)}function ga(a){a.click(ha).mousedown(j)}function ha(a){if(!f("selectable")){var c=D(b(this).data("date"));g("dayClick",this,c,!0,a)}}function ia(a,b,c){c&&K.build();for(var d=m(a,b,null),e=0;e<d.length;e++){var f=d[e];ga(ja(f.row,f.leftCol,f.row,f.rightCol))}}function ja(b,c,d,e){var f=K.rect(b,c,d,e,a);return h(f,a)}function la(a,b){return y(a)}function ma(a,b,c){ia(a,u(y(b),1),!0)}function na(){i()}function oa(a,b,c){var d=l(a),e=v[d.row*I+d.col];g("dayClick",e,a,b,c)}function pa(a,b,c){L.start(function(a){i(),a&&ja(a.row,a.col,a.row,a.col)},b)}function qa(a,b,c){var d=L.stop();if(i(),d){var e=k(d);g("drop",a,e,!0,b,c)}}function ra(a){return y(a.start)}function sa(a){return N.left(a)}function ta(a){return N.right(a)}function ua(a){return O.left(a)}function va(a){return O.right(a)}function wa(a){return t.eq(a)}var e=this;e.renderBasic=V,e.setHeight=ea,e.setWidth=fa,e.renderDayOverlay=ia,e.defaultSelectionEnd=la,e.renderSelection=ma,e.clearSelection=na,e.reportDayClick=oa,e.dragStart=pa,e.dragStop=qa,e.defaultEventEnd=ra,e.getHoverListener=function(){return L},e.colLeft=sa,e.colRight=ta,e.colContentLeft=ua,e.colContentRight=va,e.getIsCellAllDay=function(){return!0},e.allDayRow=wa,e.getRowCnt=function(){return H},e.getColCnt=function(){return I},e.getColWidth=function(){return F},e.getDaySegmentContainer=function(){return B},za.call(e,a,c,d),Fa.call(e),Ea.call(e),ka.call(e);var p,q,r,s,t,v,w,z,A,B,C,E,F,G,H,I,J,K,L,N,O,P,Q,R,T,U,f=e.opt,g=e.trigger,h=e.renderOverlay,i=e.clearOverlays,j=e.daySelectionMousedown,k=e.cellToDate,l=e.dateToCell,m=e.rangeToSegments,n=c.formatDate;aa(a.addClass("fc-grid")),K=new Ga(function(a,c){var d,e,f;r.each(function(a,g){d=b(g),e=d.offset().left,a&&(f[1]=e),f=[e],c[a]=f}),f[1]=e+d.outerWidth(),t.each(function(c,g){c<H&&(d=b(g),e=d.offset().top,c&&(f[1]=e),f=[e],a[c]=f)}),f[1]=e+d.outerHeight()}),L=new Ha(K),N=new Ja(function(a){return z.eq(a)}),O=new Ja(function(a){return A.eq(a)})}function ka(){function b(b,c){a.renderDayEvents(b,c)}function c(){a.getDaySegmentContainer().empty()}var a=this;a.renderEvents=b,a.clearEvents=c,Aa.call(a)}function la(a,b){function i(a,b){b&&u(a,7*b);var i=u(y(a),-((a.getDay()-d("firstDay")+7)%7)),j=u(y(i),7),k=y(i);f(k);var l=y(j);f(l,-1,!0);var m=g();c.title=h(k,u(y(l),-1),d("titleFormat")),c.start=i,c.end=j,c.visStart=k,c.visEnd=l,e(m)}var c=this;c.render=i,na.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=c.skipHiddenDays,g=c.getCellsPerWeek,h=b.formatDates}function ma(a,b){function h(a,b){b&&u(a,b),f(a,b<0?-1:1);var h=y(a,!0),i=u(y(h),1);c.title=g(a,d("titleFormat")),c.start=c.visStart=h,c.end=c.visEnd=i,e(1)}var c=this;c.render=h,na.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=c.skipHiddenDays,g=b.formatDate}function na(a,d,e){function va(a){fa=a,wa(),t?ya():xa()}function wa(){ma=g("theme")?"ui":"fc",na=g("isRTL"),pa=E(g("minTime")),qa=E(g("maxTime")),ra=g("columnFormat"),sa=g("weekNumbers"),ta=g("weekNumberTitle"),ua="iso"!=g("weekNumberCalculation")?"w":"W",ca=g("snapMinutes")||g("slotMinutes")}function xa(){var e,f,h,i,j,c=ma+"-widget-header",d=ma+"-widget-content",k=g("slotMinutes")%15==0;for(ya(),I=b("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a),g("allDaySlot")?(J=b("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(I),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+c+" fc-agenda-axis'>"+g("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+c+" fc-agenda-gutter'>&nbsp;</th></tr></table>",K=b(e).appendTo(I),L=K.find("tr"),Ma(L.find("td")),I.append("<div class='fc-agenda-divider "+c+"'><div class='fc-agenda-divider-inner'/></div>")):J=b([]),O=b("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(I),P=b("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(O),Q=b("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(P),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",f=z(),i=w(y(f),qa),w(f,pa),ga=0,h=0;f<i;h++)j=f.getMinutes(),e+="<tr class='fc-slot"+h+" "+(j?"fc-minor":"")+"'><th class='fc-agenda-axis "+c+"'>"+(k&&j?"&nbsp;":s(f,g("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",w(f,g("slotMinutes")),ga++;e+="</tbody></table>",R=b(e).appendTo(P),Na(R.find("td"))}function ya(){var c=Aa();t&&t.remove(),t=b(c).appendTo(a),v=t.find("thead"),A=v.find("th").slice(1,-1),B=t.find("tbody"),C=B.find("td").slice(0,-1),D=C.find("> div"),F=C.find(".fc-day-content > div"),G=C.eq(0),H=D.eq(0),ba(v.add(v.find("tr"))),ba(B.add(B.find("tr")))}function Aa(){var a="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+Ba()+Ca()+"</table>";return a}function Ba(){var b,d,e,a=ma+"-widget-header",c="";for(c+="<thead><tr>",sa?(b=p(0,0),d=s(b,ua),na?d+=ta:d=ta+d,c+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+_(d)+"</th>"):c+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",e=0;e<fa;e++)b=p(0,e),c+="<th class='fc-"+o[b.getDay()]+" fc-col"+e+" "+a+"'>"+_(s(b,ra))+"</th>";return c+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>"}function Ca(){var c,e,f,g,h,a=ma+"-widget-header",b=ma+"-widget-content",d=x(new Date),i="";for(i+="<tbody><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",f="",e=0;e<fa;e++)c=p(0,e),h=["fc-col"+e,"fc-"+o[c.getDay()],b],+c==+d?h.push(ma+"-state-highlight","fc-today"):c<d?h.push("fc-past"):h.push("fc-future"),g="<td class='"+h.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",f+=g;return i+=f,i+="<td class='fc-agenda-gutter "+b+"'>&nbsp;</td></tr></tbody>"}function Da(a){a===c&&(a=V),V=a,la={};var b=B.position().top,d=O.position().top,e=Math.min(a-b,R.height()+d+1);H.height(e-S(G)),I.css("top",b),O.height(e-d-1),$=R.find("tr:first").height()+1,da=g("slotMinutes")/ca,ea=$/da}function Ia(a){U=a,ja.clear(),ka.clear();var c=v.find("th:first");K&&(c=c.add(K.find("th:first"))),c=c.add(R.find("th:first")),W=0,M(c.width("").each(function(a,c){W=Math.max(W,b(c).outerWidth())}),W);var d=t.find(".fc-agenda-gutter");K&&(d=d.add(K.find("th.fc-agenda-gutter")));var e=O[0].clientWidth;Z=O.width()-e,Z?(M(d,Z),d.show().prev().removeClass("fc-last")):d.hide().prev().addClass("fc-last"),Y=Math.floor((e-W)/fa),M(A.slice(0,-1),Y)}function Ka(){function d(){O.scrollTop(c)}var a=z(),b=y(a);b.setHours(g("firstHour"));var c=Ya(a,b)+1;d(),setTimeout(d,0)}function La(){Ka()}function Ma(a){a.click(Oa).mousedown(m)}function Na(a){a.click(Oa).mousedown(db)}function Oa(a){if(!g("selectable")){var b=Math.min(fa-1,Math.floor((a.pageX-t.offset().left-W)/Y)),c=p(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);if(d){var e=parseInt(d[1])*g("slotMinutes"),f=Math.floor(e/60);c.setHours(f),c.setMinutes(e%60+pa),h("dayClick",C[b],c,!1,a)}else h("dayClick",C[b],c,!0,a)}}function Pa(a,b,c){c&&ha.build();for(var d=r(a,b,null),e=0;e<d.length;e++){var f=d[e];Ma(Qa(f.row,f.leftCol,f.row,f.rightCol))}}function Qa(a,b,c,d){var e=ha.rect(a,b,c,d,I);return i(e,I)}function Ra(a,b){for(var c=0;c<fa;c++){var d=p(0,c),e=u(y(d),1),f=new Date(Math.max(d,a)),g=new Date(Math.min(e,b));if(f<g){var h=ha.rect(0,c,0,c,P),j=Ya(d,f),k=Ya(d,g);h.top=j,h.height=k-j,Na(i(h,P))}}}function Sa(a){return ja.left(a)}function Ta(a){return ka.left(a)}function Ua(a){return ja.right(a)}function Va(a){return ka.right(a)}function Wa(a){return g("allDaySlot")&&!a.row}function Xa(a){var b=p(0,a.col),c=a.row;return g("allDaySlot")&&c--,c>=0&&w(b,pa+c*ca),b}function Ya(a,b){if(a=y(a,!0),b<w(y(a),pa))return 0;if(b>=w(y(a),qa))return R.height();var d=g("slotMinutes"),e=60*b.getHours()+b.getMinutes()-pa,f=Math.floor(e/d),h=la[f];return h===c&&(h=la[f]=R.find("tr").eq(f).find("td div")[0].offsetTop),Math.max(0,Math.round(h-1+$*(e%d/d)))}function Za(a){return L}function $a(a){var b=y(a.start);return a.allDay?b:w(b,g("defaultEventMinutes"))}function _a(a,b){return b?y(a):w(y(a),g("slotMinutes"))}function ab(a,b,c){c?g("allDaySlot")&&Pa(a,u(y(b),1),!0):bb(a,b)}function bb(a,c){var d=g("selectHelper");if(ha.build(),d){var e=q(a).col;if(e>=0&&e<fa){var f=ha.rect(0,e,0,e,P),h=Ya(a,a),i=Ya(a,c);if(i>h){if(f.top=h,f.height=i-h,f.left+=2,f.width-=5,b.isFunction(d)){var j=d(a,c);j&&(f.position="absolute",T=b(j).css(f).appendTo(P))}else f.isStart=!0,f.isEnd=!0,T=b(n({title:"",start:a,end:c,className:["fc-select-helper"],editable:!1},f)),T.css("opacity",g("dragOpacity"));T&&(Na(T),P.append(T),M(T,f.width,!0),N(T,f.height,!0))}}}else Ra(a,c)}function cb(){j(),T&&(T.remove(),T=null)}function db(a){if(1==a.which&&g("selectable")){l(a);var c;ia.start(function(a,b){if(cb(),a&&a.col==b.col&&!Wa(a)){var d=Xa(b),e=Xa(a);c=[d,w(y(d),ca),e,w(y(e),ca)].sort(X),bb(c[0],c[3])}else c=null},a),b(document).one("mouseup",function(a){ia.stop(),c&&(+c[0]==+c[1]&&eb(c[0],!1,a),k(c[0],c[3],!1,a))})}}function eb(a,b,c){h("dayClick",C[q(a).col],a,b,c)}function fb(a,b,c){ia.start(function(a){if(j(),a)if(Wa(a))Qa(a.row,a.col,a.row,a.col);else{var b=Xa(a),c=w(y(b),g("defaultEventMinutes"));Ra(b,c)}},b)}function gb(a,b,c){var d=ia.stop();j(),d&&h("drop",a,Xa(d),Wa(d),b,c)}var f=this;f.renderAgenda=va,f.setWidth=Ia,f.setHeight=Da,f.afterRender=La,f.defaultEventEnd=$a,f.timePosition=Ya,f.getIsCellAllDay=Wa,f.allDayRow=Za,f.getCoordinateGrid=function(){return ha},f.getHoverListener=function(){return ia},f.colLeft=Sa,f.colRight=Ua,f.colContentLeft=Ta,f.colContentRight=Va,f.getDaySegmentContainer=function(){return J},f.getSlotSegmentContainer=function(){return Q},f.getMinMinute=function(){return pa},f.getMaxMinute=function(){return qa},f.getSlotContainer=function(){return P},f.getRowCnt=function(){return 1},f.getColCnt=function(){return fa},f.getColWidth=function(){return Y},f.getSnapHeight=function(){return ea},f.getSnapMinutes=function(){return ca},f.defaultSelectionEnd=_a,f.renderDayOverlay=Pa,f.renderSelection=ab,f.clearSelection=cb,f.reportDayClick=eb,f.dragStart=fb,f.dragStop=gb,za.call(f,a,d,e),Fa.call(f),Ea.call(f),oa.call(f);var t,v,A,B,C,D,F,G,H,I,J,K,L,O,P,Q,R,T,U,V,W,Y,Z,$,ca,da,ea,fa,ga,ha,ia,ja,ka,ma,na,pa,qa,ra,sa,ta,ua,g=f.opt,h=f.trigger,i=f.renderOverlay,j=f.clearOverlays,k=f.reportSelection,l=f.unselect,m=f.daySelectionMousedown,n=f.slotSegHtml,p=f.cellToDate,q=f.dateToCell,r=f.rangeToSegments,s=d.formatDate,la={};aa(a.addClass("fc-agenda")),ha=new Ga(function(a,c){function k(a){return Math.max(i,Math.min(j,a))}var d,e,f;A.each(function(a,g){d=b(g),e=d.offset().left,a&&(f[1]=e),f=[e],c[a]=f}),f[1]=e+d.outerWidth(),g("allDaySlot")&&(d=L,e=d.offset().top,a[0]=[e,e+d.outerHeight()]);for(var h=P.offset().top,i=O.offset().top,j=i+O.outerHeight(),l=0;l<ga*da;l++)a.push([k(h+ea*l),k(h+ea*(l+1))])}),ia=new Ha(ha),ja=new Ja(function(a){return D.eq(a)}),ka=new Ja(function(a){return F.eq(a)})}function oa(){function U(a,b){var c,e=a.length,f=[],g=[];for(c=0;c<e;c++)a[c].allDay?f.push(a[c]):g.push(a[c]);d("allDaySlot")&&(P(f,b),j()),Z(W(g),b)}function V(){k().empty(),l().empty()}function W(a){var f,h,i,j,k,c=x(),d=o(),e=n(),g=b.map(a,Y),l=[];for(h=0;h<c;h++)for(f=v(0,h),w(f,d),k=X(a,g,f,w(y(f),e-d)),k=pa(k),i=0;i<k.length;i++)j=k[i],j.col=h,l.push(j);return l}function X(a,b,c,d){var f,h,i,j,k,l,m,n,e=[],g=a.length;for(f=0;f<g;f++)h=a[f],i=h.start,j=b[f],j>c&&i<d&&(i<c?(k=y(c),m=!1):(k=i,m=!0),j>d?(l=y(d),n=!1):(l=j,n=!0),e.push({event:h,start:k,end:l,isStart:m,isEnd:n}));return e.sort(ya)}function Y(a){return a.end?y(a.end):w(y(a.start),d("defaultEventMinutes"))}function Z(a,f){var g,i,j,k,m,n,o,q,r,u,v,x,y,z,A,B,h=a.length,w="",C=l(),D=d("isRTL");for(g=0;g<h;g++)i=a[g],j=i.event,k=p(i.start,i.start),m=p(i.start,i.end),n=s(i.col),o=t(i.col),q=o-n,o-=.025*q,q=o-n,r=q*(i.forwardCoord-i.backwardCoord),d("slotEventOverlap")&&(r=Math.max(2*(r-10),r)),D?(v=o-i.backwardCoord*q,u=v-r):(u=n+i.backwardCoord*q,v=u+r),u=Math.max(u,n),v=Math.min(v,o),r=v-u,i.top=k,i.left=u,i.outerWidth=r,i.outerHeight=m-k,w+=$(j,i);for(C[0].innerHTML=w,x=C.children(),g=0;g<h;g++)i=a[g],j=i.event,y=b(x[g]),z=e("eventRender",j,j,y),z===!1?y.remove():(z&&z!==!0&&(y.remove(),y=b(z).css({position:"absolute",top:i.top,left:i.left}).appendTo(C)),i.element=y,j._id===f?aa(j,y,i):y[0]._fci=g,E(j,y));for(L(C,a,aa),g=0;g<h;g++)i=a[g],(y=i.element)&&(i.vsides=S(y,!0),i.hsides=O(y,!0),A=y.find(".fc-event-title"),A.length&&(i.contentTop=A[0].offsetTop));for(g=0;g<h;g++)i=a[g],(y=i.element)&&(y[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px",B=Math.max(0,i.outerHeight-i.vsides),y[0].style.height=B+"px",j=i.event,i.contentTop!==c&&B-i.contentTop<10&&(y.find("div.fc-event-time").text(R(j.start,d("timeFormat"))+" - "+j.title),y.find("div.fc-event-title").remove()),e("eventAfterRender",j,j,y))}function $(a,b){var c="<",e=a.url,h=da(a,d),i=["fc-event","fc-event-vert"];return f(a)&&i.push("fc-event-draggable"),b.isStart&&i.push("fc-event-start"),b.isEnd&&i.push("fc-event-end"),i=i.concat(a.className),a.source&&(i=i.concat(a.source.className||[])),c+=e?"a href='"+_(a.url)+"'":"div",c+=" class='"+i.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+h+"'><div class='fc-event-inner'><div class='fc-event-time'>"+_(T(a.start,a.end,d("timeFormat")))+"</div><div class='fc-event-title'>"+_(a.title||"")+"</div></div><div class='fc-event-bg'></div>",b.isEnd&&g(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),c+="</"+(e?"a":"div")+">"}function aa(a,b,c){var d=b.find("div.fc-event-time");f(a)&&ca(a,b,d),c.isEnd&&g(a)&&ea(a,b,d),i(a,b)}function ba(a,b,c){function s(){i||(b.width(g).height("").draggable("option","grid",null),i=!0)}var g,h,j,f=c.isStart,i=!0,k=m(),l=z(),n=B(),p=C(),q=o();
b.draggable({opacity:d("dragOpacity","month"),revertDuration:d("dragRevertDuration"),start:function(c,m){e("eventDragStart",b,a,c,m),G(a,b),g=b.width(),k.start(function(c,e){if(M(),c){h=!1;var g=v(0,e.col),k=v(0,c.col);j=A(k,g),c.row?f?i&&(b.width(l-10),N(b,n*Math.round((a.end?(a.end-a.start)/r:d("defaultEventMinutes"))/p)),b.draggable("option","grid",[l,1]),i=!1):h=!0:(K(u(y(a.start),j),u(J(a),j)),s()),h=h||i&&!j}else s(),h=!0;b.draggable("option","revert",h)},c,"drag")},stop:function(c,d){if(k.stop(),M(),e("eventDragStop",b,a,c,d),h)s(),b.css("filter",""),F(a,b);else{var f=0;i||(f=Math.round((b.offset().top-D().offset().top)/n)*p+q-(60*a.start.getHours()+a.start.getMinutes())),H(this,a,j,f,i,c,d)}}})}function ca(b,c,f){function L(){M(),n&&(p?(f.hide(),c.draggable("option","grid",null),K(u(y(b.start),D),u(J(b),D))):(N(E),f.css("display",""),c.draggable("option","grid",[i,j])))}function N(a){var e,c=w(y(b.start),a);b.end&&(e=w(y(b.end),a)),f.text(T(c,e,d("timeFormat")))}var l,m,n,o,p,r,s,t,D,E,I,g=a.getCoordinateGrid(),h=x(),i=z(),j=B(),k=C();c.draggable({scroll:!1,grid:[i,j],axis:1==h&&"y",opacity:d("dragOpacity"),revertDuration:d("dragRevertDuration"),start:function(a,d){e("eventDragStart",c,b,a,d),G(b,c),g.build(),l=c.position(),m=g.cell(a.pageX,a.pageY),n=o=!0,p=r=q(m),s=t=0,D=0,E=I=0},drag:function(a,b){var d=g.cell(a.pageX,a.pageY);if(n=!!d){if(p=q(d),s=Math.round((b.position.left-l.left)/i),s!=t){var e=v(0,m.col),f=m.col+s;f=Math.max(0,f),f=Math.min(h-1,f);var u=v(0,f);D=A(u,e)}p||(E=Math.round((b.position.top-l.top)/j)*k)}n==o&&p==r&&s==t&&E==I||(L(),o=n,r=p,t=s,I=E),c.draggable("option","revert",!n)},stop:function(a,d){M(),e("eventDragStop",c,b,a,d),n&&(p||D||E)?H(this,b,D,p?0:E,p,a,d):(n=!0,p=!1,s=0,D=0,E=0,L(),c.css("filter",""),c.css(l),F(b,c))}})}function ea(a,b,c){var f,g,i=B(),j=C();b.resizable({handles:{s:".ui-resizable-handle"},grid:i,start:function(c,d){f=g=0,G(a,b),e("eventResizeStart",this,a,c,d)},resize:function(e,k){f=Math.round((Math.max(i,b.height())-k.originalSize.height)/i),f!=g&&(c.text(T(a.start,f||a.end?w(h(a),j*f):null,d("timeFormat"))),g=f)},stop:function(c,d){e("eventResizeStop",this,a,c,d),f?I(this,a,0,j*f,c,d):F(a,b)}})}var a=this;a.renderEvents=U,a.clearEvents=V,a.slotSegHtml=$,Aa.call(a);var d=a.opt,e=a.trigger,f=a.isEventDraggable,g=a.isEventResizable,h=a.eventEnd,i=a.eventElementHandlers,j=a.setHeight,k=a.getDaySegmentContainer,l=a.getSlotSegmentContainer,m=a.getHoverListener,n=a.getMaxMinute,o=a.getMinMinute,p=a.timePosition,q=a.getIsCellAllDay,s=a.colContentLeft,t=a.colContentRight,v=a.cellToDate,x=a.getColCnt,z=a.getColWidth,B=a.getSnapHeight,C=a.getSnapMinutes,D=a.getSlotContainer,E=a.reportEventElement,F=a.showEvents,G=a.hideEvents,H=a.eventDrop,I=a.eventResize,K=a.renderDayOverlay,M=a.clearOverlays,P=a.renderDayEvents,Q=a.calendar,R=Q.formatDate,T=Q.formatDates;a.draggableDayEvent=ba}function pa(a){var d,b=qa(a),c=b[0];if(ra(b),c){for(d=0;d<c.length;d++)sa(c[d]);for(d=0;d<c.length;d++)ta(c[d],0,0)}return ua(b)}function qa(a){var c,d,e,b=[];for(c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&va(d,b[e]).length;e++);(b[e]||(b[e]=[])).push(d)}return b}function ra(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)va(e,a[f],e.forwardSegs)}function sa(a){var e,f,b=a.forwardSegs,d=0;if(a.forwardPressure===c){for(e=0;e<b.length;e++)f=b[e],sa(f),d=Math.max(d,1+f.forwardPressure);a.forwardPressure=d}}function ta(a,b,d){var f,e=a.forwardSegs;if(a.forwardCoord===c)for(e.length?(e.sort(xa),ta(e[0],b+1,d),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-d)/(b+1),f=0;f<e.length;f++)ta(e[f],0,a.forwardCoord)}function ua(a){var c,d,e,b=[];for(c=0;c<a.length;c++)for(d=a[c],e=0;e<d.length;e++)b.push(d[e]);return b}function va(a,b,c){c=c||[];for(var d=0;d<b.length;d++)wa(a,b[d])&&c.push(b[d]);return c}function wa(a,b){return a.end>b.start&&a.start<b.end}function xa(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||ya(a,b)}function ya(a,b){return a.start-b.start||b.end-b.start-(a.end-a.start)||(a.event.title||"").localeCompare(b.event.title)}function za(d,e,f){function o(a,c){var d=n[a];return b.isPlainObject(d)?$(d,c||f):d}function p(a,b){return e.trigger.apply(e,[a,b||g].concat(Array.prototype.slice.call(arguments,2),[g]))}function q(a){var b=a.source||{};return fa(a.startEditable,b.startEditable,o("eventStartEditable"),a.editable,b.editable,o("editable"))&&!o("disableDragging")}function r(a){var b=a.source||{};return fa(a.durationEditable,b.durationEditable,o("eventDurationEditable"),a.editable,b.editable,o("editable"))&&!o("disableResizing")}function s(a){k={};var b,d,c=a.length;for(b=0;b<c;b++)d=a[b],k[d._id]?k[d._id].push(d):k[d._id]=[d]}function t(){k={},l={},m=[]}function v(a){return a.end?y(a.end):h(a)}function x(a,b){m.push({event:a,element:b}),l[a._id]?l[a._id].push(b):l[a._id]=[b]}function z(){b.each(m,function(a,b){g.trigger("eventDestroy",b.event,b.event,b.element)})}function B(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return p("eventClick",this,a,c)}).hover(function(b){p("eventMouseover",this,a,b)},function(b){p("eventMouseout",this,a,b)})}function C(a,b){E(a,b,"show")}function D(a,b){E(a,b,"hide")}function E(a,b,c){var e,d=l[a._id],f=d.length;for(e=0;e<f;e++)b&&d[e][0]==b[0]||d[e][c]()}function F(a,b,c,d,e,f,g){var h=b.allDay,i=b._id;H(k[i],c,d,e),p("eventDrop",a,b,c,d,e,function(){H(k[i],-c,-d,h),j(i)},f,g),j(i)}function G(a,b,c,d,e,f){var g=b._id;I(k[g],c,d),p("eventResize",a,b,c,d,function(){I(k[g],-c,-d),j(g)},e,f),j(g)}function H(a,b,d,e){d=d||0;for(var f,g=a.length,h=0;h<g;h++)f=a[h],e!==c&&(f.allDay=e),w(u(f.start,b,!0),d),f.end&&(f.end=w(u(f.end,b,!0),d)),i(f,n)}function I(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=w(u(v(d),b,!0),c),i(d,n)}function P(a){return"object"==typeof a&&(a=a.getDay()),K[a]}function Q(){return L}function R(a,b,c){for(b=b||1;K[(a.getDay()+(c?b:0)+7)%7];)u(a,b)}function S(){var a=T.apply(null,arguments),b=U(a),c=V(b);return c}function T(a,b){var c=g.getColCnt(),d=O?-1:1,e=O?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);var f=a*c+(b*d+e);return f}function U(a){var b=g.visStart.getDay();return a+=M[b],7*Math.floor(a/L)+N[(a%L+L)%L]-b}function V(a){var b=y(g.visStart);return u(b,a),b}function W(a){var b=X(a),c=Y(b),d=Z(c);return d}function X(a){return A(a,g.visStart)}function Y(a){var b=g.visStart.getDay();return a+=b,Math.floor(a/7)*L+M[(a%7+7)%7]-M[b]}function Z(a){var b=g.getColCnt(),c=O?-1:1,d=O?b-1:0,e=Math.floor(a/b),f=(a%b+b)%b*c+d;return{row:e,col:f}}function _(c,d,e){var f=g.getRowCnt(),h=g.getColCnt(),i=[],j=X(c),k=X(d);nextDayThreshold=!(!n.nextDayThreshold||""==n.nextDayThreshold)&&parseInt(n.nextDayThreshold),e&&e.end&&e.end.getHours&&!1!==nextDayThreshold&&k-j>1&&e.end.getHours()<=nextDayThreshold&&(k-=1);for(var l=Y(j),m=Y(k)-1,o=0;o<f;o++){var p=o*h,q=p+h-1,r=Math.max(l,p),s=Math.min(m,q);if(r<=s){var t=Z(r),u=Z(s),v=[t.col,u.col].sort(),w=U(r)==j,x=U(s)+1==k;i.push({row:o,leftCol:v[0],rightCol:v[1],isStart:w,isEnd:x})}}return b(g.element).parents(".rhcalendar.not-widget").hasClass("fc-small")?(new_segments=[],b.each(i,function(b,c){if(leftCol=c.leftCol,rightCol=c.rightCol,leftCol<rightCol)for(a=leftCol;a<=rightCol;a++){var d=jQuery.extend({},c);d.leftCol=a,d.rightCol=a,new_segments.push(d)}else new_segments.push(c)}),new_segments):i}var g=this;g.element=d,g.calendar=e,g.name=f,g.opt=o,g.trigger=p,g.isEventDraggable=q,g.isEventResizable=r,g.setEventData=s,g.clearEventData=t,g.eventEnd=v,g.reportEventElement=x,g.triggerEventDestroy=z,g.eventElementHandlers=B,g.showEvents=C,g.hideEvents=D,g.eventDrop=F,g.eventResize=G;var h=g.defaultEventEnd,i=e.normalizeEvent,j=e.reportEventChange,k={},l={},m=[],n=e.options;g.isHiddenDay=P,g.skipHiddenDays=R,g.getCellsPerWeek=Q,g.dateToCell=W,g.dateToDayOffset=X,g.dayOffsetToCellOffset=Y,g.cellOffsetToCell=Z,g.cellToDate=S,g.cellToCellOffset=T,g.cellOffsetToDayOffset=U,g.dayOffsetToDate=V,g.rangeToSegments=_;var L,J=o("hiddenDays")||[],K=[],M=[],N=[],O=o("isRTL");!function(){o("weekends")===!1&&J.push(0,6);for(var a=0,c=0;a<7;a++)M[a]=c,K[a]=b.inArray(a,J)!=-1,K[a]||(N[c]=a,c++);if(L=c,!L)throw"invalid hiddenDays"}()}function Aa(){function P(a,b){var c=R(a,!1,!0);Ca(c,function(a,b){i(a.event,b)}),ga(c,b),Ca(c,function(a,b){d("eventAfterRender",a.event,a.event,b)})}function Q(a,b,c){var d=R([a],!0,!1),e=[];return Ca(d,function(a,d){a.row===b&&d.css("top",c),e.push(d[0])}),e}function R(a,c,d){var h,i,e=z(),f=c?b("<div/>"):e,g=S(a);return U(g),h=V(g),f[0].innerHTML=h,i=f.children(),c&&e.append(i),X(g,i),Ca(g,function(a,b){a.hsides=O(b,!0)}),Ca(g,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))}),Ca(g,function(a,b){a.outerHeight=b.outerHeight(!0)}),Z(g,d),g}function S(a){for(var b=[],c=0;c<a.length;c++){var d=T(a[c]);b.push.apply(b,d)}return b}function T(a){for(var b=a.start,c=J(a),d=G(b,c,a),e=0;e<d.length;e++)d[e].event=a;return d}function U(a){for(var b=c("isRTL"),d=0;d<a.length;d++){var e=a[d],f=(b?e.isEnd:e.isStart)?v:s,g=(b?e.isStart:e.isEnd)?w:t,h=f(e.leftCol),i=g(e.rightCol);e.left=h,e.outerWidth=i-h}}function V(a){for(var b="",c=0;c<a.length;c++)b+=W(a[c]);return b}function W(a){var b="",d=c("isRTL"),g=a.event,h=g.url,i=["fc-event","fc-event-hori"];e(g)&&i.push("fc-event-draggable"),a.isStart&&i.push("fc-event-start"),a.isEnd&&i.push("fc-event-end"),i=i.concat(g.className),g.source&&(i=i.concat(g.source.className||[]));var j=da(g,c);return b+=h?"<a href='"+_(h)+"'":"<div",b+=" class='"+i.join(" ")+"' style='position:absolute;left:"+a.left+"px;"+j+"'><div class='fc-event-inner'>",!g.allDay&&a.isStart&&(b+="<span class='fc-event-time'>"+_(B(g.start,g.end,c("timeFormat")))+"</span>"),b+="<span class='fc-event-title'>"+_(g.title||"")+"</span></div>",a.isEnd&&f(g)&&(b+="<div class='ui-resizable-handle ui-resizable-"+(d?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),b+="</"+(h?"a":"div")+">"}function X(a,c){for(var e=0;e<a.length;e++){var f=a[e],g=f.event,h=c.eq(e),i=d("eventRender",g,g,h);i===!1?h.remove():(i&&i!==!0&&(i=b(i).css({position:"absolute",left:f.left}),h.replaceWith(i),h=i),f.element=h)}}function Z(a,c){var g,g,e=($(a),fa()),f=[],i=o(),k=(p(),[]);for(row=0;row<i;row++)k[row]=[],Ca(a,function(a,b){if(a.row==row&&!(a.leftCol>a.rightcol))for(col=a.leftCol;col<=a.rightCol;col++)k[row][col]=k[row][col]||0,k[row][col]+=a.outerHeight});if(c)for(var g=0;g<e.length;g++)if(e[g].length>=k[g].length)for(var l=0;l<e[g].length;l++)h=!(!k[g]||!k[g][l])&&k[g][l],!1===h?e[g].eq(l).addClass("fc-day-no-events"):e[g].eq(l).height(h);else new_h=0,b.each(k[g],function(a,b){new_h=b>new_h?b:new_h}),e[g].height(new_h);for(var g=0;g<e.length;g++)for(var l=0;l<e[g].length;l++)f[g]=f[g]||[],f[g][l]=e[g].eq(l).position().top;Ca(a,function(a,b){contentTop=f[a.row][a.leftCol]||f[a.row][0],b.css("top",contentTop+a.top)})}function $(a){for(var b=o(),c=p(),d=[],e=ba(a),f=0;f<b;f++){for(var g=e[f],h=[],i=0;i<c;i++)h.push(0);for(var j=0;j<g.length;j++){var k=g[j];k.top=Y(h.slice(k.leftCol,k.rightCol+1));for(var i=k.leftCol;i<=k.rightCol;i++)h[i]=k.top+k.outerHeight}d.push(Y(h))}return d}function ba(a){var d,e,f,b=o(),c=[];for(d=0;d<a.length;d++)e=a[d],f=e.row,e.element&&(c[f]?c[f].push(e):c[f]=[e]);for(f=0;f<b;f++)c[f]=ca(c[f]||[]);return c}function ca(a){for(var b=[],c=ea(a),d=0;d<c.length;d++)b.push.apply(b,c[d]);return b}function ea(a){a.sort(Da);for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&Ba(d,b[e]);e++);b[e]?b[e].push(d):b[e]=[d]}return b}function fa(){var a,b=o(),c=[];for(a=0;a<b;a++)c[a]=r(a).find("div.fc-day-content > div");return c}function ga(a,b){var c=z();Ca(a,function(a,c,d){var e=a.event;e._id===b?ha(e,c,a):c[0]._fci=d}),L(c,a,ha)}function ha(b,c,d){e(b)&&a.draggableDayEvent(b,c,d),d.isEnd&&f(b)&&a.resizableDayEvent(b,c,d),j(b,c)}function ia(a,b){var f,e=F();b.draggable({delay:50,opacity:c("dragOpacity"),revertDuration:c("dragRevertDuration"),start:function(c,g){d("eventDragStart",b,a,c,g),l(a,b),e.start(function(c,d,e,g){if(b.draggable("option","revert",!c||!e&&!g),D(),c){var h=H(d),i=H(c);f=A(i,h),C(u(y(a.start),f),u(J(a),f))}else f=0},c,"drag")},stop:function(c,g){e.stop(),D(),d("eventDragStop",b,a,c,g),f?m(this,a,f,0,a.allDay,c,g):(b.css("filter",""),k(a,b))}})}function ja(a,e,f){var h=c("isRTL"),i=h?"w":"e",j=e.find(".ui-resizable-"+i),m=!1;aa(e),e.mousedown(function(a){a.preventDefault()}).click(function(a){m&&(a.preventDefault(),a.stopImmediatePropagation())}),j.mousedown(function(c){function x(c){d("eventResizeStop",this,a,c),b("body").css("cursor",""),h.stop(),D(),s&&n(this,a,s,0,c),setTimeout(function(){m=!1},0)}if(1==c.which){m=!0;var s,t,h=F(),r=(o(),p(),e.css("top")),v=b.extend({},a),w=N(M(a.start));E(),b("body").css("cursor",i+"-resize").one("mouseup",x),d("eventResizeStart",this,a,c),h.start(function(c,d){if(c){var e=I(d),h=I(c);if(h=Math.max(h,w),s=K(h)-K(e)){v.end=u(g(a),s,!0);var j=t;t=Q(v,f.row,r),t=b(t),t.find("*").css("cursor",i+"-resize"),j&&j.remove(),l(a)}else t&&(k(a),t.remove(),t=null);D(),C(a.start,u(J(a),s))}},c)}})}var a=this;a.renderDayEvents=P,a.draggableDayEvent=ia,a.resizableDayEvent=ja;var c=a.opt,d=a.trigger,e=a.isEventDraggable,f=a.isEventResizable,g=a.eventEnd,i=a.reportEventElement,j=a.eventElementHandlers,k=a.showEvents,l=a.hideEvents,m=a.eventDrop,n=a.eventResize,o=a.getRowCnt,p=a.getColCnt,r=(a.getColWidth,a.allDayRow),s=a.colLeft,t=a.colRight,v=a.colContentLeft,w=a.colContentRight,z=(a.dateToCell,a.getDaySegmentContainer),B=a.calendar.formatDates,C=a.renderDayOverlay,D=a.clearOverlays,E=a.clearSelection,F=a.getHoverListener,G=a.rangeToSegments,H=a.cellToDate,I=a.cellToCellOffset,K=a.cellOffsetToDayOffset,M=a.dateToDayOffset,N=a.dayOffsetToCellOffset}function Ba(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0}return!1}function Ca(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=d.element;e&&b(d,e,c)}}function Da(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)}function Ea(){function i(a,b,c){j(),b||(b=e(a,c)),f(a,b,c),k(a,b,c)}function j(a){h&&(h=!1,g(),d("unselect",null,a))}function k(a,b,c,e){h=!0,d("select",null,a,b,c,e)}function l(d){var e=a.cellToDate,h=a.getIsCellAllDay,i=a.getHoverListener(),l=a.reportDayClick;if(1==d.which&&c("selectable")){j(d);var n;i.start(function(a,b){g(),a&&h(a)?(n=[e(b),e(a)].sort(X),f(n[0],n[1],!0)):n=null},d),b(document).one("mouseup",function(a){i.stop(),n&&(+n[0]==+n[1]&&l(n[0],!0,a),k(n[0],n[1],!0,a))})}}var a=this;a.select=i,a.unselect=j,a.reportSelection=k,a.daySelectionMousedown=l;var c=a.opt,d=a.trigger,e=a.defaultSelectionEnd,f=a.renderSelection,g=a.clearSelection,h=!1;c("selectable")&&c("unselectAuto")&&b(document).mousedown(function(a){var d=c("unselectCancel");d&&b(a.target).parents(d).length||j(a)})}function Fa(){function e(a,e){var f=d.shift();return f||(f=b("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),f[0].parentNode!=e[0]&&f.appendTo(e),c.push(f.css(a).show()),f}function f(){for(var a;a=c.shift();)d.push(a.hide().unbind())}var a=this;a.renderOverlay=e,a.clearOverlays=f;var c=[],d=[]}function Ga(a){var c,d,b=this;b.build=function(){c=[],d=[],a(c,d)},b.cell=function(a,b){var g,e=c.length,f=d.length,h=-1,i=-1;for(g=0;g<e;g++)if(b>=c[g][0]&&b<c[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=d[g][0]&&a<d[g][1]){i=g;break}return h>=0&&i>=0?{row:h,col:i}:null},b.rect=function(a,b,e,f,g){var h=g.offset();return{top:c[a][0]-h.top,left:d[b][0]-h.left,width:d[f][1]-d[b][0],height:c[e][1]-c[a][0]}}}function Ha(a){function h(b){Ia(b);var c=a.cell(b.pageX,b.pageY);(!c!=!g||c&&(c.row!=g.row||c.col!=g.col))&&(c?(f||(f=c),e(c,f,c.row-f.row,c.col-f.col)):e(c,f),g=c)}var d,e,f,g,c=this;c.start=function(c,i,j){e=c,f=g=null,a.build(),h(i),d=j||"mousemove",b(document).bind(d,h)},c.stop=function(){return b(document).unbind(d,h),g}}function Ia(a){a.pageX===c&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY)}function Ja(a){function g(b){return d[b]=d[b]||a(b)}var b=this,d={},e={},f={};b.left=function(a){return e[a]=e[a]===c?g(a).position().left:e[a]},b.right=function(a){return f[a]=f[a]===c?b.left(a)+g(a).width():f[a]},b.clear=function(){d={},e={},f={}}}var d={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},e={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},f=b.fullCalendar={version:"1.6.4"},g=f.views={};b.fn.fullCalendar=function(a){if("string"==typeof a){var g,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=b.data(this,"fullCalendar");if(d&&b.isFunction(d[a])){var e=d[a].apply(d,f);g===c&&(g=e),"destroy"==a&&b.removeData(this,"fullCalendar")}}),g!==c?g:this}a=a||{};var h=a.eventSources||[];return delete a.eventSources,a.events&&(h.push(a.events),delete a.events),a=b.extend(!0,{},d,a.isRTL||a.isRTL===c&&d.isRTL?e:{},a),this.each(function(c,d){var e=b(d),f=new j(e,a,h);e.data("fullCalendar",f),f.render()}),this},f.sourceNormalizers=[],f.sourceFetchers=[];var l={dataType:"json",cache:!1},m=1;f.addDays=u,f.cloneDate=y,f.parseDate=C,f.parseISO8601=D,f.parseTime=E,f.formatDate=F,f.formatDates=G,f.addMonths=t;var o=["sun","mon","tue","wed","thu","fri","sat"],p=864e5,q=36e5,r=6e4,H={s:function(a){return a.getSeconds()},ss:function(a){return Z(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Z(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Z(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Z(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Z(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Z(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return F(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){var b=a.getDate();return b>10&&b<20?"th":["st","nd","rd"][b%10-1]||"th"},w:function(a,b){return b.weekNumberCalculation(a)},W:function(a){return I(a)}};f.dateFormatters=H,f.applyAll=ea,g.month=ga,g.basicWeek=ha,g.basicDay=ia,i({weekMode:"fixed"}),g.agendaWeek=la,g.agendaDay=ma,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(a){function g(b,g,h){var i=b.success,j=a.extend({},b.data||{},{"start-min":c(g,"u"),"start-max":c(h,"u"),singleevents:!0,"max-results":9999}),k=b.currentTimezone;return k&&(j.ctz=k=k.replace(" ","_")),a.extend({},b,{url:b.url.replace(/\/basic$/,"/full")+"?alt=json-in-script&callback=?",dataType:"jsonp",data:j,startParam:!1,endParam:!1,success:function(b){var c=[];b.feed.entry&&a.each(b.feed.entry,function(b,f){var l,g=f.gd$when[0].startTime,h=d(g,!0),i=d(f.gd$when[0].endTime,!0),j=g.indexOf("T")==-1;a.each(f.link,function(a,b){"text/html"==b.type&&(l=b.href,k&&(l+=(l.indexOf("?")==-1?"?":"&")+"ctz="+k))}),j&&e(i,-1),c.push({id:f.gCal$uid.value,title:f.title.$t,url:l,start:h,end:i,allDay:j,location:f.gd$where[0].valueString,description:f.content.$t})});var g=[c].concat(Array.prototype.slice.call(arguments,1)),h=f(i,this,g);return a.isArray(h)?h:c}})}var b=a.fullCalendar,c=b.formatDate,d=b.parseISO8601,e=b.addDays,f=b.applyAll;b.sourceNormalizers.push(function(a){("gcal"==a.dataType||void 0===a.dataType&&(a.url||"").match(/^(http|https):\/\/www.google.com\/calendar\/feeds\//))&&(a.dataType="gcal",void 0===a.editable&&(a.editable=!1))}),b.sourceFetchers.push(function(a,b,c){if("gcal"==a.dataType)return g(a,b,c)}),b.gcalFeed=function(b,c){return a.extend({},c,{url:b,dataType:"gcal"})}}(jQuery),function(a){function b(b,d){function j(c,j){j&&g(c,7*j);var k=g(h(c),-((c.getDay()-l("firstDay")+7)%7)),m=g(h(k),7),n=h(k),o=h(m);d.options.titleFormat.week&&(d.options.titleFormat.week=d.options.titleFormat.week.replace(/&#91;/g,"["),d.options.titleFormat.week=d.options.titleFormat.week.replace(/&#93;/g,"]"),e.title=i(n,g(h(o),-1),d.options.titleFormat.week,d.options)),e.start=k,e.end=m,e.visStart=n,e.visEnd=o;var p=!f;p&&(a('<div class="fc-events-holder"></div>').appendTo(b),f=!0)}function k(){}function l(a,b){var c=options[a];return c}var f,e=this,g=a.fullCalendar.addDays,h=a.fullCalendar.cloneDate,i=a.fullCalendar.formatDates;options=d.options,c.call(e,b,d),e.render=j,e.viewChanged=k}function c(b,c){function f(a){if(a&&a.visStart&&a.visEnd){if(d.title=a.title,d.visStart=a.start,d.visEnd=a.visEnd,d.oldView=a,c.options.eventList.upcoming&&"1"==c.options.eventList.upcoming){var b=new Date;d.visStart=d.visStart.getTime()>b.getTime()?d.visStart:b}var e=c.options.eventList.monthsahead?c.options.eventList.monthsahead:"";if(e=""==e.replace(" ","")?1:parseInt(e),e>0){var f=new Date(d.visStart);f.setMonth(f.getMonth()+e),d.visEnd=f}var g=c.options.eventList.daysahead?c.options.eventList.daysahead:"";if(g=""==g.replace(" ","")?0:parseInt(g),g>0){var f=new Date(d.visStart);f.setDate(f.getDate()+g-1),f.setHours(23,59,59),d.visEnd=f}}}function g(a){}function h(){}function i(){}function j(a){}function k(f,g){var h=c.options.eventList.stack&&1==parseInt(c.options.eventList.stack)||!1;d.direction=g,custom_delta=parseInt(c.options.eventList.delta),custom_delta=isNaN(custom_delta)?0:custom_delta,date_changed=!1,h&&custom_delta>0&&d.first_date&&d.direction<0&&f>d.first_date&&(f=fc.cloneDate(d.first_date),date_changed=!0),0==d.direction?d.first_date=fc.cloneDate(f):d.direction<0&&d.first_date<f&&(d.first_date=fc.cloneDate(f)),g&&custom_delta>0&&(fc.addDays(f,custom_delta*g),g=0),date_changed&&c.gotoDate(f),custom_delta>0?(start=fc.cloneDate(f,!0),end=fc.addDays(fc.cloneDate(start),custom_delta),_end=fc.cloneDate(end)):_end=!1,d.start=fc.cloneDate(f,!0);var i=!e;if(i&&(a('<div class="fc-events-holder"></div>').appendTo(b),e=!0),d.oldView||(d.oldView=new a.fullCalendar.views.month(a("<div>"),c)),d.oldView&&(custom_delta?d.oldView.render(fc.cloneDate(f),g):d.oldView.render(f,g),_end=!1===_end?fc.cloneDate(d.oldView.visEnd):_end,d.oldView.visStart&&d.oldView.visEnd&&(d.title=d.oldView.title,custom_delta?(d.start=fc.cloneDate(start),d.end=fc.cloneDate(end),d.visStart=fc.cloneDate(start),d.visEnd=fc.cloneDate(end)):(d.start=fc.cloneDate(d.oldView.start),d.end=fc.cloneDate(d.oldView.end),d.visStart=fc.cloneDate(d.oldView.start),d.visEnd=fc.cloneDate(d.oldView.visEnd)),c.options.eventList.TitleFormat&&(c.options.eventList.TitleFormat=c.options.eventList.TitleFormat.replace(/&#91;/g,"["),c.options.eventList.TitleFormat=c.options.eventList.TitleFormat.replace(/&#93;/g,"]"),d.title=fc.formatDates(fc.cloneDate(d.visStart),fc.addDays(fc.cloneDate(_end),-1),c.options.eventList.TitleFormat,c.options)))),c.options.eventList.upcoming&&"1"==c.options.eventList.upcoming){var j=new Date;j.setHours(0,0,0),dayspast=c.options.widgetlist.dayspast||0,j.setDate(j.getDate()-parseInt(dayspast)),d.visStart=d.visStart.getTime()>j.getTime()?d.visStart:j}var k=c.options.eventList.monthsahead?c.options.eventList.monthsahead:"";if(k=""==k.replace(" ","")?custom_delta>0?0:1:parseInt(k),k>0){var m=new Date(d.visStart);m.setMonth(m.getMonth()+k),d.visEnd=m}var n=c.options.eventList.daysahead?c.options.eventList.daysahead:"";if(n=""==n.replace(" ","")?0:parseInt(n),n>0){var m=new Date(d.visStart);m.setDate(m.getDate()+n-1),m.setHours(23,59,59),d.visEnd=m}if(parseInt(c.options.eventList.auto)&&parseInt(c.options.eventList.stack)){var o=a(b).parents(".rhc_holder").attr("id");"undefined"==typeof a(document).data("rhc_event_scroll")&&(a(document).data("rhc_event_scroll",o),jQuery(document).scroll(function(){l(o)}))}}function l(b){if(!1!==d.have_events){var e=a("#"+b+" .fc-view-rhc_event");if(e.is(":visible")&&!d.scroll_lockdown){var f=a(e).parents(".rhc_holder"),g=f.offset();if(window.mobile?paddingForMobile=1e3:paddingForMobile=0,a(window).scrollTop()+a(window).height()==a(document).height())d.scroll_lockdown=!0,a(e).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next");else{var h=c.options.eventList.scrolloffset&&""!=c.options.eventList.scrolloffset?c.options.eventList.scrolloffset:a(window).height()/2,h=h-paddingForMobile;document_bottom=a(document).scrollTop()+a(window).height(),bottom_position=g.top+f.outerHeight(),document_bottom>bottom_position+h&&(d.scroll_lockdown=!0,a(e).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next"))}}}}function m(){}function n(a){b.css("min-height","200px"),b.css("height","auto")}function o(){}function p(){}function q(e,f){var g=a(rhc_event_tpl),h=g.find(".fc-event-list-item").clone().removeClass("fc-remove"),i=g.find(".fc-event-list-date").clone().removeClass("fc-remove"),j=g.find(".fc-event-list-no-events").clone().removeClass("fc-remove");c.options.eventList&&c.options.eventList.eventListNoEventsText&&j.find(".fc-no-list-events-message").html(c.options.eventList.eventListNoEventsText),widget_templates=!1,c.options.eventList&&c.options.eventList.eventlist_template&&""!=c.options.eventList.eventlist_template&&a(c.options.eventList.eventlist_template).length>0&&(widget_templates=!0,h=a(c.options.eventList.eventlist_template).find(".rhc-widget-upcoming-item"));var k=!(!c.options.eventList.stack||"1"!=c.options.eventList.stack);if(k&&d.direction>0)var l=b.find(".fc-events-holder");else{var l=b.find(".fc-events-holder").empty();d.rendered_events=[]}if(g.appendTo(l).find(".fc-remove").remove(),k&&a(l).find(".fc-event-list-no-events").parents(".fc-event-list-container").remove(),e.length>0)if(d.have_events=!0,widget_templates){var m=c.options,n=c.options.widgetlist,o=e,p="#"+n.sel;n.dayspast=n.dayspast?n.dayspast:0;var q=a.fullCalendar.parseDate(n.end);if(!n.horizon||"hour"!=n.horizon&&"end"!=n.horizon){var t=[],x=new Date;x.setDate(x.getDate()-n.dayspast),n.historic&&""!=n.specific_date&&(x=a.fullCalendar.parseDate(n.specific_date));for(var y=0;y<o.length;y++){var z=new Date(o[y].start);x.setHours(0,0,0,0),z.setHours(0,0,0,0),z.getTime()<x.getTime()||z.getTime()>q.getTime()||(t[t.length]=o[y])}o=t}else{var t=[],x=new Date;x.setDate(x.getDate()-n.dayspast),n.historic&&"1"==n.historic&&(x=a.fullCalendar.parseDate(n.specific_date));for(var y=0;y<o.length;y++){if(o[y].end&&"end"==n.horizon){if(o[y].end.getTime()<x.getTime())continue}else if(o[y].start.getTime()<x.getTime())continue;o[y].start.getTime()>q.getTime()||(t[t.length]=o[y])}o=t}if(o.sort(_rhc_sort_events),n.premiere&&"1"==n.premiere){for(var t=[],y=0;y<o.length;y++)o[y].premiere&&(t[t.length]=o[y]);o=t}else if(n.premiere&&"2"==n.premiere){for(var A=[],t=[],y=0;y<o.length;y++)a.inArray(o[y]._id,A)>-1||(A.push(o[y]._id),t.push(o[y]));o=t}o=o.slice(0,n.number);var B=[];a.each(o,function(b,c){var d=h.clone(),e=c,f=e.description.split(" ");f=f.slice(0,n.words),e.description=f.join(" "),n.using_calendar_url&&""!=n.using_calendar_url&&(e.url=n.using_calendar_url);var i=e.url,j=h.clone();if(j.find(".rhc-title-link").html(e.title).data("rhc_event",e).attr("href",i).end().find(".rhc-event-link").data("rhc_event",e).attr("href",i).end().find(".rhc-title-in-link").html(e.title).end().find(".rhc-description").html(e.description).end().find(".rhc-widget-date").html("").end().find(".rhc-widget-time").html("").end().find(".rhc-widget-end-date").html("").end().find(".rhc-widget-end-time").html("").end(),""!=n.fcdate_format){j.find(".rhc-widget-date").html(a.fullCalendar.formatDate(e.start,n.fcdate_format,m)),j.find(".rhc-widget-end-date").html(a.fullCalendar.formatDate(e.end,n.fcdate_format,m)),dstart=a.fullCalendar.formatDate(e.start,"yyyy-MM-dd",m),dend=a.fullCalendar.formatDate(e.end,"yyyy-MM-dd",m);var k=Math.floor((Date.parse(dend)-Date.parse(dstart))/864e5);k>0?(t=a.fullCalendar.formatDate(e.start,n.fcdate_format,m)+" &#8211; "+a.fullCalendar.formatDate(e.end,n.fcdate_format,m),j.find(".rhc-widget-date-range").html(t),j.find(".rhc-day_diff0").hide()):(j.find(".rhc-widget-date-range").html(a.fullCalendar.formatDate(e.start,n.fcdate_format,m)),j.find(".rhc-day_diff1").hide())}""==n.fctime_format||e.allDay||(j.find(".rhc-widget-time").html(a.fullCalendar.formatDate(e.start,n.fctime_format,m)),j.find(".rhc-widget-end-time").html(a.fullCalendar.formatDate(e.end,n.fctime_format,m))),e.allDay&&(j.addClass("fc-is-allday"),j.find(".rhc-widget-time").hide()),j.find(".rhc-date-start").each(function(b,c){a(c).html(a.fullCalendar.formatDate(e.start,a(c).html(),m))});var l=a.fullCalendar.formatDate(e.start,"yyyyMMdd",m);-1==a.inArray(l,B)?B.push(l):j.find(".hide-repeat-date").addClass("repeated-date"),1==n.showimage?(j.addClass("featured-1"),e.image&&e.image[0]&&""!=e.image[0]&&a("<a></a>").addClass("rhc-image-link").data("rhc_event",e).attr("href",i).append(a("<img></img>").attr("src",e.image[0])).appendTo(j.find(".rhc-widget-upcoming-featured-image"))):(j.addClass("featured-0"),j.find(".rhc-widget-upcoming-featured-image").remove()),a(j).find(".rhc-title-link,.rhc-event-link,.rhc-image-link").click(function(a){var b={url:e.url};return e.gotodate&&(b.gotodate=e.gotodate),e.event_rdate&&(b.event_rdate=e.event_rdate),_rhc_widget_link_click(b,this)}),d=j,d.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),c.terms&&c.terms.length>0&&a.each(c.terms,function(b,c){if(d.find(".taxonomy-"+c.taxonomy).parent().find("a").length>0&&d.find(".taxonomy-"+c.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),c.name&&""!=c.name&&d.find(".taxonomy-"+c.taxonomy).length>0&&(""==c.url?a("<span>"+c.name+"</span>").appendTo(d.find(".taxonomy-"+c.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):a("<a>"+c.name+"</a>").attr("href",c.url).appendTo(d.find(".taxonomy-"+c.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),d.find(".taxonomy-"+c.taxonomy+"-gaddress").length>0&&c.gaddress&&""!=c.gaddress){d.find(".taxonomy-"+c.taxonomy+"-gaddress").parent().find("a").length>0&&d.find(".taxonomy-"+c.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var e="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(c.gaddress);
a("<a>"+c.gaddress+"</a>").attr("href",e).attr("target","_blank").appendTo(d.find(".taxonomy-"+c.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}for(var f in c)"taxonomy"!=f&&(term_property_value=c[f],d.find(".taxonomy-"+c.taxonomy+"-"+f).length>0&&""!=term_property_value&&a("<span>"+term_property_value+"</span>").appendTo(d.find(".taxonomy-"+c.taxonomy+"-"+f)))}),j.find(".move-out").length>0&&j.find(".move-out").appendTo(p),triggerRes=s("eventRender",c,c,j),!1===triggerRes||g.find(".fc-event-list-holder").append(j),s("loading",null,!1)})}else{c.options.widgetlist.dayspast=c.options.widgetlist.dayspast?c.options.widgetlist.dayspast:0,events=[];var C=new Date;if(C.setDate(C.getDate()-c.options.widgetlist.dayspast),a.each(e,function(a,b){if(k&&d.rendered_events.length>0)for(var e=0;e<d.rendered_events.length;e++)if(test_event=d.rendered_events[e],"function"==typeof test_event.start.getTime&&"function"==typeof b.start.getTime&&test_event.id==b.id&&test_event.start.getTime()==b.start.getTime())return;if(d.rendered_events.push(b),!(c.options.eventList&&1==parseInt(c.options.eventList.removeended)&&null!=b.end&&b.end<C)){if(c.options.eventList&&"1"==c.options.eventList.outofrange){if(null!=b.end&&b.end<d.visStart)return}else{if(b.start<d.visStart)return;if(b.start>d.visEnd)return}events[events.length]=b}}),0==events.length)return;"1"==c.options.eventList.reverse?events.sort(w):events.sort(v);var D=[],E=!(!c.options.eventList.extendedDetails||"1"!=c.options.eventList.extendedDetails),F="",B=[];if(a.each(events,function(b,e){if(!("undefined"!=typeof c.options.eventList.display&&c.options.eventList.display>0&&b>=c.options.eventList.display)){var f=h.clone();e.gcal||""==e.url?f.find(".fc-event-list-title").parent().empty().append(a("<span></span>").addClass("fc-event-list-title").html(e.title)):e.direct_link?f.find(".fc-event-list-title").html(e.title).end().find("a.fc-event-link").attr("href",e.url).end():f.find(".fc-event-list-title").html(e.title).end().find("a.fc-event-link").attr("target","").attr("href","javascript:void(0);").bind("click",function(a){var b=c.options.eventClick?c.options.eventClick:fc_click;b(e,a,d)}).end();var j=!!e.local_feed;if(E&&j&&(f.find(".fe-extrainfo-container").addClass("skip-render").addClass("ext_det_"+e.id).hide().data("ev",e).before('<div class="ext-list-loading loading-events"><div class="ext-list-loading-1 ajax-loader loading-events"><div class="ext-list-loading-2x xspinner icon-xspinner-3"></div></div></div>'),-1==a.inArray(e.id,D)&&D.push(e.id)),f.find(".fc-event-list-description").html(e.description).end(),e.description&&""==e.description.replace(" ","")&&f.find(".fc-event-list-description").addClass("rhc-empty-description"),"none"==e.fc_click_link&&f.find("a.fc-event-link").addClass("fc-no-link"),e.image&&e.image[0]?f.find("img.fc-event-list-image").attr("src",e.image[0]):f.find(".fc-event-list-featured-image").empty(),e.allDay){f.find(".fc-time").remove(),f.find(".fc-end-time").remove();var k=c.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}else{f.find(".fc-time").html(a.fullCalendar.formatDate(e.start,"h:mmtt")),f.find(".fc-end-time").html(a.fullCalendar.formatDate(e.end,"h:mmtt"));var k=c.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}if(e.start?f.find(".fc-start").html(a.fullCalendar.formatDate(e.start,k,c.options)):f.find(".fc-start").remove(),e.end?f.find(".fc-end").html(a.fullCalendar.formatDate(e.end,k,c.options)):f.find(".fc-end").parent().addClass("rhc_event-empty-taxonomy").end().remove(),f.find(".fc-event-link.fc-event-list-title").each(function(b,c){parseInt(RHC.disable_event_link)&&"javascript:void(0);"==a(c).attr("href")&&a(c).replaceWith(a(c).text())}),f.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),e.terms&&e.terms.length>0&&a.each(e.terms,function(b,c){if(f.find(".taxonomy-"+c.taxonomy).parent().find("a").length>0&&f.find(".taxonomy-"+c.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),c.name&&""!=c.name&&f.find(".taxonomy-"+c.taxonomy).length>0&&(""==c.url?a("<span>"+c.name+"</span>").appendTo(f.find(".taxonomy-"+c.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end()):a("<a>"+c.name+"</a>").attr("href",c.url).appendTo(f.find(".taxonomy-"+c.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end())),f.find(".taxonomy-"+c.taxonomy+"-gaddress").length>0&&c.gaddress&&""!=c.gaddress){f.find(".taxonomy-"+c.taxonomy+"-gaddress").parent().find("a").length>0&&f.find(".taxonomy-"+c.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var d="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(c.gaddress);a("<a>"+c.gaddress+"</a>").attr("href",d).attr("target","_blank").appendTo(f.find(".taxonomy-"+c.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}}),e.meta&&e.meta.length>0&&a.each(e.meta,function(a,b){p=".fc-event-meta-"+b[0],val=b[1],f.find(p).html(val).end()}),triggerRes=s("eventRender",e,e,f),!1===triggerRes);else{if(c.options.eventList.ShowHeader&&1==parseInt(c.options.eventList.ShowHeader)){var l=e.start;if(a.fullCalendar.formatDate(l,"yyyyMMdd")!=a.fullCalendar.formatDate(F,"yyyyMMdd")){F=l;var m=i.clone();m.find(".fc-event-list-date-header").html(a.fullCalendar.formatDate(e.start,c.options.eventList.DateFormat||"dddd MMMM d, yyyy",c.options)),g.find(".fc-event-list-holder").append(m)}}g.find(".fc-event-list-holder").append(f)}}}),D.length>0){"undefined"==typeof c.extended_detail_cache&&(c.extended_detail_cache={});var G=[];if(a.each(D,function(a,b){"undefined"==typeof c.extended_detail_cache[b]&&G.push(b)}),0==G.length)r(a,D,g,c);else{url=RHC.ajaxurl,url+="?rhc_action=extended_details",D.length>0&&a.each(D,function(a,b){url=url+"&ids[]="+b}),ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:C.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u;var H={url:url,type:"GET",dataType:"html",not_used_data:{rhc_action:"extended_details",ids:D},success:function(d){a.each(D,function(e,f){a(d).find("."+f).length>0?c.extended_detail_cache[f]=a(d).find("."+f).clone():a(b).find(".skip-render.ext_det_"+f).removeClass("skip-render").removeClass("ext_det_"+f).fadeIn("fast").parent().find(".ext-list-loading").fadeOut("fast")}),r(a,D,g,c)},error:function(){a(b).find(".skip-render").show(),a(b).parent().find(".ext-list-loading").fadeOut("fast"),r(a,D,g,c)}};a.ajax(H)}}}else d.have_events=!1,g.find(".fc-event-list-holder").append(j),g.find(".fc-no-list-events-message").show();s("loading",null,!1)}function r(a,b,c,d){a.each(b,function(b,e){"undefined"!=typeof d.extended_detail_cache[e]&&c.find(".ext_det_"+e).each(function(b,c){var f=d.extended_detail_cache[e].clone(),g=a(c).data("ev");if(f.find(".postmeta-fc_start .fe-extrainfo-value").html(a.fullCalendar.formatDate(g.start,d.options.eventList.extDateFormat||"MMMM d, yyyy",d.options)),f.find(".postmeta-fc_start_time .fe-extrainfo-value").html(a.fullCalendar.formatDate(g.start,d.options.eventList.extTimeFormat||"h:mm tt",d.options)),f.find(".postmeta-fc_start_datetime .fe-extrainfo-value").html(a.fullCalendar.formatDate(g.start,d.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",d.options)),f.find(".postmeta-fc_end .fe-extrainfo-value").html(a.fullCalendar.formatDate(g.end,d.options.eventList.extDateFormat||"MMMM d, yyyy",d.options)),f.find(".postmeta-fc_end_time .fe-extrainfo-value").html(a.fullCalendar.formatDate(g.end,d.options.eventList.extTimeFormat||"h:mm tt",d.options)),f.find(".postmeta-fc_end_datetime .fe-extrainfo-value").html(a.fullCalendar.formatDate(g.end,d.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",d.options)),f.find(".fc-button-social-panels").length>0){var h=f.find(".fc-button-social-panels");new_rhp_vars=h.data("rhp_vars"),new_rhp_vars.shareLink=g.url,new_rhp_vars.shareRedirectURI=g.url,h.data("rhp_vars",new_rhp_vars)}f.find(".fe-image-holder").RHCLink(g,a(c).closest(".fullCalendar").fullCalendar("getView")),original=a(c).replaceWith(f),f.parent().find(".ext-list-loading").fadeOut("fast")})}),a("BODY").trigger("dbox.loaded")}function s(a,b){return c.trigger.apply(c,[a,b||d].concat(Array.prototype.slice.call(arguments,2),[d]))}function t(b,c,e){b?(d.scroll_lockdown=!0,a(c.element).parents(".rhc_holder").addClass("stacking-loading")):(d.scroll_lockdown=!1,a(c.element).parents(".rhc_holder").removeClass("stacking-loading"))}function v(a,b){return a.start>b.start?1:a.start<b.start?-1:0}function w(a,b){return a.start<b.start?1:a.start>b.start?-1:0}var e,d=this;d.name="rhc_event",d.render=k,d.unselect=m,d.setHeight=n,d.setWidth=o,d.clearEvents=p,d.renderEvents=q,d.trigger=s,d.viewChanged=f,d.beforeAnimation=j,d.setEventData=g,d.clearEventData=h,d.triggerEventDestroy=i,d.element=b,d.oldView=null,d.calendar=c,fc=a.fullCalendar,d.direction=0,d.first_date=null,d.scroll_lockdown=!1,d.loading=t,d.have_events=!1,d.rendered_events=[],c.options.eventList.daysahead&&parseInt(c.options.eventList.delta)>parseInt(c.options.eventList.daysahead)&&(c.options.eventList.delta=c.options.eventList.daysahead)}function d(b,c){function f(){}function g(a){}function h(c,f){d.start=c;var g=!e;g&&(a('<div class="fc-detail-view-holder"><div class="fc-detail-view-content">TODO: a single event details. The button will be removed on the top right controls, and this view will be triggered when selecting an event.</div><div class="fc-detail-view-wp_footer" style="display:none;"></div></div>').appendTo(b),e=!0)}function i(){}function j(a){b.css("min-height","200px"),b.css("height","auto")}function k(){}function l(){a(".fc-detail-view-content").html("")}function m(){var b={id:c.last_clicked_event.id};a.post(c.options.singleSource,b,function(b){"OK"==b.R&&(0==a("body .fc-single-item-holder").length&&a("body").append('<div class="fc-single-item-holder"></div>'),a("body .fc-single-item-holder").empty(),a(b.DATA.footer).each(function(b,c){if(c.nodeName&&"SCRIPT"==c.nodeName){var d=document.createElement("script");a(c).attr("type")&&(d.type=a(c).attr("type")||""),a(c).attr("src")?d.src=a(c).attr("src")||"":d.text=a(c).html()||"",document.body.appendChild(d)}else a("body .fc-single-item-holder").append(c)}),a(".fc-detail-view-content").html(b.DATA.body))},"json")}function n(){}var e,d=this;d.name="rhc_detail",d.render=h,d.unselect=i,d.setHeight=j,d.setWidth=k,d.clearEvents=l,d.renderEvents=m,d.trigger=n,d.viewChanged=f,d.beforeAnimation=g,d.element=b}a.fullCalendar.views.WeekEventList=b,a.fullCalendar.views.rhc_event=c,a.fullCalendar.views.rhc_detail=d}(jQuery);var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;d<b;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(a){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;i<b;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function($){function allday_group(a,b){return _allday_group="undefined"!=typeof b.allday_group&&0<parseInt(b.allday_group)?parseInt(b.allday_group):0,0<_allday_group&&$.each(a,function(a,b){"undefined"!=typeof b.color&&""!=b.color&&(1==_allday_group?b.title='<span style="display:none;">'+b.color+"</span>"+b.title:2==_allday_group&&"undefined"!=typeof b.menu_order&&(b.title='<span style="display:none;">'+parseInt(b.menu_order)+"</span>"+b.title))}),a}function preload_events(o,fc_options){fc_options.preload&&$(o).find(".rhc-preload").length&&$(o).find(".rhc-preload").each(function(i,el){if(!$(el).data("preloaded")){$(el).data("preloaded",!0);try{if(cache=$(el).data("request"),cache=eval(cache),cache)if($(el).data("events")?(tmp_events=$(el).data("events"),data=eval(tmp_events)):data=$.parseJSON($(el).html()),external_source=$(el).data("external_source")||!1,"OK"==data.R){if(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url)){cache.events=data.EVENTS;var events=[];start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=rhc_events_to_fc_events(start,end,data,!0),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}else if(external_source&&"object"==typeof data&&(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url))){cache.events=data.EVENTS;var events=data;start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}catch(a){}}})}function in_rhc_events_cache(a,b,c){for(var d=0;d<rhc_events_cache.length;d++)if(rhc_events_cache[d].start<=a&&rhc_events_cache[d].end>=b&&rhc_events_cache[d].url==c)return!0;return!1}function handle_local_tz(a,b,c){if(local_tz="local_tz"in b?parseInt(b.local_tz):0,0==local_tz)return a;if("GMT_OFFSET"in c){var d=c.GMT_OFFSET*-1*60,e=(new Date).getTimezoneOffset();if(d==e)return a;for(var f=0;f<a.length;f++)if(!a[f].allDay){"object"==typeof a[f].start&&(a[f].start=date_change_offset(a[f].start,d)),"object"==typeof a[f]._start&&(a[f]._start=date_change_offset(a[f]._start,d)),"object"==typeof a[f].end&&(a[f].end=date_change_offset(a[f].end,d)),"object"==typeof a[f]._end&&(a[f]._end=date_change_offset(a[f]._end,d));var g=jQuery.fullCalendar.formatDate(a[f].start,"yyyyMMddHHmmss"),h=jQuery.fullCalendar.formatDate(a[f].end,"yyyyMMddHHmmss");g&&""!=g&&(h&&""!=h&&(g=g+","+h),a[f].event_rdate=g,a[f].url=""==a[f].url?"":_add_param_to_url(a[f].url,"event_rdate",a[f].event_rdate))}}return a}function date_change_offset(a,b){return new Date(a.getTime()-6e4*(a.getTimezoneOffset()-b))}function handle_field_map(a){return a.MAP&&a.MAP.length>0&&a.EVENTS&&a.EVENTS.length>0&&(new_events=[],jQuery.each(a.EVENTS,function(b,c){new_ev={},jQuery.each(a.MAP,function(a,b){c[b[0]]&&(new_ev[b[1]]=c[b[0]])}),"undefined"==typeof new_ev.allDay&&(new_ev.allDay=!1),new_ev.terms&&new_ev.terms.length>0&&(new_terms=[],jQuery.each(new_ev.terms,function(b,c){"object"==typeof c?new_terms[b]=c:new_terms[b]=a.TERMS[c]}),new_ev.terms=new_terms,new_terms=[],jQuery.each(new_ev.terms,function(b,c){new_term={},jQuery.each(a.MAP,function(a,b){c[b[0]]&&(new_term[b[1]]=c[b[0]])}),new_terms[new_terms.length]=new_term}),new_ev.terms=new_terms),new_events[new_events.length]=new_ev}),a.EVENTS=new_events),a}function rhc_events_to_fc_events(a,b,c,d){var e=[];if(c=handle_field_map(c),c.EVENTS.length>0&&$(c.EVENTS).each(function(c,f){if(f.premiere=!0,f.description="undefined"==typeof f.description?"":f.description,f.local_feed="undefined"==typeof f.local_feed?d:f.local_feed,(!f.color||""==f.color||"#"==f.color)&&f.terms&&f.terms.length>0)for(var g=0;g<f.terms.length;g++){var h=!!(f.terms[g].background_color&&f.terms[g].background_color.length>1)&&f.terms[g].background_color,i=!!(f.terms[g].color&&f.terms[g].color.length>1)&&f.terms[g].color;if(i=h&&!1===i?"#fff":i,h=i&&!1===h?"#fff":h,h&&i){f.color=h,f.textColor=i;break}}if("undefined"!=typeof f.start&&null!=f.start)if(f.src_start=f.start,f.fc_rrule=f.fc_rrule?f.fc_rrule:"",""==f.fc_rrule&&""==f.fc_rdate)e[e.length]=f;else{var j=!1,k=new Date($.fullCalendar.parseDate(f.start));if(f.end){var l=new Date($.fullCalendar.parseDate(f.end));j=l.getTime()-k.getTime()}var m=$.fullCalendar.parseDate(f.start);f.fc_rrule=""==f.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":f.fc_rrule;try{if(scheduler=new Scheduler(m,f.fc_rrule,!0),""!=f.fc_interval&&f.fc_exdate){var n=exdate_to_array_of_dates(f.fc_exdate);n.length>0&&scheduler.add_exception_dates(n)}if(f.fc_rdate&&""!=f.fc_rdate){var o=exdate_to_array_of_dates(f.fc_rdate);o.length>0&&scheduler.add_rdates(o)}occurrences=scheduler.occurrences_between(a,b),occurrences.length>0&&$(occurrences).each(function(a,b){var c=new Date(b),d=$.extend(!0,{},f);if(d.premiere=c.getTime()==k.getTime(),d._start=c,d.start=c,d.fc_start=$.fullCalendar.formatDate(c,"yyyy-MM-dd"),d.fc_start_time=$.fullCalendar.formatDate(c,"HH:mm:ss"),d.fc_date_time=$.fullCalendar.formatDate(c,"yyyy-MM-dd HH:mm:ss"),j){var g=c.getTime()+j,h=new Date;h.setTime(g),d._end=h,d.end=h,d.fc_end=$.fullCalendar.formatDate(h,"yyyy-MM-dd"),d.fc_end_time=$.fullCalendar.formatDate(h,"HH:mm:ss")}else d.end=d.start,d._end=d._start;d.repeat_instance=!0,d=_add_repeat_instance_data_to_event(d),e[e.length]=d}),k<=a&&l>a&&(f.start=k,f.end=l,e[e.length]=f)}catch(a){console.log(a.message,f)}}}),e.length>0&&!e[0].local_feed){e.sort(_rhc_sort_events);var f=[];$(e).each(function(a,b){if(!b.local_feed){if(f.length>0)for(var c=0;c<f.length;c++)if(cev=f[c],b.id==cev.id&&b.start.getTime()==cev.start.getTime()&&b.network==cev.network)return!0;f.push(b)}}),e=f}return e}function cb_event_render(a,b,c,d,e,f){if(a||(a=$(e.element).parents(".fullCalendar")),showothermonth=f&&f.showothermonth?parseInt(f.showothermonth):1,showothermonth=e&&e.name&&"month"==e.name?showothermonth:1,"month"==e.name&&$(d).parents(".rhcalendar.not-widget").hasClass("fc-small")&&(showothermonth=0),0==showothermonth&&c.start&&c.end&&e.start&&e.end){if(c.end.getTime()<e.start.getTime())return!1;if(c.start.getTime()>=e.end.getTime())return!1}if(0==showothermonth&&c.start&&null==c.end&&e.start&&e.end){if(c.start.getTime()<e.start.getTime())return!1;if(c.start.getTime()>=e.end.getTime())return!1}if(event_skip=f&&f.event_skip?parseInt(f.event_skip):0,event_skip&&("undefined"==typeof e.event_skip&&(e.event_skip=event_skip),e.event_skip>0))return e.event_skip--,!1;if(1==parseInt(f.upcoming)){var g=new Date;if(c.allDay&&g.setHours(0,0,0,0),c.start.getTime()<g.getTime())return!1}if(norepeat=e.get_norepeat?e.get_norepeat(f.norepeat||!1):f.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&e&&c&&c.id){if(e.rendered=e.rendered?e.rendered:[],-1!=$.inArray(c.id,e.rendered))return!1;e.rendered.push(c.id)}if(f.taxonomycolor&&"1"==f.taxonomycolor&&c.terms){var h=[];$.each(c.terms,function(a,b){str="tax_"+b.taxonomy+"_"+b.slug,str=str.replace(/ /g,"_"),h.push(str)}),h.length>0&&$(d).addClass(h.join(" "))}if(c.venue_directory&&"rhc_gmap"!=e.name)return!1;if("rhc_gmap"==e.name&&c.start)if(1==parseInt(f.gmap_view.upcoming)){if(c.start.getTime()<e.visStart.getTime())return!1}else if(c.end&&2==parseInt(f.gmap_view.upcoming)&&c.end.getTime()<e.visStart.getTime())return!1;var i=$(a).data("rhc_tax_filters");if(i&&i.length>0){var j=!0,k=[],l=[];if($.each(c.terms,function(a,b){$.each(i,function(a,c){-1==$.inArray(c.taxonomy,l)&&l.push(c.taxonomy),c.taxonomy==b.taxonomy&&(b.gaddress&&b.gaddress==c.term?(j=!1,k.push(b.taxonomy)):b.description&&b.description==c.term?(j=!1,k.push(b.taxonomy)):b.name&&b.name==c.term&&(j=!1,k.push(b.taxonomy)))})}),!j&&l.length>0&&$.each(l,function(a,b){-1==$.inArray(b,k)&&(j=!0)}),j)return!1}if(max_events=f&&f.max_events?parseInt(f.max_events):0,max_events){if("undefined"==typeof e.max_events&&(e.max_events=max_events,e.rendered_events_count=0),e.rendered_events_count>=e.max_events)return!1;e.rendered_events_count++}if(b){var n=0;if(c.start&&c.end){var o=new Date(c.start),p=new Date(c.end);o.setHours(0,0,0,0),p.setHours(0,0,0,0),n=Math.floor((p.getTime()-o.getTime())/864e5)}var q=c._start.getDate();if(0==n)$(e.element).find(".fc-day-number").each(function(a,b){q==$(b).html()&&(c.start.getMonth()==e.start.getMonth()?$(b).parent().parent().hasClass("fc-other-month")||$(b).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"):$(b).parent().parent().hasClass("fc-other-month")&&$(b).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"))});else{var o=new Date(c.start),p=new Date(c.start);o.setHours(0,0,0),p.setHours(23,59,59),$(e.element).find(".fc-day-number").each(function(a,b){current_date_str=$(b).closest(".fc-day").data("date"),current_date=new Date(current_date_str+"T00:00:00Z"),current_date.setTime(current_date.getTime()+60*o.getTimezoneOffset()*1e3),current_date.getTime()<=p.getTime()&&current_date.getTime()>=o.getTime()&&$(b).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none")})}return!1}if(sidelist_events.push(c),f.matchBackground&&"1"==f.matchBackground){loop_date=new Date(c._start),compare_date=c._end||c._start;for(var r=0;loop_date<=compare_date&&(sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",original_bg=$(e.element).find(sel).css("background-color"),$(e.element).find(sel).data("original_bg",original_bg).addClass("bg_matched").css("background-color",$(d).length&&$(d).get(0).tagName?$(d).css("background-color")||"":""),loop_date.setDate(loop_date.getDate()+1),!(r++>5e3)););}if(render_something=!1,f.month_event_image&&"1"==f.month_event_image&&"month"==e.name&&c.month_image&&c.month_image[0]&&(loop_date=new Date(c._start),sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",ratio=c.month_image[2]/c.month_image[1],container_w=e.element.find(sel).outerWidth(),_w=container_w,_h=_w*ratio,$(d).addClass("has-fc-image").find(".fc-event-inner").prepend($("<div></div>").addClass("fc-image-cont").append($("<img />").attr("src",c.month_image[0]).attr("height",parseInt(_h)).css("height",parseInt(_h)).addClass("fc-image"))),render_something=!0),"month"==e.name){if(f.render_events="undefined"==typeof f.render_events?1:f.render_events,0==parseInt(f.render_events)){if(!render_something)return!1;$(d).find(".fc-event-title").hide(),$(d).find(".fc-event-time").hide(),$(d).css("background-color","transparent")}"undefined"==typeof f.fixed_title||0==f.fixed_title.length||($(d).find(".fc-event-time").html("&nbsp;"),$(d).find(".fc-event-title").html(f.fixed_title))}f.early_dynamic_tooltip&&"1"==f.early_dynamic_tooltip&&cb_event_mouseover(c,null,e),f.tooltip_close_on_title_leave&&parseInt(f.tooltip_close_on_title_leave)&&$(d).mouseleave(function(a){handle=setTimeout(function(){0==$(".fc-event.event-hovered").length&&$(".fct-tooltip").is(":visible")&&($(".fct-tooltip:visible").first().is(":hover")||$(".fct-tooltip:visible").trigger("close-tooltip"))},200)})}function hide_widget_event_list(a,b,c,d,e,f){var g=jQuery(a).parents(".rhc_holder").find(".rhc_calendar_widget_day_click_holder");g.children().length>0&&g.children().fadeOut("fast",function(){})}function cb_event_render_all(a,b,c,d,e,f){if("undefined"==typeof a&&(a=$(e.element).parents(".rhcalendar.rhc_holder")),norepeat=e.get_norepeat?e.get_norepeat(f.norepeat||!1):f.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&e&&(e.rendered=e.handle_rendered?e.handle_rendered():[]),has_sidelist_holder=$(a).parent().find(".rhc-sidelist").length>0,events=sidelist_events||[],events.length>0){var g=$(a).parent().find(".rhc-sidelist-holder .rhc-sidelist-tab-label");g.length>0&&f.sidelist&&f.sidelist.labels&&f.sidelist.labels.tab&&g.html(f.sidelist.labels.tab),render_sidelist(a,events,e.name,f)}sidelist_events=[],-1==$.inArray(e.name,["rhc_event","rhc_gmap"]),$("body").trigger("cb_view_display",[b,a,e,d])}function render_tax_filters(a){var b=a&&a.taxfilter?a.taxfilter:{holder_class:"rh-flat-ui fc-head-control",selectpicker:!0,size:10,menu_class:"tax_filter_menu_medium",multiple:!(!a.tax_filter_multiple||!parseInt(a.tax_filter_multiple))},c=$(this);a.btn_tax_parent_only?arr_btn_tax_parent_only=a.btn_tax_parent_only.split(","):arr_btn_tax_parent_only=[],$(this).find("[class*='fc-button-btn_tax_']").length>0&&c.addClass("rhc-has-tax-filter"),$(this).find("[class*='fc-button-btn_tax_']").each(function(a,d){var e=(d.className.match(/(^|\s)(fc\-button\-btn_tax_([^\s]*))/)||[,,""])[3],f=$('<select class="selectpicker"></select>');if(b.multiple&&f.attr("multiple",!0),f.attr("data-taxonomy",e).append($('<option value="">'+$(this).html()+"</option>")),c.find(".fbd-filter[data-taxonomy='"+e+"']").each(function(a,b){var c=$(b).data("bgcolor")||"transparent";if(arr_btn_tax_parent_only.length>0&&parseInt($(b).data("parent")))for(var d=0;d<arr_btn_tax_parent_only.length;d++)if(e==arr_btn_tax_parent_only[d])return;f.append($('<option data-bgcolor="'+c+'" value="'+$(b).val()+'">'+$(b).closest("label").find(".fbd-term-label").html()+"</option>"))}),f.find("option").length>1?($(d).replaceWith(f),f.wrap($('<div class="tax_filter_holder fc-button fc-state-default"></div>').addClass(b.holder_class).addClass(b.menu_class))):($(d).remove(),console.log("Taxonomy filter added to calendar, but disabled in options.  Also turning off the hierarchical filter can help.")),b.selectpicker){f.selectpicker({style:"btn-small btn-taxfilter btn_tax",size:b.size});var g=!1,h=f.parent().find(".dropdown-menu");f.find("option").each(function(a,b){bgcolor=$(b).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(g=!0),h.find('li[rel="'+a+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),g&&h.addClass("rhc-with-tax-color")}f.unbind("change",tax_filter_change).bind("change",{taxonomy:e,holder:c},tax_filter_change)})}function tax_filter_change(a){$(this).attr("rel",$(a.data.holder).attr("id"));var b=$(this).val();b=null==b?"":b;var c=[];return"string"==typeof b?c.push(b):$.each(b,function(a,b){return""==b||void c.push(b)}),a.data.holder.find(".fbd-filter[data-taxonomy='"+a.data.taxonomy+"']").each(function(a,b){-1==$.inArray($(b).val(),c)?$(b).attr("checked",!1):$(b).attr("checked",!0)}),methods.apply_filter.apply($(this),[!1]),!0}function render_sidelist(a,b,c,d){$.each(b,function(b,e){var f=e.skip_sidelist||!1;!f&&"rhc_gmap"==c&&has_sidelist_holder&&d.sidelist&&d.sidelist.template&&$(d.sidelist.template).length>0&&($(a).parent().find(".rhc-sidelist-holder").addClass("has-events"),sidelist=$(a).parent().find(".rhc-sidelist"),render_sidelist_event(sidelist,e,d))}),$(".rhc-sidelist-event-item").show()}function render_sidelist_event(a,b,c){jQuery(document).ready(function(d){var e=new Date(b.start),f=new Date;if(f.setHours(0,0,0,0),e.getTime()<f.getTime())return!1;var g=d(c.sidelist.template).clone();if(g.attr("id","").addClass("rhc-sidelist-event-item"),b.url&&""!=b.url&&"javascript:void(0);"!=b.url){var h=c.sidelist.link_target||"_BLANK";h=""==h?"_BLANK":h;var i=d('<a href="'+b.url+'">'+b.title+"</a>").attr("target",h).attr("href","javascript:void(0);").bind("click",function(a){
var d=c.eventClick?c.eventClick:fc_click;b.fc_click_link="page",b.fc_click_target=h,d(b,a,null)})}else var i=d("<span></span").html(b.title);g.find(".rhc-sidelist-title").empty().append(i);var j=g.find(".rhc-sidelist-date").html();if(g.find(".rhc-sidelist-date").html(d.fullCalendar.formatDate(b.start,j,c)),b.image&&b.image[0]&&""!=b.image[0])var k=d("<img></img>").attr("src",b.image[0]);b.venue_directory&&g.addClass("venue-directory-item").find(".rhc-sidelist-date").hide(),g.find(".rhc-sidelist-image").append(k),a.append(g.show())})}function cb_events_loading(a,b,c,d,e,f){f.for_widget?(d.loading&&d.loading(c,d,f),handle_loading_overlay(a,b,c,d,e,f),c?$(a).find(".fc-have-event").each(function(a,b){$(this).removeClass("fc-state-highlight").removeClass("fc-have-event").css("background-image","")}):cb_events_loaded(b,e,d,f)):(d.loading&&d.loading(c,d,f),c||cb_events_loaded(b,e,d,f),handle_loading_overlay(a,b,c,d,e,f))}function handle_loading_overlay(a,b,c,d,e,f){"undefined"!=typeof f.loadingOverlay&&"1"==f.loadingOverlay&&(c?(0==$(a).find(".fc-content .fc-view-loading").length&&$(a).find(".fullCalendar .fc-content").prepend($('<div class="fc-view-loading"></div>').hide().append('<div class="fc-view-loading-1 ajax-loader"><div class="fc-view-loading-2x xspinner icon-xspinner-3"></div></div>')),$(a).addClass("is-loading").find(".fc-view-loading").addClass("loading-events").find(".ajax-loader").addClass("loading-events").end().stop().fadeIn()):$(a).removeClass("is-loading").find(".fc-view-loading").stop().fadeOut("fast",function(){$(a).find().remove(".fc-view-loading"),"rhc_event"==d.name&&$(a).find(".fc-view-rhc_event").css("min-height","")}))}function cb_events_loaded(a,b,c,d){if(calendar=a,(!d.tax_filter||"1"==d.tax_filter)&&0!=$(calendar).find(".fc-head-control").length){var e=$(calendar).fullCalendar("clientEvents"),f=[];if($.each(e,function(a,b){b.terms&&b.terms.length>0&&$.each(b.terms,function(a,c){if(d.tax_filter_include&&d.tax_filter_include.length>0){if(-1==$.inArray(c.taxonomy,d.tax_filter_include))return}else if(d.tax_filter_skip&&-1!=$.inArray(c.taxonomy,d.tax_filter_skip))return;for(var e=-1,g=0;g<f.length;g++)if(f[g].taxonomy==c.taxonomy){e=g;break}var h="";h=c.gaddress?c.gaddress:c.description?c.description:c.name?c.name:"unknown";var i={value:h,order:c.term_priority?parseInt(c.term_priority):0,local_feed:b.local_feed,term:c};e==-1?f[f.length]={taxonomy:c.taxonomy,label:c.taxonomy_label,terms:[h],uterms:[i],print_priority:c.print_priority?parseInt(c.print_priority):0,filter_type:c.filter_type?c.filter_type:"",color:c.color||"",background_color:c.background_color||""}:-1==$.inArray(h,f[e].terms)&&(f[e].terms.push(h),f[e].uterms.push(i))})}),d.tax_filter_include&&d.tax_filter_include.length>0&&f.length>0&&(new_taxonomies=[],$.each(d.tax_filter_include,function(a,b){$.each(f,function(a,c){b==c.taxonomy&&(new_taxonomies[new_taxonomies.length]=c)})}),f=new_taxonomies),f.length>0){var g=$(calendar).find(".fc-head-control .tax_filter_holder");g.empty(),g.parents(".fc-head-control").removeClass("has-filters"),d.btn_tax_parent_only?arr_btn_tax_parent_only=d.btn_tax_parent_only.split(","):arr_btn_tax_parent_only=[],$.each(f,function(a,b){if(0!=b.terms.length){b.uterms.sort(cb_sort_tax_filter),b.terms=[];var c=!1,d=!1;$.each(b.uterms,function(a,e){c&&c!=e.order&&(d=!0),c=e.order,b.terms.push(e.value)}),d||(b.terms.sort(),b.uterms.sort(cb_sort_alphanum));var e=$("<select></select>").attr("title",b.label).attr("multiple","multiple").addClass("tax_filter_field").addClass("selectpicker").data("taxonomy",b.taxonomy).data("taxonomy_filter_type",b.filter_type).append('<option value="">'+b.label+"</option>");$.each(b.uterms,function(a,c){if(arr_btn_tax_parent_only.length>0&&parseInt(c.term.parent))for(var d=0;d<arr_btn_tax_parent_only.length;d++)if(b.taxonomy==arr_btn_tax_parent_only[d])return;bgcolor=c.term.background_color||"transparent",option_label=c.term&&c.term.name?c.term.name:c.value,_option=$('<option value="'+c.value+'">'+option_label+"</option>").data("term",c),_option.attr("data-bgcolor",bgcolor),e.append(_option)}),e.appendTo(g).wrap('<div class="tax_filter_item_holder"></div>').selectpicker({style:"btn-small btn-taxfilter"});var f=!1,h=e.parent().find(".dropdown-menu");e.find("option").each(function(a,b){bgcolor=$(b).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(f=!0),h.find('li[rel="'+a+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),f&&h.addClass("rhc-with-tax-color"),g.parents(".fc-head-control").addClass("has-filters")}}),g.find(".tax_filter_field").change(function(a){var b=$(this).parents(".fullCalendar"),c=[];$(b).find(".tax_filter_field").each(function(a,b){$(b).find("option:selected").each(function(a,d){var e=$(d).attr("value");if(""!=e){var f=$(b).data("taxonomy_filter_type"),g=$(d).data("term");c.push({taxonomy:$(b).data("taxonomy"),term:e,filter_type:f,slug:g.term&&g.term.slug?g.term.slug:null,term_id:g.term&&g.term.term_id?g.term.term_id:null,local_feed:g.local_feed})}})}),$(b).parent().find(".rhc-sidelist").length>0&&($(b).parent().find(".rhc-sidelist-holder").removeClass("has-events"),$(b).parent().find(".rhc-sidelist").empty()),args={tax_filters:c},d.show_ad&&(args.show_ad=d.show_ad),$(b).data("rhc_tax_filters",c).fullCalendar("rerenderEvents"),$("BODY").trigger("rhc_filter",args)})}}}function cb_view_display(a,b,c,d){b||(b=$(c.element).parents(".fullCalendar")),set_fc_small(b);var e=$(b).fullCalendar("getView");"rhc_gmap"==e.name?$(b).find(".fc-head-control").addClass("show-control"):$(b).find(".fc-head-control").removeClass("show-control"),"rhc_event"==e.name?$(d).parents(".rhc_holder").addClass("view-rhc_event"):$(d).parents(".rhc_holder").removeClass("view-rhc_event"),$(b).data("rhc_tax_filters",[]),$(b).find(".tax_filter_field").each(function(a,b){$(b).val("")});var f=new Date;if(c.visStart<=f&&c.visEnd>=f?$(d).parents(".rhc_holder").addClass("has-current-date").removeClass("not-current-date"):$(d).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),"month"==c.name&&$(d).parents(".rhc_holder").find(".fc-today").length>0&&$(d).parents(".rhc_holder").find(".fc-today").is(".fc-other-month")&&$(d).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),$(d).parents(".rhc_holder").is(".flat-ui-cal")){var g=$(b).parents(".rhc_holder").data("Calendarize"),h=g.modes[g.mode].options;if($(d).parents(".rhc_holder").is(".has-current-date")){try{var i=$("<div/>").html(h.widget_hformat).text()}catch(a){var i=null}var j=i||"'<span class=''fuiw-dayname''>'dddd'</span><span class=''fuiw-month''>'MMMM'</span><span class=''fuiw-year''>'yyyy'</span><span class=''fuiw-day''>'d'</span>'";$(b).find(".fc-header-title h2").html($.fullCalendar.formatDate(f,j,h))}else{str=$(b).find(".fc-header-title h2").html(),str=str.trim();var k=str.split(" ");2==k.length&&(j=isNaN(k[1])?"<span class='fuiw-month'>"+k[1]+"</span><span class='fuiw-year'>"+k[0]+"</span>":"<span class='fuiw-month'>"+k[0]+"</span><span class='fuiw-year'>"+k[1]+"</span>",$(b).find(".fc-header-title h2").html(j))}_skip=!(!h.widget_onechardaylabel||1!=parseInt(h.widget_onechardaylabel)),_skip||$(b).find(".fc-day-header").each(function(a,b){$(b).html($(b).html().substring(0,1))})}}function cb_sort_tax_filter(a,b){return a.order>b.order?1:a.order<b.order?-1:0}function cb_sort_alphanum(c,d){a=c.value.toString(),b=d.value.toString();var e=/[^a-zA-Z]/g,f=/[^0-9]/g,g=a.replace(e,""),h=b.replace(e,"");if(g===h){var i=parseInt(a.replace(f,""),10),j=parseInt(b.replace(f,""),10);return i===j?0:i>j?1:-1}return g>h?1:-1}function add_footer_button(a){var b=$.extend({calendarize:null,calendar:null,e:null,tm:"fc",buttonName:"undefined",label:"",buttonClick:function(a,b,c){}},a);tm=b.tm;var c=$("<span class='fc-button fc-button-"+b.buttonName+" "+tm+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+b.label+"</span><span class='fc-button-effect'><span></span></span></span></span>");c&&(c.click(function(a){c.hasClass(tm+"-state-disabled")||b.buttonClick(this,a,b)}).mousedown(function(){c.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){c.removeClass(tm+"-state-down")}).hover(function(){c.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){c.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(b.e),c.addClass(tm+"-corner-left"),c.addClass(tm+"-corner-right"))}function ical_footer_button_click(a,b,c){var d=c.calendarize;if(f,$(a).parent().find(".ical-tooltip").length>0)$(a).parent().find(".ical-tooltip").remove();else{var e=$(d).data("Calendarize"),g=e.modes[e.mode].options,h=g.events_source+g.events_source_query;h=h.replace("get_calendar_events","get_icalendar_events");var i=h+"&ics=1",j=g.feed&&""!=g.feed?"&feed="+g.feed:"";h+=j,i+=j;var k=$(".ical-tooltip-template").first().clone();k.removeClass("ical-tooltip-template").addClass("ical-tooltip").addClass("rhc-ical-dialog").find(".ical-url").html(h).end().find(".ical-clip").attr("href",h).on("click",function(a){return $(this).focus(),$(this).select(),!1}).end().find(".ical-close").on("click",function(a){$(this).parents(".fc-footer").find(".fc-button-icalendar").trigger("click")}).end().find(".ical-ics").attr("href",i).end().show(),$(a).after(k),setTimeout(function(){k.addClass("rhc-ical-dialog-open")},50)}}function cb_dayclick(a,b,c,d,e,f){if(e.dayclick){var g=!(!e.dayclick||""==e.dayclick||!window[e.dayclick])&&window[e.dayclick];if(g)return g(a,b,c,d,e,f)}else{var g=!(!e.widget_dayclick||""==e.widget_dayclick||!window[e.widget_dayclick])&&window[e.widget_dayclick];if(g)calendar_widget_day_click(a,b,c,d,rhc_events_cache,e,f);else if(e.widget_link){if(e.widget_link_view)var h=e.widget_link_view;else var h="agendaDay";$('<form method="post" />').attr("action",e.widget_link).append('<input type="hidden" name="gotodate" value="'+$.fullCalendar.formatDate(a,"yyyy-MM-dd")+'" />').append('<input type="hidden" name="defaultview" value="'+h+'" />').append('<input type="hidden" name="fcalendar" value="'+(e.ev_calendar?e.ev_calendar:"")+'" />').append('<input type="hidden" name="fvenue" value="'+(e.ev_venue?e.ev_venue:"")+'" />').append('<input type="hidden" name="forganizer" value="'+(e.ev_organizer?e.ev_organizer:"")+'" />').appendTo(f).submit()}}}var methods={init:function(b){function d(b,c){if(b.hasClass("fbd-cell")||(b=b.parents(".fbd-cell")),c.hasClass("fbd-checked"))var d={opacity:0,left:-30};else var d={opacity:0,left:30};var e="linear",f="fast";if(0==c.find(".fbd-cell").length)$(b).animate(d,f,e,function(){$(this).appendTo(c).css("left",d.left*-1).animate({opacity:1,left:0})});else{var g=c.find(".fbd-cell");if(parseInt($(b).data("tab-index"))>parseInt($(g[g.length-1]).data("tab-index")))$(b).animate(d,f,e,function(){$(this).appendTo(c).css("left",d.left*-1).animate({opacity:1,left:0})});else if(parseInt($(b).data("tab-index"))<parseInt($(g[0]).data("tab-index")))$(b).animate(d,f,e,function(){$(g[0]).before(b).prev().css("left",d.left*-1).animate({opacity:1,left:0})});else for(a=0;a<g.length;a++){var h=g[a];if(parseInt($(b).data("tab-index"))>parseInt($(g[a]).data("tab-index"))&&parseInt($(b).data("tab-index"))<parseInt($(g[a+1]).data("tab-index"))){$(b).animate(d,f,e,function(){$(h).after($(this).css("left",d.left*-1).animate({opacity:1,left:0}))});break}}}}if("undefined"!=typeof b){var c=$.extend({editable:!1,mode:"view"},b);return $(".fc-dialog").CalendarizeDialog(),this.each(function(){var a=$(this).data("Calendarize");if(!a){if($(this).data("Calendarize",c).Calendarize("mode",c.mode),0==$(this).find(".rhc-sidelist").length&&($('<div class="rhc-sidelist-holder"><div class="rhc-sidelist-tab"><div class="rhc-sidelist-tab-label"></div></div><div class="rhc-sidelist-head"></div><div class="rhc-sidelist"></div></div>').appendTo(this),$(this).find(".rhc-sidelist-tab").click(function(a){$(this).parents(".rhc-sidelist-holder").toggleClass("sidelist-open")}),parseInt(c.modes[c.mode].options.sidelist.open)&&$(this).find(".rhc-sidelist-tab").trigger("click")),0==$(this).find("fullCalendar > .fc-head-control").length){var b=".fc-header";$(this).find(b).length>0&&($(this).find(b).after('<div class="fc-head-control rh-flat-ui"><div class="tax_filter_nav"><a href="#" class="tax_filter_previous btn btn-small btn-taxfilter fui-arrow-left"></a></div><div class="tax_filter_holder_viewport"><div class="tax_filter_holder"></div></div></div>'),$(this).find(".tax_filter_previous").click(function(a){var b=$(this).parents(".fc-head-control").find(".tax_filter_holder");if(b.stop(!1,!0),b.find(".tax_filter_item_holder").length>0){var c=b.find(".tax_filter_item_holder").first();c.stop(!1,!0);var d=-1*c.outerWidth(!0),e=c.css("opacity");c.animate({opacity:0},400,"swing"),b.animate({"margin-left":d},500,"swing",function(){c.stop(!1,!0).appendTo(b).css("opacity",e),$(this).css("margin-left",0)})}}))}0==$(this).find(".fc-lower-head-tools").length&&($(this).find(".fc-header").after('<div class="fc-lower-head-tools"></div>'),0==$(this).find(".fc-lower-head-tools .fc-filters-dialog").length&&$(this).find(".fc-filters-dialog-holder .fc-filters-dialog").clone().appendTo($(this).find(".fc-lower-head-tools")));var e=.6*parseInt($(this).find(".fc-content").innerHeight());e=e<300?300:e,$(this).find(".fc-lower-head-tools .fc-filters-dialog").find(".fbd-unchecked").css("max-height",e+"px"),$(this).find(".fc-filters-dialog .fbd-tabs").on("click",function(a){$(this).parent().parent().find(".fbd-tabs").removeClass("fbd-active-tab").end().find(".fbd-tabs-panel").hide().end().find($(this).find("a").data("tab-target")).show(),$(this).addClass("fbd-active-tab")}).first().trigger("click"),$(this).find('.fbd-cell input[type="checkbox"]').attr("checked",!1),$(this).find('.fbd-cell input[type="checkbox"]').on("click",function(a){if($(this).is(":checked"))var b=$(this).parent().parent().parent().parent().find(".fbd-checked");else var b=$(this).parent().parent().parent().parent().find(".fbd-unchecked");d($(this).parent().parent(),b)}),$(this).find(".fullCalendar .fbd-dg-apply,.fullCalendar .fbd-dg-remove").attr("rel",$(this).attr("id")),$(this).find(".fullCalendar .fbd-dg-apply").on("click",function(a){return methods.apply_filter.apply($(this),[])}),$(this).find(".fbd-close-tooltip a").unbind("click").click(function(a){$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fbd-dg-remove").on("click",function(a){$(this).parents(".rhc_holder").find("input[name=s]").val("").trigger("change"),$("#"+$(this).attr("rel")).find("input[type=checkbox].fbd-filter").each(function(a,b){if("undefined"!=typeof $(b).attr("checked")){$(b).attr("checked",!1);var c=$(this).parent().parent().parent().parent().find(".fbd-unchecked");d($(this).parents(".fbd-cell"),c)}}).end().find(".fbd-dg-apply").trigger("click"),$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fc-header").on("click",function(a){$(".fct-tooltip").trigger("close-tooltip")}),$(document).keyup(function(a){27==a.keyCode&&($(".fct-tooltip").trigger("close-tooltip"),$(".fc-filters-dialog:visible").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){$(this).hide()}))}),0==$(this).find("fc-view-loading-bottom").length&&$(this).find(".fullCalendar .fc-footer").before($('<div class="fc-view-loading-bottom"></div>').append($('<div class="fc-view-loading-bottom-1"><div class="fc-view-loading-bottom-2 fc-next-arrow"></div></div>').click(function(a){$(this).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next")}))),$(this).trigger("rhc_loaded")}})}},mode:function(a){var b=this,c=$(this).data("Calendarize");if(c&&c.modes){var d=$.extend(c.common,c.modes[a].options);preload_events(this,d),d.for_widget?(d.eventRender=function(a,b,c){return cb_event_render(i,!0,a,b,c,d)},d.eventAfterAllRender=function(a){return hide_widget_event_list(i,!1,null,null,a,d),cb_event_render_all(i,!0,null,null,a,d)},d.dayClick=function(a,c,e,f){return cb_dayclick(a,c,e,f,d,b)}):(d.eventRender=function(a,b,c){return"rhc_grid"!=c.name&&$(".fc-event-title",b).html(a.title),cb_event_render(i,!1,a,b,c,d)},d.eventAfterAllRender=function(a){return cb_event_render_all(i,!1,null,null,a,d)}),d.loading=function(a,c){return cb_events_loading(b,this,a,c,i,d)},d.eventDataTransform=function(a){if(a.start&&a.start.getFullYear){a.terms||(a.terms=[]);var b=parseInt(a.start.getMonth()),c={filter_type:"AND",term_priority:b,description:$.fullCalendar.formatDate(a.start,"MMMM",d),taxonomy:"core_month",taxonomy_label:d.tax_filter_label&&d.tax_filter_label.month?d.tax_filter_label.month:"month",slug:$.fullCalendar.formatDate(a.start,"M",d)};a.terms.unshift(c);var e=a.start.getFullYear(),c={filter_type:"AND",term_priority:parseInt(e),description:e,taxonomy:"core_year",taxonomy_label:d.tax_filter_label&&d.tax_filter_label.year?d.tax_filter_label.year:"year",slug:parseInt(e)};if(a.terms.unshift(c),a.end){for(year_end=a.end.getFullYear(),current_year=e,f=0;f++<10&&year_end>current_year;){current_year++;var c={filter_type:"AND",term_priority:parseInt(current_year),description:current_year,taxonomy:"core_year",taxonomy_label:d.tax_filter_label&&d.tax_filter_label.year?d.tax_filter_label.year:"year",slug:parseInt(current_year)};a.terms.unshift(c)}if(month_end=parseInt(a.end.getMonth()),start_date=new Date(e,b,15,0,0,0,0),end_date=new Date(year_end,month_end,15,0,0,0,0),current_date=new Date(new Date(start_date).setMonth(start_date.getMonth()+1)),end_date.getTime()>start_date.getTime())for(var f=0;f<11;f++){var c={filter_type:"AND",term_priority:parseInt(current_date.getMonth()),description:$.fullCalendar.formatDate(current_date,"MMMM",d),taxonomy:"core_month",taxonomy_label:d.tax_filter_label&&d.tax_filter_label.month?d.tax_filter_label.month:"month",slug:$.fullCalendar.formatDate(current_date,"M",d)};if(a.terms.unshift(c),!(end_date.getTime()>current_date.getTime()))break;current_date=new Date(new Date(current_date).setMonth(current_date.getMonth()+1))}}}return a};var g=function(a,b,c){$.fn.Calendarize.events_source(a,b,c,d)};d.eventSources=[],"1"!=d.json_only&&d.eventSources.push(g),d.json_feed&&d.json_feed.length>0&&("1"==d.json_only&&(d.events=null,d.singleSource=null),d.json_feed&&d.json_feed.length>0&&$.each(d.json_feed,function(a,b){if(b.rhc_feed&&"1"==b.rhc_feed){var c=function(a,c,e){$.fn.Calendarize.rhc_feed_src(a,c,e,b,d)};d.eventSources[d.eventSources.length]=c}else{var e=function(a,c,e){$.fn.Calendarize.ext_events_source(a,c,e,b,d)};d.eventSources[d.eventSources.length]=e}})),d.viewRender=function(a,b){cb_view_display(d.for_widget,i,a,b)},d.eventMouseover=function(a,b,c){cb_event_mouseover(a,b,c),d.tooltip_on_hover&&"1"==d.tooltip_on_hover&&$(b.target).closest("a").click(),$(b.target).closest("a").addClass("event-hovered")},d.eventMouseout=function(a,b,c){$(b.target).closest("a").removeClass("event-hovered")},d.calendar_id=$(this).attr("id"),f=$(this).find(".fullCalendar").fullCalendar(d),c.editable&&0==f.find(".fc-edit-tools").length&&f.prepend('<div class="fc-edit-tools"></div>'),0==f.find(".fc-footer").length&&(f.append('<div class="fc-footer"></div>'),d.icalendar_align&&$(".fc-footer").css("text-align",d.icalendar_align).addClass("dlg-align-"+d.icalendar_align)),d.header&&0==(d.header.center+d.header.left+d.header.right).length&&($(this).find(".fc-header").css("display","none"),$(this).find(".fc-edit-tools").css("display","none"),$(this).find(".fc-head-control").css("display","none"),$(this).find(".fc-lower-head-tools").css("display","none"),$(this).find(".fc-header").attr("hello",1));var h=f.find(".fc-footer"),i=f,j=d.theme?"ui":"fc";if($(".ical-tooltip-template").length>0){var k=$(".ical-tooltip-template").first().data("button_text");add_footer_button({calendar:f,calendarize:b,e:h,tm:j,label:k,buttonName:"icalendar",buttonClick:ical_footer_button_click})}d.gotodate&&""!=d.gotodate&&$(this).find(".fullCalendar").fullCalendar("gotoDate",$.fullCalendar.parseDate(d.gotodate)),$(this).find(".fullCalendar").data("starting_date",$(this).find(".fullCalendar").fullCalendar("getDate")),render_tax_filters.apply(this,[d])}},destroy:function(){return this.each(function(){var a=$(this),b=a.data("Calendarize");$(window).unbind(".Calendarize"),b.Calendarize.remove(),a.removeData("Calendarize")})},apply_filter:function(a){return a="undefined"==typeof a||a,this.each(function(){var b="#"+$(this).attr("rel");$(b+" .fullCalendar").find(".bg_matched").each(function(a,b){$(b).css("background-color",$(b).data("original_bg")||"")});var c=[];$(b+" .fullCalendar").find(".fbd-filter-group").each(function(a,b){var d=[];$(b).find("input[type=checkbox].fbd-filter:checked").each(function(a,b){d[d.length]=$(b).val()}),d.length>0&&(c[c.length]={taxonomy:$(this).data("taxonomy"),terms:d.join(","),terms_array:d})});var d=$(b).data("Calendarize"),e=d.modes[d.mode].options;e.calendar_id=$(b).attr("id");var f=$(b+" .fullCalendar"),g=f.fullCalendar("getView");g.clear_events=!0;var h="";if(c&&$.each(c,function(a,b){h+=e.replace_square_brackets?"&tax%5B"+b.taxonomy+"%5D="+b.terms:"&tax["+b.taxonomy+"]="+b.terms}),$(b).find(".fc-lower-head-tools  input[name=s]").length){var i=$(b).find(".fc-lower-head-tools  input[name=s]").val();""!=i&&(h+="&s="+escape(i))}e.events_source_query_original=e.events_source_query_original?e.events_source_query_original:e.events_source_query,""!=h?(f.fullCalendar("removeEventSources"),e.events_source_query=e.events_source_query_original+h):(f.fullCalendar("removeEventSources"),e.events_source_query=e.events_source_query_original);var j=function(a,b,c){$.fn.Calendarize.events_source(a,b,c,e)};if(f.fullCalendar("addEventSource",j),0==c.length)e.json_feed&&e.json_feed.length>0&&$.each(e.json_feed,function(a,b){if(b.rhc_feed&&"1"==b.rhc_feed){var c=function(a,c,d){$.fn.Calendarize.rhc_feed_src(a,c,d,b,e)};f.fullCalendar("addEventSource",c)}else{var d=function(a,c,d){$.fn.Calendarize.ext_events_source(a,c,d,b,e)};f.fullCalendar("addEventSource",d)}});else{var k=[];$.each(c,function(a,b){$.each(b.terms_array,function(a,c){e.json_feed&&e.json_feed.length>0&&$.each(e.json_feed,function(a,d){if(!($.inArray(d,k)>-1)&&d.terms&&d.terms.length>0)for(var a=0;a<d.terms.length;a++)if(d.terms[a].taxonomy==b.taxonomy&&d.terms[a].slug==c)return void(-1==$.inArray(d,k)&&k.push(d))})})}),$.each(k,function(a,b){if(b.rhc_feed&&"1"==b.rhc_feed){var c=function(a,c,d){$.fn.Calendarize.rhc_feed_src(a,c,d,b,e)};f.fullCalendar("addEventSource",c)}else{var d=function(a,c,d){$.fn.Calendarize.ext_events_source(a,c,d,b,e)};f.fullCalendar("addEventSource",d)}})}"rhc_gmap"!=g.name&&"rhc_grid"!=g.name||$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),a&&$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click"),$(this).closest(".fullCalendar").find(".fc-no-list-events-message").hide()})}};$.fn.Calendarize=function(a){return methods[a]?methods[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery.Calendarize"):methods.init.apply(this,arguments)};var rhc_events_cache=[];$.fn.Calendarize.rhc_feed_src=function(a,b,c,d,e){jQuery(document).ready(function(f){for(var g=!0,h=[],i=new Date,j=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:i.getTime(),k={start:Math.round(a.getTime()/1e3),end:Math.round(b.getTime()/1e3),_:j,"data[]":h},l=0;l<rhc_events_cache.length;l++)if(g&&rhc_events_cache[l].start<=k.start&&rhc_events_cache[l].end>=k.end&&rhc_events_cache[l].url==d.url)return parseInt(e.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void c(rhc_events_cache[l].events);var m=k;m.url=d.url,f.post(d.url,k,function(d){if("OK"==d.R){var e=[];e=rhc_events_to_fc_events(a,b,d,!1),m.events=e,in_rhc_events_cache(m.start,m.end,m.url)||(rhc_events_cache[rhc_events_cache.length]=m),c(e)}else"ERR"==d.R},"json")})},$.fn.Calendarize.ext_events_source=function(a,b,c,d,e){jQuery(document).ready(function(f){for(var g=!0,h=[],i=new Date,j=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:i.getTime(),k={start:Math.round(a.getTime()/1e3),end:Math.round(b.getTime()/1e3),_:j,"data[]":h},l=0;l<rhc_events_cache.length;l++)if(g&&rhc_events_cache[l].start<=k.start&&rhc_events_cache[l].end>=k.end&&rhc_events_cache[l].url==d.url)return parseInt(e.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void c(rhc_events_cache[l].events);var m=k;m.url=d.url,f.post(d.url,k,function(a){m.events=a,in_rhc_events_cache(m.start,m.end,m.url)||(rhc_events_cache[rhc_events_cache.length]=m),c(m.events)},"json")})},$.fn.Calendarize.events_source=function(a,b,c,d){jQuery(document).ready(function(e){function n(e){if("OK"==e.R){var f=[];f=rhc_events_to_fc_events(a,b,e,!0),f=handle_local_tz(f,d,e),f=allday_group(f,d),m.events=f,in_rhc_events_cache(m.start,m.end,m.url)||(rhc_events_cache[rhc_events_cache.length]=m),c(f)}else"ERR"==e.R}var f=[];e(".calendarize_meta_data").each(function(a,b){"checkbox"==b.type?f[f.length]=[b.name,e(b).is(":checked")?1:0]:f[f.length]=[b.name,e(b).val()]});var g=d.events_source+d.events_source_query;"undefined"!=typeof icl_lang?g+="&lang="+icl_lang:"undefined"!=typeof icl_vars&&icl_vars.current_language&&(g+="&lang="+icl_vars.current_language),d.calendar_id&&""!=d.calendar_id?(vo=e("#"+d.calendar_id).find(".fullCalendar").fullCalendar("getView"),view_name=vo.name):view_name="";for(var h=!0,i=new Date,j=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:i.getTime(),k={start:Math.round(a.getTime()/1e3),end:Math.round(b.getTime()/1e3),rhc_shrink:d.shrink?parseInt(d.shrink):"",view:view_name,ver:j,_:"","data[]":f},l=0;l<rhc_events_cache.length;l++)if(h&&rhc_events_cache[l].start<=k.start&&rhc_events_cache[l].end>=k.end&&rhc_events_cache[l].url==g)return parseInt(d.debugjs)&&rhc_console("Loading from rhc_events_cache."),void c(rhc_events_cache[l].events);var m=k;m.url=g,g=g+"&start="+k.start+"&end="+k.end+"&rhc_shrink="+k.rhc_shrink+"&view="+k.view+"&ver="+k.ver,f.length>0&&e.each(f,function(a,b){g=g+"&data["+a+"][0]="+b[0],g=g+"&data["+a+"][1]="+b[1]}),queryString=g.substring(g.indexOf("?")+1),hash=CryptoJS.MD5(queryString),k._=hash.toString(CryptoJS.enc.Hex),g=g+"&_="+k._,e.ajax({url:g,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",cache:!0,success:function(a){n(a)},error:function(a,b,c){if("parsererror"==b)try{response=a.responseText.replace(/<!--[\s\S]*?-->/g,""),f=e.parseJSON(response),n(f)}catch(a){}}})})},$.fn.RHCLink=function(a,b){var c=b,d=b.calendar,e=d.options,g=($.extend({eventClick:"fc_click"},e),a.fc_click_target||"_self");return a.gcal||""==a.url?$(this):a.direct_link?$(this).wrap($("<a></a>").attr("href",a.url).attr("target",g)).parent():$(this).wrap($("<a></a>").attr("target",g).attr("href",a.url).unbind("click").bind("click",function(b){var e=d.options.eventClick?d.options.eventClick:fc_click;return e(a,b,c)})).parent()};var sidelist_events=[]}(jQuery),function(a){var b={init:function(b){var c=a.extend({draggable:!0},b);return this.each(function(){var b=a(this).data("CalendarizeDialog");b||(a(this).data("CalendarizeDialog",c),c.draggable&&a(this).draggable({handle:".ui-widget-header"}),a(this).find(".ui-dialog-titlebar-close").on("click",function(b){a(this).parent().parent().parent().CalendarizeDialog("close")}),j),a(this).hide()})},open:function(b){opacity=a(this).css("opacity"),a(this).css("opacity",0).show().css("margin-left",0).offset(b.offset).css("margin-left",b.margin_left);var c=this.get()[0].getBoundingClientRect();c.right>a(window).width()&&(margin_left=b.margin_left+-1*(5+c.right-a(window).width()),a(this).css("margin-left",margin_left)),a(this).animate({opacity:opacity},200,function(){})},close:function(){a(this).hide()}};a.fn.CalendarizeDialog=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.CalendarizeDialog"):b.init.apply(this,arguments)}}(jQuery),function(a){function c(b){var c=[];return b.children().each(function(b,d){c.push({name:a(d).html(),lon:a(d).data("glon"),lat:a(d).data("glat"),info:a(d).data("ginfo"),address:a(d).data("gaddress"),marker_active:a(d).data("marker_active"),marker_inactive:a(d).data("marker_active"),marker_size:a(d).data("marker_size")})}),c}function d(b,c,e){function f(a,c){var f=function(f,g){return g==google.maps.GeocoderStatus.OK&&(latlng=f[0].geometry.location,a[c].lat=latlng.lat(),a[c].lon=latlng.lng()),d(b,a,e)};return f}if(e++,e>10)return!1;if("interactive"!=b.data("type"))return!1;if(0==c.length)return!1;for(var g=0;g<c.length;g++)if(!c[g].lat&&!c[g].lon&&c[g].address){var i=new google.maps.Geocoder;return void i.geocode({address:c[g].address},f(c,g))}b.uniqueId(),ratio=b.data("ratio"),ratio=""==ratio?"4:3":ratio,ratio_arr=ratio.split(":"),h=b.width()*ratio_arr[1]/ratio_arr[0],b.height(h),maptype=b.data("maptype")||"ROADMAP",settings={mapTypeId:google.maps.MapTypeId[maptype],center:new google.maps.LatLng(c[0].lat,c[0].lon)},b.data("zoom")&&(settings.zoom=b.data("zoom"));var j=new google.maps.Map(b.get(0),settings),k=new google.maps.LatLngBounds,l=new google.maps.InfoWindow;a.each(c,function(a,b){marker=new google.maps.Marker({position:new google.maps.LatLng(b.lat,b.lon),map:j}),k.extend(marker.position),google.maps.event.addListener(marker,"click",function(a,c){return function(){l.setContent(b.info||b.name||b.address),l.open(j,a)}}(marker,a))}),c.length>1&&j.fitBounds(k)}var b={init:function(b){a.extend({todo:!1},b);return this.each(function(){var b=a(this),e=b.data("rhc_gmap");if(!e)return b.data("rhc_gmap",!0),d(b,c(b),0),!0})}};a.fn.rhcGmap=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.rhcGmap"):b.init.apply(this,arguments)}}(jQuery),jQuery(document).ready(function(a){init_rhc()});